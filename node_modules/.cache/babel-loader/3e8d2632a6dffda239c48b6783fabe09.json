{"ast":null,"code":"var _jsxFileName = \"/Users/vonojastro/Desktop/lms-frontend-v2/src/components/CheckoutPage/PaymentMethodSelectorModal/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Popup } from \"reactjs-popup\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport PaymentMethod from \"../PaymentMethod/index\";\nimport { useForm } from \"react-final-form\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PaymentMethodSelectorModal(_ref) {\n  _s();\n\n  let {\n    trigger,\n    subTotal\n  } = _ref;\n  const [selectedCategory, setSelectedCategory] = useState(null);\n  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState(null);\n  const {\n    change\n  } = useForm();\n  const processors = useSelector(state => state.payment ? state.payment.getIn([\"data\", \"processors\"]) : null);\n\n  const handleClickBreadcrumb = event => {\n    event.preventDefault();\n    const isCategoriesClicked = event.target.id === \"Categories\";\n    if (isCategoriesClicked) setSelectedCategory(null);\n  };\n\n  const contentStyle = {\n    padding: 0,\n    background: \"#fff0\",\n    border: 0\n  };\n\n  const getBreadcrumbs = () => {\n    const path = [\"Categories\"];\n    if (selectedCategory) path.push(selectedCategory);\n    const last = path.length - 1;\n    return path.map((pathName, index) => index !== last ? /*#__PURE__*/_jsxDEV(\"li\", {\n      className: \"breadcrumb-item\",\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/\",\n        id: pathName,\n        onClick: handleClickBreadcrumb,\n        children: pathName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"li\", {\n      className: \"breadcrumb-item active\",\n      \"aria-current\": \"page\",\n      children: pathName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }, this));\n  };\n\n  const handleClickPaymentCategory = event => {\n    event.preventDefault();\n    setSelectedCategory(event.target.id);\n  };\n\n  const handleClickPaymentMethod = procId => {\n    setSelectedPaymentMethod(procId);\n  };\n\n  const isPaymentMethodSelected = procId => procId === selectedPaymentMethod;\n\n  const handleClickBackToCategories = () => {\n    setSelectedCategory(null);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Popup, {\n    trigger: trigger,\n    modal: true,\n    contentStyle,\n    lockScroll: true,\n    closeOnDocumentClick: true,\n    children: close => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-dialog modal-xl text-dark\",\n      role: \"document\",\n      style: {\n        margin: 0\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        style: {\n          height: \"95vh\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"modal-title\",\n            children: \"Select a payment method\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: close,\n            type: \"button\",\n            className: \"close\",\n            \"data-dismiss\": \"modal\",\n            \"aria-label\": \"Close\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              \"aria-hidden\": \"true\",\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 17\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n                \"aria-label\": \"breadcrumb\",\n                children: /*#__PURE__*/_jsxDEV(\"ol\", {\n                  class: \"breadcrumb\",\n                  children: getBreadcrumbs()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"alert alert-primary font-10 my-3\",\n                role: \"alert\",\n                children: [\"Please select a\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-bold\",\n                  children: !selectedCategory ? \"category\" : \"payment method\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-5\",\n                children: [selectedCategory && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex mb-1\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-outline font-14 ml-auto\",\n                    style: {\n                      width: \"8rem\"\n                    },\n                    onClick: handleClickBackToCategories,\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      class: \"fas fa-arrow-left mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 111,\n                      columnNumber: 27\n                    }, this), \"Categories\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 106,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n                  exitBeforeEnter: true,\n                  children: !selectedCategory && Object.keys(processors).map(paymentCategory => /*#__PURE__*/_jsxDEV(motion.div, {\n                    style: {\n                      display: \"grid\",\n                      gridTemplate: \"repeat(auto-fit, 1fr)\",\n                      gap: 10\n                    },\n                    initial: {\n                      opacity: 0\n                    },\n                    animate: {\n                      opacity: 1\n                    },\n                    exit: {\n                      opacity: 0\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-link text-left\",\n                      id: paymentCategory,\n                      onClick: handleClickPaymentCategory,\n                      children: paymentCategory\n                    }, paymentCategory, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 129,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 119,\n                    columnNumber: 27\n                  }, this)) || /*#__PURE__*/_jsxDEV(motion.div, {\n                    className: \"p-2\",\n                    initial: {\n                      opacity: 0\n                    },\n                    animate: {\n                      opacity: 1\n                    },\n                    exit: {\n                      opacity: 0\n                    },\n                    style: {\n                      display: \"grid\",\n                      gridTemplate: \"repeat(auto-fit, 1fr)\",\n                      gap: 10,\n                      maxHeight: \"calc(100vh - 28rem)\",\n                      overflowY: \"auto\",\n                      overflowX: \"hidden\"\n                    },\n                    children: processors[selectedCategory].map(method => /*#__PURE__*/_jsxDEV(PaymentMethod, {\n                      method: method,\n                      subTotal: subTotal,\n                      handleClickPaymentMethod: handleClickPaymentMethod,\n                      isSelected: isPaymentMethodSelected(method.procId)\n                    }, subTotal + method.procId, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 155,\n                      columnNumber: 29\n                    }, this))\n                  }, \"paymentmethodlist\", false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-secondary\",\n            \"data-dismiss\": \"modal\",\n            onClick: e => {\n              e.preventDefault();\n              close();\n            },\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: !selectedPaymentMethod,\n            type: \"button\",\n            className: \"btn btn-info\",\n            \"data-dismiss\": \"modal\",\n            onClick: e => {\n              e.preventDefault();\n              change(\"procId\", selectedPaymentMethod);\n              close();\n            },\n            children: \"Confirm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PaymentMethodSelectorModal, \"3HhL+r+kPs8fMVvp8sXVsyV4+Zc=\", false, function () {\n  return [useForm, useSelector];\n});\n\n_c = PaymentMethodSelectorModal;\nexport default PaymentMethodSelectorModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"PaymentMethodSelectorModal\");","map":{"version":3,"sources":["/Users/vonojastro/Desktop/lms-frontend-v2/src/components/CheckoutPage/PaymentMethodSelectorModal/index.jsx"],"names":["React","useState","useSelector","Popup","AnimatePresence","motion","PaymentMethod","useForm","PaymentMethodSelectorModal","trigger","subTotal","selectedCategory","setSelectedCategory","selectedPaymentMethod","setSelectedPaymentMethod","change","processors","state","payment","getIn","handleClickBreadcrumb","event","preventDefault","isCategoriesClicked","target","id","contentStyle","padding","background","border","getBreadcrumbs","path","push","last","length","map","pathName","index","handleClickPaymentCategory","handleClickPaymentMethod","procId","isPaymentMethodSelected","handleClickBackToCategories","close","margin","height","width","Object","keys","paymentCategory","display","gridTemplate","gap","opacity","maxHeight","overflowY","overflowX","method","e"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Popup } from \"reactjs-popup\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport PaymentMethod from \"../PaymentMethod/index\";\nimport { useForm } from \"react-final-form\";\n\nfunction PaymentMethodSelectorModal({ trigger, subTotal }) {\n  const [selectedCategory, setSelectedCategory] = useState(null);\n  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState(null);\n\n  const { change } = useForm();\n  const processors = useSelector((state) =>\n    state.payment ? state.payment.getIn([\"data\", \"processors\"]) : null\n  );\n\n  const handleClickBreadcrumb = (event) => {\n    event.preventDefault();\n    const isCategoriesClicked = event.target.id === \"Categories\";\n    if (isCategoriesClicked) setSelectedCategory(null);\n  };\n\n  const contentStyle = {\n    padding: 0,\n    background: \"#fff0\",\n    border: 0,\n  };\n  const getBreadcrumbs = () => {\n    const path = [\"Categories\"];\n    if (selectedCategory) path.push(selectedCategory);\n    const last = path.length - 1;\n\n    return path.map((pathName, index) =>\n      index !== last ? (\n        <li className=\"breadcrumb-item\">\n          <a href=\"/\" id={pathName} onClick={handleClickBreadcrumb}>\n            {pathName}\n          </a>\n        </li>\n      ) : (\n        <li className=\"breadcrumb-item active\" aria-current=\"page\">\n          {pathName}\n        </li>\n      )\n    );\n  };\n  const handleClickPaymentCategory = (event) => {\n    event.preventDefault();\n    setSelectedCategory(event.target.id);\n  };\n\n  const handleClickPaymentMethod = (procId) => {\n    setSelectedPaymentMethod(procId);\n  };\n\n  const isPaymentMethodSelected = (procId) => procId === selectedPaymentMethod;\n\n  const handleClickBackToCategories = () => {\n    setSelectedCategory(null);\n  };\n\n  return (\n    <Popup\n      trigger={trigger}\n      modal\n      {...{ contentStyle }}\n      lockScroll\n      closeOnDocumentClick={true}\n    >\n      {(close) => (\n        <div\n          className=\"modal-dialog modal-xl text-dark\"\n          role=\"document\"\n          style={{ margin: 0 }}\n        >\n          <div className=\"modal-content\" style={{ height: \"95vh\" }}>\n            <div className=\"modal-header\">\n              <h4 className=\"modal-title\">Select a payment method</h4>\n              <button\n                onClick={close}\n                type=\"button\"\n                className=\"close\"\n                data-dismiss=\"modal\"\n                aria-label=\"Close\"\n              >\n                <span aria-hidden=\"true\">×</span>{\" \"}\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"card-body\">\n                <div className=\"form-body\">\n                  <nav aria-label=\"breadcrumb\">\n                    <ol class=\"breadcrumb\">{getBreadcrumbs()}</ol>\n                  </nav>\n                  <div class=\"alert alert-primary font-10 my-3\" role=\"alert\">\n                    Please select a{\" \"}\n                    <span className=\"font-bold\">\n                      {!selectedCategory ? \"category\" : \"payment method\"}\n                    </span>\n                  </div>\n\n                  <div className=\"mt-5\">\n                    {selectedCategory && (\n                      <div className=\"d-flex mb-1\">\n                        <button\n                          className=\"btn btn-outline font-14 ml-auto\"\n                          style={{ width: \"8rem\" }}\n                          onClick={handleClickBackToCategories}\n                        >\n                          <i class=\"fas fa-arrow-left mr-2\"></i>\n                          Categories\n                        </button>\n                      </div>\n                    )}\n                    <AnimatePresence exitBeforeEnter>\n                      {(!selectedCategory &&\n                        Object.keys(processors).map((paymentCategory) => (\n                          <motion.div\n                            style={{\n                              display: \"grid\",\n                              gridTemplate: \"repeat(auto-fit, 1fr)\",\n                              gap: 10,\n                            }}\n                            initial={{ opacity: 0 }}\n                            animate={{ opacity: 1 }}\n                            exit={{ opacity: 0 }}\n                          >\n                            <button\n                              className=\"btn btn-link text-left\"\n                              key={paymentCategory}\n                              id={paymentCategory}\n                              onClick={handleClickPaymentCategory}\n                            >\n                              {paymentCategory}\n                            </button>\n                          </motion.div>\n                        ))) || (\n                        <motion.div\n                          key=\"paymentmethodlist\"\n                          className='p-2'\n                          initial={{ opacity: 0 }}\n                          animate={{ opacity: 1 }}\n                          exit={{ opacity: 0 }}\n                          style={{\n                            display: \"grid\",\n                            gridTemplate: \"repeat(auto-fit, 1fr)\",\n                            gap: 10,\n                            maxHeight: \"calc(100vh - 28rem)\",\n                            overflowY: \"auto\",\n                            overflowX: \"hidden\",\n                          }}\n                        >\n                          {processors[selectedCategory].map((method) => (\n                            <PaymentMethod\n                              key={subTotal + method.procId}\n                              method={method}\n                              subTotal={subTotal}\n                              handleClickPaymentMethod={handleClickPaymentMethod}\n                              isSelected={isPaymentMethodSelected(method.procId)}\n                            />\n                          ))}\n                        </motion.div>\n                      )}\n                    </AnimatePresence>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                type=\"button\"\n                className=\"btn btn-secondary\"\n                data-dismiss=\"modal\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  close();\n                }}\n              >\n                Close\n              </button>\n              <button\n                disabled={!selectedPaymentMethod}\n                type=\"button\"\n                className=\"btn btn-info\"\n                data-dismiss=\"modal\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  change(\"procId\", selectedPaymentMethod);\n                  close();\n                }}\n              >\n                Confirm\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </Popup>\n  );\n}\n\nexport default PaymentMethodSelectorModal;\n"]},"metadata":{},"sourceType":"module"}