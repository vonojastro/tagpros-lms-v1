{"ast":null,"code":"import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport { DEFAULT_DOMAIN } from '../constants';\nimport { fetchExternalApi } from '../init';\nimport { generateComponentId } from '../utils';\n/**\n * Returns the JitsiMeeting Component with access to a custom External API\n * to be used as-it-is in React projects\n *\n * @param {IJitsiMeetingProps} props the component's props\n * @returns {ReactElement} the `JitsiMeeting` Component\n * @example\n  ```js\n    <JitsiMeeting\n        domain='meet.jit.si'\n        roomName: 'TestingJitsiMeetingComponent'\n        spinner={CustomSpinner}\n        onApiReady={(externalApi) => console.log(externalApi)}\n    />\n  ```\n */\n\nconst JitsiMeeting = _ref => {\n  let {\n    domain = DEFAULT_DOMAIN,\n    roomName,\n    configOverwrite,\n    interfaceConfigOverwrite,\n    jwt,\n    invitees,\n    devices,\n    userInfo,\n    spinner: Spinner,\n    onApiReady,\n    onReadyToClose,\n    getIFrameRef\n  } = _ref;\n  const [componentId, setComponentId] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [apiLoaded, setApiLoaded] = useState(false);\n  const externalApi = useRef();\n  const apiRef = useRef();\n  const meetingRef = useRef(null);\n  useEffect(() => {\n    setComponentId(generateComponentId('jitsiMeeting'));\n    fetchExternalApi(domain).then(api => {\n      externalApi.current = api;\n      setApiLoaded(true);\n    }).catch(e => console.error(e.message));\n  }, []);\n  const loadIFrame = useCallback(JitsiMeetExternalAPI => {\n    apiRef.current = new JitsiMeetExternalAPI(domain, {\n      roomName,\n      configOverwrite,\n      interfaceConfigOverwrite,\n      jwt,\n      invitees,\n      devices,\n      userInfo,\n      parentNode: meetingRef.current\n    });\n    setLoading(false);\n\n    if (apiRef.current) {\n      typeof onApiReady === 'function' && onApiReady(apiRef.current);\n      apiRef.current.on('readyToClose', () => {\n        typeof onReadyToClose === 'function' && onReadyToClose();\n      });\n\n      if (meetingRef.current && typeof getIFrameRef === 'function') {\n        getIFrameRef(meetingRef.current);\n      }\n    }\n  }, [apiRef, meetingRef, onApiReady, onReadyToClose, getIFrameRef, domain, roomName, configOverwrite, interfaceConfigOverwrite, jwt, invitees, devices, userInfo]);\n  useEffect(() => {\n    if (apiLoaded && !apiRef.current) {\n      if (externalApi.current) {\n        loadIFrame(externalApi.current);\n      }\n    }\n  }, [apiLoaded, loadIFrame]);\n  const renderLoadingSpinner = useCallback(() => {\n    if (!Spinner) {\n      return null;\n    }\n\n    if (!loading || apiRef.current) {\n      return null;\n    }\n\n    return _jsx(Spinner, {}, void 0);\n  }, [Spinner, apiRef.current]);\n  return _jsxs(_Fragment, {\n    children: [renderLoadingSpinner(), _jsx(\"div\", {\n      id: componentId,\n      ref: meetingRef\n    }, componentId)]\n  }, void 0);\n};\n\nexport default JitsiMeeting;","map":{"version":3,"sources":["/Users/vonojastro/Desktop/lms-frontend-v2/node_modules/@jitsi/react-sdk/lib/components/JitsiMeeting.js"],"names":["jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","useCallback","useEffect","useRef","useState","DEFAULT_DOMAIN","fetchExternalApi","generateComponentId","JitsiMeeting","domain","roomName","configOverwrite","interfaceConfigOverwrite","jwt","invitees","devices","userInfo","spinner","Spinner","onApiReady","onReadyToClose","getIFrameRef","componentId","setComponentId","loading","setLoading","apiLoaded","setApiLoaded","externalApi","apiRef","meetingRef","then","api","current","catch","e","console","error","message","loadIFrame","JitsiMeetExternalAPI","parentNode","on","renderLoadingSpinner","children","id","ref"],"mappings":"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","sourcesContent":["import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport { DEFAULT_DOMAIN } from '../constants';\nimport { fetchExternalApi } from '../init';\nimport { generateComponentId } from '../utils';\n/**\n * Returns the JitsiMeeting Component with access to a custom External API\n * to be used as-it-is in React projects\n *\n * @param {IJitsiMeetingProps} props the component's props\n * @returns {ReactElement} the `JitsiMeeting` Component\n * @example\n  ```js\n    <JitsiMeeting\n        domain='meet.jit.si'\n        roomName: 'TestingJitsiMeetingComponent'\n        spinner={CustomSpinner}\n        onApiReady={(externalApi) => console.log(externalApi)}\n    />\n  ```\n */\nconst JitsiMeeting = ({ domain = DEFAULT_DOMAIN, roomName, configOverwrite, interfaceConfigOverwrite, jwt, invitees, devices, userInfo, spinner: Spinner, onApiReady, onReadyToClose, getIFrameRef }) => {\n    const [componentId, setComponentId] = useState('');\n    const [loading, setLoading] = useState(true);\n    const [apiLoaded, setApiLoaded] = useState(false);\n    const externalApi = useRef();\n    const apiRef = useRef();\n    const meetingRef = useRef(null);\n    useEffect(() => {\n        setComponentId(generateComponentId('jitsiMeeting'));\n        fetchExternalApi(domain)\n            .then((api) => {\n            externalApi.current = api;\n            setApiLoaded(true);\n        })\n            .catch((e) => console.error(e.message));\n    }, []);\n    const loadIFrame = useCallback((JitsiMeetExternalAPI) => {\n        apiRef.current = new JitsiMeetExternalAPI(domain, {\n            roomName,\n            configOverwrite,\n            interfaceConfigOverwrite,\n            jwt,\n            invitees,\n            devices,\n            userInfo,\n            parentNode: meetingRef.current\n        });\n        setLoading(false);\n        if (apiRef.current) {\n            typeof onApiReady === 'function' && onApiReady(apiRef.current);\n            apiRef.current.on('readyToClose', () => {\n                typeof onReadyToClose === 'function' && onReadyToClose();\n            });\n            if (meetingRef.current && typeof getIFrameRef === 'function') {\n                getIFrameRef(meetingRef.current);\n            }\n        }\n    }, [\n        apiRef,\n        meetingRef,\n        onApiReady,\n        onReadyToClose,\n        getIFrameRef,\n        domain,\n        roomName,\n        configOverwrite,\n        interfaceConfigOverwrite,\n        jwt,\n        invitees,\n        devices,\n        userInfo\n    ]);\n    useEffect(() => {\n        if (apiLoaded && !apiRef.current) {\n            if (externalApi.current) {\n                loadIFrame(externalApi.current);\n            }\n        }\n    }, [apiLoaded, loadIFrame]);\n    const renderLoadingSpinner = useCallback(() => {\n        if (!Spinner) {\n            return null;\n        }\n        if (!loading || apiRef.current) {\n            return null;\n        }\n        return _jsx(Spinner, {}, void 0);\n    }, [Spinner, apiRef.current]);\n    return (_jsxs(_Fragment, { children: [renderLoadingSpinner(), _jsx(\"div\", { id: componentId, ref: meetingRef }, componentId)] }, void 0));\n};\nexport default JitsiMeeting;\n"]},"metadata":{},"sourceType":"module"}