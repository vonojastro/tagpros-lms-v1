{"ast":null,"code":"var _jsxFileName = \"/Users/vonojastro/Desktop/lms-frontend-v2/src/App.js\",\n    _s = $RefreshSig$();\n\nimport 'react-responsive-modal/styles.css';\nimport 'reactjs-popup/dist/index.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport \"slick-carousel/slick/slick.css\";\nimport \"slick-carousel/slick/slick-theme.css\";\nimport 'react-modern-drawer/dist/index.css';\nimport 'react-loading-skeleton/dist/skeleton.css';\nimport './app.css';\nimport React, { useEffect, useState } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useLocation, useRoutes } from 'react-router-dom';\nimport { api } from './api';\nimport getRoutes from './routes';\nimport ThemeProvider from 'components/ThemeProvider';\nimport { ToastContainer } from 'react-toastify';\nimport { Modal, Button } from 'react-bootstrap';\nimport useGoogleAnalytics from 'useGoogleAnalytics';\nimport { setLastLogin } from 'redux/actions/auth';\nimport { gapi, loadAuth2 } from 'gapi-script';\nimport LogoutModal from 'components/LogoutModal'; //\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  var _location$state;\n\n  useGoogleAnalytics();\n  const googleClientId = process.env.REACT_APP_GOOGLE_CLIENT_ID;\n  useEffect(() => {\n    loadAuth2(gapi, googleClientId, 'email').then(result => {\n      console.log('ðŸš€ ~ file: App.js -> gapi ~ line 30 ~ useEffect ~ result', result);\n    }).catch(err => {\n      console.log('ðŸš€ ~ file: App.js -> gapi ~ line 33 ~ useEffect ~ err', err);\n    });\n  }, [googleClientId]);\n  const [showExpiredSessionModal, setShowExpiredSessionModal] = useState(false);\n  const authToken = useSelector(state => state.auth.authToken); // const socialAuthToken = useSelector(state => state.auth.socialAuthToken);\n\n  const userType = useSelector(state => //state.auth.user ? state.auth.user.type : \"teacher\"\n  state.auth.accountType ? state.auth.accountType : 'teacher'); // Set Auth Token\n\n  api.defaults.headers = {\n    Authorization: `Bearer ${authToken}`\n  }; // api.defaults.data = {authToken: }\n\n  const routing = useRoutes(getRoutes(authToken, userType)); // useEffect(() => {\n  //   if(!!socialAuthToken)\n  // api.interceptors.request.use(\n  //   function (req) {\n  //     req.data = {...( !!socialAuthToken && { authToken: socialAuthToken } ), ...req.data}\n  //     return req;\n  //   },\n  //   (err) => {\n  //     return Promise.reject(err);\n  //   }\n  // );\n  // }, [socialAuthToken])\n\n  api.interceptors.response.use(response => {\n    // Any status code that lie within the range of 2xx cause this function to trigger\n    // Do something with response data\n    // console.log(response);\n    return response;\n  }, error => {\n    // Any status codes that falls outside the range of 2xx cause this function to trigger\n    // Do something with response error\n    if (!!error.response && !!error.response.data && !!error.response.data.type && (error.response.data.type === 'token_invalid' || error.response.data.type === 'blank_token') && error.response.config.url !== '/admin/saveAdminPassword') {\n      // show modal here\n      setShowExpiredSessionModal(true);\n    }\n\n    return Promise.reject(error);\n  });\n\n  const returnToLogin = () => {\n    api.defaults.headers = {\n      Authorization: null\n    };\n\n    if (userType.indexOf('adm') > -1) {\n      window.location.pathname = '/admin-login';\n      localStorage.clear();\n    } else {\n      window.location.pathname = '/login';\n      localStorage.clear();\n    }\n  };\n\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const welcomeModalDismissIntent = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.from) === 'welcome-modal';\n  React.useEffect(() => {\n    if (welcomeModalDismissIntent) dispatch(setLastLogin(new Date().toUTCString())); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [welcomeModalDismissIntent]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(LogoutModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      pauseOnHover: true,\n      position: \"top-right\",\n      autoClose: 5000,\n      hideProgressBar: true,\n      closeOnClick: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      size: \"m\",\n      show: showExpiredSessionModal,\n      backdrop: \"static\",\n      keyboard: false,\n      onHide: () => {\n        setShowExpiredSessionModal(false);\n      },\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Session Expired\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: \"Oh no! Session Expired, Please Reauthenticate\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: () => returnToLogin(),\n          children: \"Ok\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: `${process.env.REACT_APP_NAME}${process.env.REACT_APP_ENV !== 'Production' ? ` - ${process.env.REACT_APP_ENV}` : ''}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ThemeProvider, {\n      color: userType === 'teacher' ? 'blue' : userType === 'family' ? 'megna' : userType === 'learner' ? 'purple' : 'blue',\n      children: routing\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"g3OV7a9cJt8SABfobe1+vhaMGmQ=\", false, function () {\n  return [useGoogleAnalytics, useSelector, useSelector, useRoutes, useDispatch, useLocation];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/vonojastro/Desktop/lms-frontend-v2/src/App.js"],"names":["React","useEffect","useState","Helmet","useDispatch","useSelector","useLocation","useRoutes","api","getRoutes","ThemeProvider","ToastContainer","Modal","Button","useGoogleAnalytics","setLastLogin","gapi","loadAuth2","LogoutModal","App","googleClientId","process","env","REACT_APP_GOOGLE_CLIENT_ID","then","result","console","log","catch","err","showExpiredSessionModal","setShowExpiredSessionModal","authToken","state","auth","userType","accountType","defaults","headers","Authorization","routing","interceptors","response","use","error","data","type","config","url","Promise","reject","returnToLogin","indexOf","window","location","pathname","localStorage","clear","dispatch","welcomeModalDismissIntent","from","Date","toUTCString","REACT_APP_NAME","REACT_APP_ENV"],"mappings":"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","sourcesContent":["import 'react-responsive-modal/styles.css';\nimport 'reactjs-popup/dist/index.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport \"slick-carousel/slick/slick.css\"; \nimport \"slick-carousel/slick/slick-theme.css\";\nimport 'react-modern-drawer/dist/index.css';\nimport 'react-loading-skeleton/dist/skeleton.css';\nimport './app.css'\n\nimport React, { useEffect, useState } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useLocation, useRoutes } from 'react-router-dom';\n\nimport { api } from './api';\nimport getRoutes from './routes';\nimport ThemeProvider from 'components/ThemeProvider';\nimport { ToastContainer } from 'react-toastify';\nimport { Modal, Button } from 'react-bootstrap';\n\nimport useGoogleAnalytics from 'useGoogleAnalytics';\nimport { setLastLogin } from 'redux/actions/auth';\nimport { gapi, loadAuth2 } from 'gapi-script';\nimport LogoutModal from 'components/LogoutModal';\n//\n\nfunction App() {\n  useGoogleAnalytics();\n\n  const googleClientId = process.env.REACT_APP_GOOGLE_CLIENT_ID;\n\n  useEffect(() => {\n    loadAuth2(gapi, googleClientId, 'email')\n      .then(result => {\n        console.log('ðŸš€ ~ file: App.js -> gapi ~ line 30 ~ useEffect ~ result', result);\n      })\n      .catch(err => {\n        console.log('ðŸš€ ~ file: App.js -> gapi ~ line 33 ~ useEffect ~ err', err);\n      });\n  }, [googleClientId]);\n\n  const [showExpiredSessionModal, setShowExpiredSessionModal] = useState(false);\n  const authToken = useSelector(state => state.auth.authToken);\n  // const socialAuthToken = useSelector(state => state.auth.socialAuthToken);\n  const userType = useSelector(state =>\n    //state.auth.user ? state.auth.user.type : \"teacher\"\n    state.auth.accountType ? state.auth.accountType : 'teacher'\n  );\n\n  // Set Auth Token\n  api.defaults.headers = { Authorization: `Bearer ${authToken}` };\n  // api.defaults.data = {authToken: }\n  const routing = useRoutes(getRoutes(authToken, userType));\n\n  // useEffect(() => {\n  //   if(!!socialAuthToken)\n  // api.interceptors.request.use(\n  //   function (req) {\n  //     req.data = {...( !!socialAuthToken && { authToken: socialAuthToken } ), ...req.data}\n  //     return req;\n  //   },\n  //   (err) => {\n  //     return Promise.reject(err);\n  //   }\n  // );\n  // }, [socialAuthToken])\n\n  api.interceptors.response.use(\n    response => {\n      // Any status code that lie within the range of 2xx cause this function to trigger\n      // Do something with response data\n      // console.log(response);\n      return response;\n    },\n    error => {\n      // Any status codes that falls outside the range of 2xx cause this function to trigger\n      // Do something with response error\n\n      if (\n        !!error.response &&\n        !!error.response.data &&\n        !!error.response.data.type &&\n        (error.response.data.type === 'token_invalid' ||\n          error.response.data.type === 'blank_token') &&\n        error.response.config.url !== '/admin/saveAdminPassword'\n      ) {\n        // show modal here\n\n        setShowExpiredSessionModal(true);\n      }\n\n      return Promise.reject(error);\n    }\n  );\n\n  const returnToLogin = () => {\n    api.defaults.headers = { Authorization: null };\n\n    if (userType.indexOf('adm') > -1) {\n      window.location.pathname = '/admin-login';\n      localStorage.clear();\n    } else {\n      window.location.pathname = '/login';\n      localStorage.clear();\n    }\n  };\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const welcomeModalDismissIntent = location.state?.from === 'welcome-modal';\n\n  React.useEffect(() => {\n    if (welcomeModalDismissIntent) dispatch(setLastLogin(new Date().toUTCString()));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [welcomeModalDismissIntent]);\n\n  return (\n    <div>\n      <LogoutModal />\n      <ToastContainer\n        pauseOnHover\n        position='top-right'\n        autoClose={5000}\n        hideProgressBar={true}\n        closeOnClick\n      />\n      <Modal\n        size='m'\n        show={showExpiredSessionModal}\n        backdrop='static'\n        keyboard={false}\n        onHide={() => {\n          setShowExpiredSessionModal(false);\n        }}\n      >\n        <Modal.Header>\n          <Modal.Title>Session Expired</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>Oh no! Session Expired, Please Reauthenticate</Modal.Body>\n        <Modal.Footer>\n          <Button variant='primary' onClick={() => returnToLogin()}>\n            Ok\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      <Helmet>\n        <title>{`${process.env.REACT_APP_NAME}${\n          process.env.REACT_APP_ENV !== 'Production'\n            ? ` - ${process.env.REACT_APP_ENV}`\n            : ''\n        }`}</title>\n      </Helmet>\n      <ThemeProvider\n        color={\n          userType === 'teacher'\n            ? 'blue'\n            : userType === 'family'\n            ? 'megna'\n            : userType === 'learner'\n            ? 'purple'\n            : 'blue'\n        }\n      >\n        {routing}\n      </ThemeProvider>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}