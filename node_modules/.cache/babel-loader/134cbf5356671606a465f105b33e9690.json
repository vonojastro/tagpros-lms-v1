{"ast":null,"code":"var _jsxFileName = \"/Users/vonojastro/Desktop/lms-frontend-v2/src/components/TeacherClasses/Attendance.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState } from \"react\";\nimport { api } from '../../api';\nimport { toast } from 'react-toastify';\nimport { Button, Modal } from 'react-bootstrap';\nimport DefaultPic from '../../img/default-pic-blue1.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Entities = require('html-entities').XmlEntities;\n\nconst he = new Entities();\nexport default function TeacherClasses(_ref) {\n  _s();\n\n  let {\n    selectedClass,\n    closeAttendance\n  } = _ref;\n  const [students, setStudents] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [submitLoading, setSubmitLoading] = useState(false);\n  const [loadError, setLoadError] = useState(false);\n  const [currentSession, setCurrentSession] = useState(null);\n  const [attendanceRecord, setAttendanceRecord] = useState([]);\n  const [sessionList, setSessionList] = useState([]);\n  const [modalShow, setModalShow] = useState(false);\n  React.useEffect(() => {\n    loadData(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const loadData = () => {\n    setLoading(true);\n    getStudents();\n  };\n\n  const getStudents = async () => {\n    api.get(`/class/${selectedClass.accountId}/students`).then(response => {\n      setStudents(response.data);\n      getAttendance();\n    }).catch(() => {\n      setLoading(false);\n      setLoadError(true);\n      setStudents(prevState => []);\n    });\n  };\n\n  const getAttendance = async () => {\n    await api.post(`/attendance/class`, {\n      classId: selectedClass.id\n    }).then(response => {\n      setAttendanceRecord(response.data.attendance);\n      setSessionList(response.data.sessionStatus);\n      setLoadError(false);\n    }).catch(() => {\n      setLoadError(true);\n      setAttendanceRecord(prevState => []);\n    }).finally(() => {\n      setLoading(false);\n    });\n  };\n\n  const getStudentAttendance = (_ref2, index) => {\n    let {\n      accountId,\n      learnerId\n    } = _ref2;\n    const session = index !== undefined ? index : parseInt(currentSession) + 1;\n    const attendance = attendanceRecord.find(item => {\n      var _item$session, _item$accountId, _item$learnerId;\n\n      return ((_item$session = item.session) === null || _item$session === void 0 ? void 0 : _item$session.toString()) === (session === null || session === void 0 ? void 0 : session.toString()) && ((_item$accountId = item.accountId) === null || _item$accountId === void 0 ? void 0 : _item$accountId.toString()) === (accountId === null || accountId === void 0 ? void 0 : accountId.toString()) && ((_item$learnerId = item.learnerId) === null || _item$learnerId === void 0 ? void 0 : _item$learnerId.toString()) === (learnerId === null || learnerId === void 0 ? void 0 : learnerId.toString());\n    });\n    return attendance;\n  };\n\n  const onTickAttendance = async (student, remarks) => {\n    // const { learnerId, accountId } = student;\n    const attendance = getStudentAttendance(student);\n\n    if (!!attendance) {\n      updateAttendance(attendance, remarks);\n    } else {\n      addAttendance(student, remarks);\n    }\n  };\n\n  const addAttendance = async (_ref3, remarks) => {\n    let {\n      learnerId,\n      accountId\n    } = _ref3;\n    const session = parseInt(currentSession) + 1;\n    await toast.promise(api.post(`/attendance/add`, {\n      classId: selectedClass.id,\n      session,\n      learnerId,\n      accountId,\n      remarks,\n      isPresent: remarks ? false : true\n    }), {\n      success: {\n        render(_ref4) {\n          let {\n            data\n          } = _ref4;\n          console.log('setAttendanceRecord', data);\n          setAttendanceRecord(prevState => {\n            prevState.push({\n              id: data.data.attendanceId,\n              learnerId,\n              accountId,\n              isPresent: true,\n              session,\n              remarks\n            });\n            return [...prevState];\n          });\n          return 'Saved...';\n        }\n\n      },\n      pending: 'Updating...',\n      error: {\n        render(_ref5) {\n          var _data$response, _data$response$data;\n\n          let {\n            data\n          } = _ref5;\n          return ((_data$response = data.response) === null || _data$response === void 0 ? void 0 : (_data$response$data = _data$response.data) === null || _data$response$data === void 0 ? void 0 : _data$response$data.message) || 'An unexpected error occurred. Please try again later.';\n        }\n\n      }\n    }, {\n      position: toast.POSITION.TOP_RIGHT,\n      style: {\n        width: 'min-content',\n        fontSize: '14px',\n        position: 'absolute',\n        right: 0\n      },\n      closeButton: false,\n      autoClose: 1000\n    });\n  };\n\n  const updateAttendance = async (_ref6, remarks) => {\n    let {\n      id,\n      isPresent\n    } = _ref6;\n    const index = attendanceRecord.findIndex(item => item.id === id);\n    await toast.promise(api.post(`/attendance/update`, {\n      attendanceId: id,\n      isPresent: !!remarks ? isPresent : !isPresent,\n      remarks\n    }), {\n      success: {\n        render() {\n          setAttendanceRecord(prevState => {\n            prevState[index].isPresent = !!remarks ? isPresent : !isPresent;\n            prevState[index].remarks = remarks;\n            return [...prevState];\n          });\n          return 'Saved...';\n        }\n\n      },\n      pending: 'Updating...',\n      error: {\n        render(_ref7) {\n          var _data$response2, _data$response2$data;\n\n          let {\n            data\n          } = _ref7;\n          return ((_data$response2 = data.response) === null || _data$response2 === void 0 ? void 0 : (_data$response2$data = _data$response2.data) === null || _data$response2$data === void 0 ? void 0 : _data$response2$data.message) || 'An unexpected error occurred. Please try again later.';\n        }\n\n      }\n    }, {\n      position: toast.POSITION.TOP_RIGHT,\n      style: {\n        width: 'min-content',\n        fontSize: '14px',\n        position: 'absolute',\n        right: 0\n      },\n      closeButton: false,\n      autoClose: 1000\n    });\n  };\n\n  const saveAttendance = async () => {\n    const session = parseInt(currentSession) + 1;\n    setSubmitLoading(true);\n    await toast.promise(api.post(`/attendance/final`, {\n      session,\n      classId: selectedClass.id\n    }), {\n      success: {\n        render() {\n          setSessionList(prevState => ({ ...prevState,\n            [session]: true\n          }));\n          setModalShow(false);\n          setSubmitLoading(false);\n          return `Attendance for session ${session} has been successfully saved.`;\n        }\n\n      },\n      pending: 'Saving...',\n      error: {\n        render(_ref8) {\n          var _data$response3, _data$response3$data;\n\n          let {\n            data\n          } = _ref8;\n          return ((_data$response3 = data.response) === null || _data$response3 === void 0 ? void 0 : (_data$response3$data = _data$response3.data) === null || _data$response3$data === void 0 ? void 0 : _data$response3$data.message) || 'An unexpected error occurred. Please try again later.';\n        }\n\n      }\n    }, {\n      position: toast.POSITION.TOP_RIGHT,\n      closeButton: true,\n      autoClose: 1000\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"right-aside attendance\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: selectedClass.thumbnailImage ? selectedClass.thumbnailImage : \"./assets/images/anonymous.png\",\n            alt: \"user\",\n            height: 50,\n            width: 50,\n            style: {\n              objectFit: 'cover'\n            },\n            className: \"mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: he.decode(selectedClass.title)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          \"data-target\": \"tooltip\",\n          className: \"btn btn-link\",\n          \"data-original-title\": \"Close\",\n          onClick: closeAttendance,\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            class: \"fas fa-times\",\n            style: {\n              fontSize: '22px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-8\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    children: [\" \", selectedClass.availableDates ? selectedClass.availableDates.length : 1, \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n                    children: \"Total Sessions\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-4 align-self-center text-right  p-l-0\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    id: \"sparklinedash3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 210,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-8\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                    children: [\" \", students.length, \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n                    children: \"Total Enrollees\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-4 align-self-center text-right  p-l-0\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    id: \"sparklinedash3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center data-loading\",\n          style: {\n            display: loading ? 'block' : 'none'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner-border text-primary\",\n            role: \"status\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sr-only\",\n              children: \"Loading...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-text\",\n            children: \"Loading Attendance List ...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          style: {\n            display: !loading && (!!students && students.length < 1 || !!loadError) ? 'block' : 'none'\n          },\n          children: [!!students && students.length < 1 && !loadError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-data\",\n            children: \"No Data Available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 79\n          }, this), !!loadError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-data error\",\n            children: [\"There was an error loading the data. \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 66\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-link\",\n              onClick: loadData,\n              children: \"Reload\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 21\n        }, this), !loading && !loadError && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '100%'\n            },\n            className: \"d-flex flex-row align-items-center justify-content-between mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex flex-row align-items-center w-50\",\n              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                className: \"mr-3\",\n                children: \"Select Session: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-50\",\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  className: \"form-control\",\n                  onChange: e => setCurrentSession(e.target.value),\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    disabled: true,\n                    selected: true,\n                    children: \"Select current session\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 41\n                  }, this), selectedClass.availableDates.map((item, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: idx,\n                    children: [\"Session \", idx + 1]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 254,\n                    columnNumber: 91\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-info\",\n              onClick: () => setModalShow(true),\n              disabled: !currentSession || sessionList[parseInt(currentSession) + 1] === true,\n              children: \"Save Attendance\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 25\n          }, this), sessionList[parseInt(currentSession) + 1] === true && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: 'red'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"small\", {\n              children: \"Attendance for this session has already been submitted. No more updates can be made.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 80\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-responsive\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              class: \"table table-sm attendance-table\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    children: \"#\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    children: \"Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    colspan: selectedClass.availableDates.length,\n                    children: \"Sessions\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 271,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    children: \"Remarks\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 33\n                  }, this), selectedClass.availableDates.map((item, index) => /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\",\n                    className: (index.toString() !== (currentSession === null || currentSession === void 0 ? void 0 : currentSession.toString()) || sessionList[index + 1] === true) && 'inactive-session',\n                    children: index + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 278,\n                    columnNumber: 37\n                  }, this)), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"col\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: students.map((item, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-center\",\n                    children: index + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 286,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    style: {\n                      verticalAlign: 'middle'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      className: \"profile-pic mr-2\" // src={item.photo ? item.photo :\"./assets/images/anonymous.png\"}\n                      ,\n                      src: item.photo !== undefined && item.photo !== null && item.photo.includes('https://tagprosbucket') ? item.photo : DefaultPic,\n                      alt: \"user\",\n                      height: 20,\n                      width: 20,\n                      style: {\n                        objectFit: 'cover'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 288,\n                      columnNumber: 41\n                    }, this), item.name]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 287,\n                    columnNumber: 37\n                  }, this), selectedClass.availableDates.map((dte, dteIndex) => {\n                    var _getStudentAttendance, _getStudentAttendance2, _getStudentAttendance3;\n\n                    return /*#__PURE__*/_jsxDEV(\"td\", {\n                      style: {\n                        verticalAlign: 'middle'\n                      },\n                      className: (dteIndex.toString() !== (currentSession === null || currentSession === void 0 ? void 0 : currentSession.toString()) || sessionList[dteIndex + 1] === true) && 'inactive-session',\n                      children: [((_getStudentAttendance = getStudentAttendance(item, dteIndex + 1)) === null || _getStudentAttendance === void 0 ? void 0 : _getStudentAttendance.isPresent) && ((_getStudentAttendance2 = getStudentAttendance(item, dteIndex + 1)) === null || _getStudentAttendance2 === void 0 ? void 0 : _getStudentAttendance2.session) === dteIndex + 1 && (dteIndex.toString() !== (currentSession === null || currentSession === void 0 ? void 0 : currentSession.toString()) || sessionList[dteIndex + 1] === true) && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"d-flex justify-content-center\",\n                        children: /*#__PURE__*/_jsxDEV(\"i\", {\n                          style: {\n                            color: 'green',\n                            opacity: '0.6'\n                          },\n                          className: \"fas fa-check align-self-center\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 303,\n                          columnNumber: 96\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 303,\n                        columnNumber: 49\n                      }, this), dteIndex.toString() === (currentSession === null || currentSession === void 0 ? void 0 : currentSession.toString()) && sessionList[dteIndex + 1] !== true && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"d-flex justify-content-center\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"checkbox checkbox-info\",\n                          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"checkbox\",\n                            id: `session${dteIndex}-${index}`,\n                            name: `session${dteIndex}-${index}`,\n                            onClick: () => onTickAttendance(item) // onClick={() => onClickSession(index, dteIndex, item)}\n                            // onChange={(e) => onClickCheckBox(e, 'teacher', item)}\n                            // checked={item[`session${dteIndex}`]}\n                            ,\n                            checked: (_getStudentAttendance3 = getStudentAttendance(item)) === null || _getStudentAttendance3 === void 0 ? void 0 : _getStudentAttendance3.isPresent\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 306,\n                            columnNumber: 53\n                          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                            htmlFor: `session${dteIndex}-${index}`,\n                            style: {\n                              paddingLeft: '15px',\n                              marginBottom: 0\n                            },\n                            children: \" \"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 316,\n                            columnNumber: 53\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 305,\n                          columnNumber: 49\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 304,\n                        columnNumber: 136\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 297,\n                      columnNumber: 41\n                    }, this);\n                  }), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: [item.remarks, /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      className: \"form-control\",\n                      name: \"remarks\",\n                      placeholder: \"Remarks here...\",\n                      initialValue: item.remarks,\n                      onBlur: e => onTickAttendance(item, e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 325,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 323,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 33\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 48\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      size: \"s\",\n      show: modalShow,\n      onHide: () => setModalShow(false),\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Save attendance?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(\"h6\", {\n          children: [\"Clicking continue will mark attendance for \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: [\"Session \", parseInt(currentSession) + 1]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 64\n          }, this), \" as final and you will not be able to make changes. Are you sure you want to continue?\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"link\",\n          type: \"button\",\n          onClick: () => setModalShow(false),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"info\",\n          type: \"submit\",\n          onClick: saveAttendance,\n          disabled: submitLoading === true,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              display: submitLoading ? 'inline-block' : 'none'\n            },\n            class: \"spinner-border spinner-border-sm btn-load\",\n            role: \"status\",\n            \"aria-hidden\": \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 21\n          }, this), \"Continue\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 9\n  }, this);\n}\n\n_s(TeacherClasses, \"nhrN/1GwcsRtOXRPzV/WGJxoPEc=\");\n\n_c = TeacherClasses;\n\nvar _c;\n\n$RefreshReg$(_c, \"TeacherClasses\");","map":{"version":3,"sources":["/Users/vonojastro/Desktop/lms-frontend-v2/src/components/TeacherClasses/Attendance.jsx"],"names":["React","Fragment","useState","api","toast","Button","Modal","DefaultPic","Entities","require","XmlEntities","he","TeacherClasses","selectedClass","closeAttendance","students","setStudents","loading","setLoading","submitLoading","setSubmitLoading","loadError","setLoadError","currentSession","setCurrentSession","attendanceRecord","setAttendanceRecord","sessionList","setSessionList","modalShow","setModalShow","useEffect","loadData","getStudents","get","accountId","then","response","data","getAttendance","catch","prevState","post","classId","id","attendance","sessionStatus","finally","getStudentAttendance","index","learnerId","session","undefined","parseInt","find","item","toString","onTickAttendance","student","remarks","updateAttendance","addAttendance","promise","isPresent","success","render","console","log","push","attendanceId","pending","error","message","position","POSITION","TOP_RIGHT","style","width","fontSize","right","closeButton","autoClose","findIndex","saveAttendance","thumbnailImage","objectFit","decode","title","availableDates","length","display","e","target","value","map","idx","color","verticalAlign","photo","includes","name","dte","dteIndex","opacity","paddingLeft","marginBottom"],"mappings":"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","sourcesContent":["import React, { Fragment, useState } from \"react\";\nimport { api } from '../../api';\nimport { toast } from 'react-toastify';\nimport { Button, Modal } from 'react-bootstrap';\nimport DefaultPic from '../../img/default-pic-blue1.png'\nconst Entities = require('html-entities').XmlEntities;\nconst he = new Entities();\n\nexport default function TeacherClasses({selectedClass, closeAttendance}){\n    const [students, setStudents] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [submitLoading, setSubmitLoading] = useState(false);\n    const [loadError, setLoadError] = useState(false);\n    const [currentSession, setCurrentSession] = useState(null);\n    const [attendanceRecord, setAttendanceRecord] = useState([]);\n    const [sessionList, setSessionList] = useState([]);\n    const [modalShow, setModalShow] = useState(false);\n\n    React.useEffect(() => {\n        loadData();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const loadData = () => {\n        setLoading(true);\n        getStudents();\n    }\n\n    const getStudents = async() => {\n        api.get(`/class/${selectedClass.accountId}/students`)\n        .then(response => {\n            setStudents(response.data);\n            getAttendance();\n        }).catch(() => {\n            setLoading(false);\n            setLoadError(true);\n            setStudents((prevState) => []);\n        });\n    }\n\n    const getAttendance = async() => {\n        await api.post(`/attendance/class`, {classId:selectedClass.id })\n        .then(response => {\n            setAttendanceRecord(response.data.attendance);\n            setSessionList(response.data.sessionStatus);\n            setLoadError(false);\n        }).catch(() => {\n            setLoadError(true);\n            setAttendanceRecord((prevState) => []);\n        }).finally(() => {\n            setLoading(false);\n        });\n    }\n\n    const getStudentAttendance = ({accountId, learnerId}, index) => {\n        const session = index !==undefined ? index : parseInt(currentSession)+1;\n        const attendance = attendanceRecord.find(item => (\n            item.session?.toString() === session?.toString() \n            && item.accountId?.toString() === accountId?.toString() \n            && item.learnerId?.toString() === learnerId?.toString()\n        ));\n\n        return attendance;\n    }\n\n    const onTickAttendance = async (student, remarks) => {\n        // const { learnerId, accountId } = student;\n        const attendance = getStudentAttendance(student);\n        \n        if(!!attendance){\n            updateAttendance(attendance, remarks)\n        }else{\n            addAttendance(student, remarks);\n        }\n    }\n\n    const addAttendance = async({learnerId, accountId}, remarks) => {\n        const session = parseInt(currentSession)+1;\n        await toast.promise(\n            api.post(`/attendance/add`, {classId:selectedClass.id, session, learnerId, accountId, remarks, isPresent: (remarks ? false : true)}),\n            {\n              success: {\n                render({data}) {\n                    console.log('setAttendanceRecord', data);\n                    setAttendanceRecord(prevState => {\n                        prevState.push({\n                            id: data.data.attendanceId,\n                            learnerId,\n                            accountId,\n                            isPresent: true,\n                            session,\n                            remarks\n                        });\n                        return [...prevState]\n                    });\n                  return 'Saved...'\n                }\n              },\n              pending: 'Updating...',\n              error: {\n                render({ data }) {\n                  return (data.response?.data?.message ||\n                  'An unexpected error occurred. Please try again later.');\n                }\n              }\n            },\n            { position: toast.POSITION.TOP_RIGHT, \n                style: {width: 'min-content', fontSize: '14px', position: 'absolute', right: 0}, \n                closeButton: false,\n                autoClose: 1000 \n            }\n        );\n        \n    }\n\n    const updateAttendance = async({id, isPresent}, remarks) => {\n        const index = attendanceRecord.findIndex(item => (item.id === id));\n\n        await toast.promise(\n            api.post(`/attendance/update`, {attendanceId:id, isPresent: !!remarks ? isPresent : !isPresent, remarks}),\n            {\n              success: {\n                render() {\n                    setAttendanceRecord(prevState => {\n                        prevState[index].isPresent = !!remarks ? isPresent : !isPresent;\n                        prevState[index].remarks = remarks;\n                        return [...prevState]\n                    });\n                  return 'Saved...'\n                }\n              },\n              pending: 'Updating...',\n              error: {\n                render({ data }) {\n                  return (data.response?.data?.message ||\n                  'An unexpected error occurred. Please try again later.');\n                }\n              }\n            },\n            { position: toast.POSITION.TOP_RIGHT, \n                style: {width: 'min-content', fontSize: '14px', position: 'absolute', right: 0}, \n                closeButton: false,\n                autoClose: 1000 \n            }\n        );\n    }\n\n    const saveAttendance = async () => {\n        const session = parseInt(currentSession) + 1;\n        setSubmitLoading(true);\n        await toast.promise(\n            api.post(`/attendance/final`, {session, classId: selectedClass.id}),\n            {\n              success: {\n                render() {\n                    setSessionList(prevState => ({\n                        ...prevState,\n                        [session]: true\n                    }));\n                    setModalShow(false);\n                    setSubmitLoading(false);\n                  return `Attendance for session ${session} has been successfully saved.`\n                }\n              },\n              pending: 'Saving...',\n              error: {\n                render({ data }) {\n                  return (data.response?.data?.message ||\n                  'An unexpected error occurred. Please try again later.');\n                }\n              }\n            },\n            { position: toast.POSITION.TOP_RIGHT, \n                closeButton: true,\n                autoClose: 1000 \n            }\n        );\n    }\n\n    return (\n        <Fragment>\n            <div className=\"right-aside attendance\">\n                <div className=\"d-flex justify-content-between mb-4\">\n                    <h3>\n                        <img\n                            src={selectedClass.thumbnailImage ? selectedClass.thumbnailImage : \"./assets/images/anonymous.png\"}\n                            alt=\"user\"\n                            height={50}\n                            width={50}\n                            style={{objectFit: 'cover'}}\n                            className=\"mr-2\"/>\n                            <b>{he.decode(selectedClass.title)}</b>\n                    </h3>\n                    <button data-target=\"tooltip\" className=\"btn btn-link\" data-original-title=\"Close\" onClick={closeAttendance}>\n                        <i class=\"fas fa-times\" style={{ fontSize: '22px' }}></i>\n                    </button>\n                </div>\n                <hr />\n                <div className=\"row\">\n                    <div className=\"col\">\n                        <div className=\"card\">\n                        <div className=\"card-body\">\n                            {/* <!-- Row --> */}\n                            <div className=\"row\">\n                            <div className=\"col-8\">\n                                <h2> {selectedClass.availableDates ? selectedClass.availableDates.length : 1} </h2>\n                                <h6>Total Sessions</h6>\n                            </div>\n                            <div className=\"col-4 align-self-center text-right  p-l-0\">\n                                <div id=\"sparklinedash3\"></div>\n                            </div>\n                            </div>\n                        </div>\n                        </div>\n                    </div>\n                    <div className=\"col\">\n                        <div className=\"card\">\n                        <div className=\"card-body\">\n                            {/* <!-- Row --> */}\n                            <div className=\"row\">\n                            <div className=\"col-8\">\n                                <h2> {students.length} </h2>\n                                <h6>Total Enrollees</h6>\n                            </div>\n                            <div className=\"col-4 align-self-center text-right  p-l-0\">\n                                <div id=\"sparklinedash3\"></div>\n                            </div>\n                            </div>\n                        </div>\n                        </div>\n                    </div>\n                </div>\n                <div>\n                    <div className=\"text-center data-loading\" style = {{display: loading ? 'block': 'none'}}>\n                        <div className=\"spinner-border text-primary\" role=\"status\">\n                            <span className=\"sr-only\">Loading...</span>\n                        </div>\n                        <div className=\"loading-text\">Loading Attendance List ...</div>\n                    </div>\n                    <div className=\"text-center\" style = {{display: (!loading && ((!!students && students.length < 1) || !!loadError)) ? 'block': 'none'}}>\n                        {(!!students && students.length < 1 && !loadError) && <div className=\"no-data\">No Data Available</div>}\n                        {!!loadError && <div className=\"no-data error\">\n                            There was an error loading the data. <br/>\n                            <button className=\"btn btn-link\" onClick={loadData}>Reload</button>\n                        </div>}\n                    </div>\n                    {!loading && !loadError && <div>\n                        <div style={{width: '100%'}} className=\"d-flex flex-row align-items-center justify-content-between mb-2\">\n                            <div className=\"d-flex flex-row align-items-center w-50\">\n                                <h6 className=\"mr-3\">Select Session: </h6>\n                                <div className=\"w-50\">\n                                    <select className=\"form-control\" onChange={(e) => setCurrentSession(e.target.value)}>\n                                        <option value=\"\" disabled selected>Select current session</option>\n                                        {selectedClass.availableDates.map((item, idx) => (<option value={idx}>Session {idx+1}</option>))}\n                                    </select>\n                                </div>\n                            </div>\n                            <button className=\"btn btn-info\" onClick={() => setModalShow(true)} disabled={!currentSession || sessionList[(parseInt(currentSession)+1)] === true}>\n                                Save Attendance\n                            </button>\n                        </div>\n                        {sessionList[(parseInt(currentSession)+1)] === true && <div style={{color:'red'}}>\n                            <small>Attendance for this session has already been submitted. No more updates can be made.</small>\n                        </div>}\n                        <div className=\"table-responsive\">\n                            <table class=\"table table-sm attendance-table\">\n                            <thead>\n                                <tr>\n                                <th scope=\"col\">#</th>\n                                <th scope=\"col\">Name</th>\n                                <th colspan={selectedClass.availableDates.length}>Sessions</th>\n                                <th scope=\"col\">Remarks</th>\n                                </tr>\n                                <tr>\n                                <th scope=\"col\"></th>\n                                <th scope=\"col\"></th>\n                                {selectedClass.availableDates.map((item, index) => (\n                                    <th scope=\"col\" className={(index.toString() !== currentSession?.toString() || sessionList[index+1] === true) && 'inactive-session'}>{index+1}</th>\n                                ))}\n                                <th scope=\"col\"></th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {students.map((item, index) => (\n                                <tr>\n                                    <td className=\"text-center\">{index+1}</td>\n                                    <td style={{verticalAlign: 'middle'}}>\n                                        <img className=\"profile-pic mr-2\" \n                                        // src={item.photo ? item.photo :\"./assets/images/anonymous.png\"}\n                                        src={item.photo !== undefined && \n                                            item.photo !== null && \n                                            item.photo.includes('https://tagprosbucket')? item.photo : DefaultPic}\n                                        alt=\"user\" height={20} width={20} style={{objectFit: 'cover'}}/> \n                                        {item.name}\n                                    </td>\n                                    {selectedClass.availableDates.map((dte, dteIndex) => (\n                                        <td style={{verticalAlign: 'middle'}} className={(dteIndex.toString() !== currentSession?.toString() || sessionList[dteIndex+1] === true) && 'inactive-session'}>\n                                            {/* \n                                            {item[`session${dteIndex}`] && <i style={{color:'green'}} className=\"fas fa-check align-self-center\"></i>}\n                                            </div> */}\n                                            {/* (dteIndex+1).toString() === getStudentAttendance(item)?.session.toString() &&  */}\n                                            {getStudentAttendance(item, (dteIndex+1))?.isPresent && getStudentAttendance(item, (dteIndex+1))?.session === (dteIndex+1) && (dteIndex.toString() !== currentSession?.toString() || sessionList[dteIndex+1] === true) && \n                                                <div className=\"d-flex justify-content-center\"><i style={{color:'green', opacity: '0.6'}} className=\"fas fa-check align-self-center\"></i></div>}\n                                            {dteIndex.toString() === currentSession?.toString() && sessionList[dteIndex+1] !== true && <div className=\"d-flex justify-content-center\">\n                                                <div className=\"checkbox checkbox-info\">\n                                                    <input\n                                                        type=\"checkbox\"\n                                                        id={`session${dteIndex}-${index}`}\n                                                        name={`session${dteIndex}-${index}`}\n                                                        onClick={() => onTickAttendance(item)}\n                                                        // onClick={() => onClickSession(index, dteIndex, item)}\n                                                        // onChange={(e) => onClickCheckBox(e, 'teacher', item)}\n                                                        // checked={item[`session${dteIndex}`]}\n                                                        checked={getStudentAttendance(item)?.isPresent}\n                                                    />\n                                                    <label htmlFor={`session${dteIndex}-${index}`} style={{paddingLeft: '15px', marginBottom:0}}>\n                                                        {\" \"} \n                                                    </label>\n                                                </div>\n                                            </div>}\n                                        </td>\n                                    ))}\n                                    <td>\n                                        {item.remarks}\n                                        <input type=\"text\" className=\"form-control\" name=\"remarks\"\n                                            placeholder=\"Remarks here...\" initialValue={item.remarks} onBlur={(e) => onTickAttendance(item, e.target.value)}/>\n                                    </td>\n                                </tr>))}\n                            </tbody>\n                            </table>\n                        </div>\n                    </div>}\n                </div>\n            </div>\n\n            <Modal size='s' show={modalShow} onHide={() => setModalShow(false)}>\n                <Modal.Header closeButton>\n                <Modal.Title>Save attendance?</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                <h6>\n                    Clicking continue will mark attendance for <b>Session {parseInt(currentSession)+1}</b> as final and you will not be able to make changes.\n                    Are you sure you want to continue?\n                </h6>\n                </Modal.Body>\n                <Modal.Footer>\n                <Button variant='link' type='button' onClick={() => setModalShow(false)}>\n                    Cancel\n                </Button>\n                <Button\n                    variant='info'\n                    type='submit'\n                    onClick={saveAttendance}\n                    disabled={submitLoading === true}\n                >\n                    <span\n                    style={{ display: submitLoading ? 'inline-block' : 'none' }}\n                    class='spinner-border spinner-border-sm btn-load'\n                    role='status'\n                    aria-hidden='true'\n                    />\n                    Continue\n                </Button>\n                </Modal.Footer>\n            </Modal>\n        </Fragment>)\n}"]},"metadata":{},"sourceType":"module"}