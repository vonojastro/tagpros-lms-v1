{"ast":null,"code":"import { api } from \"../api\";\nimport { setClasses, setWatchClassInfo, setClassMaintenanceOptions, setDraftClass, saveClassSuccess, clearClassSuccess, saveClassAttempt, saveClassError, getClassesForApprovalSuccess, getClassesForApprovalError, getClassesForApprovalClear, setClassApprovalUpdateStatusMessage, setClassItems, getDraftAttempt, getClassesForApprovalLoading, saveClassLinkLoading, saveClassLinkSuccess, saveClassLinkError, saveModuleLoading, saveModuleSuccess, saveModuleError } from 'redux/actions/classes';\nconst CLASS_ENDPOINT = '/class';\nexport const getClasses = async (dispatch, args) => {\n  try {\n    const response = await api.post(`/api/class`, args);\n    dispatch(setClasses(response.data));\n  } catch (error) {\n    console.error(error);\n  }\n};\nexport const getClassInfo = async (dispatch, slug) => {\n  try {\n    const token = localStorage.getItem('jwt');\n\n    if (token) {\n      const response = await api.post(`/api/class/info`, {\n        slug\n      }, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      dispatch(setWatchClassInfo(response.data));\n    } else {\n      throw new Error('You are not logged in.');\n    }\n  } catch (error) {\n    console.error(error);\n  }\n};\nexport const getClassMaintenanceOptions = async (dispatch, args) => {\n  try {\n    const response = await api.post(`/api/class/maintenance/options`, args);\n    dispatch(setClassMaintenanceOptions(response.data));\n  } catch (error) {\n    console.error(error);\n  }\n};\nexport const getDraft = async function (dispatch) {\n  let classId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n  try {\n    const args = {};\n\n    if (classId) {\n      args.classId = classId;\n    }\n\n    dispatch(getDraftAttempt());\n    const token = localStorage.getItem('jwt');\n\n    if (token) {\n      // uncomment to enable draft again\n      // const response = await api.post(`/api/class/${!classId ? 'draft' : 'edit'}`, args, {\n      //     headers: { Authorization: \"Bearer \" + token },\n      // });\n      const response = await api.post(`/api/class/edit`, args, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      dispatch(setDraftClass(response.data));\n    } else {\n      throw new Error('You are not logged in.');\n    }\n  } catch (error) {\n    console.error(error);\n  }\n};\nexport const saveClass = async (dispatch, args) => {\n  try {\n    dispatch(saveClassAttempt());\n    const token = localStorage.getItem('jwt');\n\n    if (token) {\n      const response = await api.post(`/api/class/save`, args, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      dispatch(saveClassSuccess(response.data));\n      setTimeout(() => {\n        dispatch(clearClassSuccess());\n      }, 3000);\n    } else {\n      throw new Error('You are not logged in.');\n    }\n  } catch (error) {\n    dispatch(saveClassError(error.response.data.message));\n    setTimeout(() => {\n      dispatch(clearClassSuccess());\n    }, 3000);\n  }\n};\nexport const getForApprovals = async dispatch => {\n  try {\n    dispatch(getClassesForApprovalLoading(true));\n    const token = localStorage.getItem('admin_jwt');\n\n    if (token) {\n      const response = await api.post(`/api/class/approval`, {}, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      dispatch(getClassesForApprovalSuccess(response.data));\n      dispatch(getClassesForApprovalLoading(false));\n    } else {\n      throw new Error('You are not logged in.');\n    }\n  } catch (error) {\n    console.log(error.response.data.message);\n    dispatch(getClassesForApprovalLoading(false));\n  }\n};\nexport const updateStatus = async (dispatch, args) => {\n  try {\n    const token = localStorage.getItem('admin_jwt');\n\n    if (token) {\n      const response = await api.post(`/api/class/approval/update-status`, args, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      dispatch(setClassApprovalUpdateStatusMessage(response.data));\n    } else {\n      throw new Error('You are not logged in.');\n    }\n  } catch (error) {\n    dispatch(setClassApprovalUpdateStatusMessage(error.response.data.message));\n  }\n};\nexport const getClassItems = async (dispatch, args) => {\n  try {\n    const token = localStorage.getItem('admin_jwt');\n\n    if (token) {\n      const response = await api.post(`/api/class/approval/get-class-items`, args, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      dispatch(setClassItems(response.data));\n    } else {\n      throw new Error('You are not logged in.');\n    }\n  } catch (error) {\n    console.log(error.response);\n  }\n};\nexport const onFilterChange = async (dispatch, args) => {\n  try {\n    dispatch(getClassesForApprovalLoading(true));\n    const token = localStorage.getItem('admin_jwt');\n\n    if (token) {\n      const response = await api.post(`/api/class/approval`, args, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      dispatch(getClassesForApprovalSuccess(response.data));\n      dispatch(getClassesForApprovalLoading(false));\n    } else {\n      throw new Error('You are not logged in.');\n    }\n  } catch (error) {\n    console.log(error.response.data.message);\n    dispatch(getClassesForApprovalLoading(false));\n  }\n};\nexport const getMyClasses = async dispatch => {\n  try {\n    dispatch(getClassesForApprovalLoading(true));\n    const token = localStorage.getItem('jwt');\n\n    if (token) {\n      const response = await api.post(`/api/class/my-classes`, {}, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      dispatch(getClassesForApprovalSuccess(response.data));\n      dispatch(getClassesForApprovalLoading(false));\n    } else {\n      throw new Error('You are not logged in.');\n    }\n  } catch (error) {\n    console.log(error);\n    dispatch(getClassesForApprovalLoading(false));\n  }\n};\nexport const getMyClassItems = async (dispatch, args) => {\n  try {\n    const token = localStorage.getItem('jwt');\n\n    if (token) {\n      const response = await api.post(`/api/class/my-class/get-class-items`, args, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      dispatch(setClassItems(response.data));\n    } else {\n      throw new Error('You are not logged in.');\n    }\n  } catch (error) {\n    console.log(error.response);\n  }\n};\nexport const onMyClassFilterChange = async (dispatch, args) => {\n  try {\n    dispatch(getClassesForApprovalLoading(true));\n    const token = localStorage.getItem('jwt');\n\n    if (token) {\n      const response = await api.post(`/api/class/my-classes`, args, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      dispatch(getClassesForApprovalSuccess(response.data));\n      dispatch(getClassesForApprovalLoading(false));\n    } else {\n      throw new Error('You are not logged in.');\n    }\n  } catch (error) {\n    console.log(error.response.data.message);\n    dispatch(getClassesForApprovalLoading(false));\n  }\n};\nexport const cancelClass = async (dispatch, args) => {\n  try {\n    dispatch(getClassesForApprovalClear());\n    const token = localStorage.getItem('jwt');\n\n    if (token) {\n      const response = await api.post(`/api/class/my-class/cancel`, args, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      dispatch(getClassesForApprovalSuccess(response.data));\n    } else {\n      throw new Error('You are not logged in.');\n    }\n  } catch (error) {\n    dispatch(getClassesForApprovalError(error.response.data.message));\n  }\n};\nexport const saveClassLink = async (dispatch, link, classId) => {\n  try {\n    dispatch(saveClassLinkLoading(true));\n    const token = localStorage.getItem('jwt');\n\n    if (token) {\n      await api.post(`/api/class/my-class/savelink`, {\n        link,\n        classId\n      }, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      dispatch(saveClassLinkSuccess());\n    } else {\n      throw new Error('You are not logged in.');\n    }\n  } catch (error) {\n    dispatch(saveClassLinkError());\n  }\n};\nexport const saveModule = async (dispatch, args, callback) => {\n  console.log(args);\n\n  try {\n    dispatch(saveModuleLoading(true));\n    const response = await api.post(CLASS_ENDPOINT + `/module`, args);\n    !!callback && callback(response.data);\n    dispatch(saveModuleSuccess(response.data));\n    dispatch(saveModuleLoading(false));\n  } catch (error) {\n    console.log(error);\n    !!callback && callback(false);\n    dispatch(saveModuleError(error));\n    dispatch(saveModuleLoading(false));\n  }\n};","map":{"version":3,"sources":["/Users/vonojastro/Desktop/lms-frontend-v2/src/api/classes.js"],"names":["api","setClasses","setWatchClassInfo","setClassMaintenanceOptions","setDraftClass","saveClassSuccess","clearClassSuccess","saveClassAttempt","saveClassError","getClassesForApprovalSuccess","getClassesForApprovalError","getClassesForApprovalClear","setClassApprovalUpdateStatusMessage","setClassItems","getDraftAttempt","getClassesForApprovalLoading","saveClassLinkLoading","saveClassLinkSuccess","saveClassLinkError","saveModuleLoading","saveModuleSuccess","saveModuleError","CLASS_ENDPOINT","getClasses","dispatch","args","response","post","data","error","console","getClassInfo","slug","token","localStorage","getItem","headers","Authorization","Error","getClassMaintenanceOptions","getDraft","classId","saveClass","setTimeout","message","getForApprovals","log","updateStatus","getClassItems","onFilterChange","getMyClasses","getMyClassItems","onMyClassFilterChange","cancelClass","saveClassLink","link","saveModule","callback"],"mappings":"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","sourcesContent":["import { api } from \"../api\";\nimport {\n    setClasses,\n    setWatchClassInfo,\n    setClassMaintenanceOptions,\n    setDraftClass,\n    saveClassSuccess,\n    clearClassSuccess,\n    saveClassAttempt,\n    saveClassError,\n    getClassesForApprovalSuccess,\n    getClassesForApprovalError,\n    getClassesForApprovalClear,\n    setClassApprovalUpdateStatusMessage,\n    setClassItems,\n    getDraftAttempt,\n    getClassesForApprovalLoading,\n    saveClassLinkLoading,\n    saveClassLinkSuccess,\n    saveClassLinkError,\n    saveModuleLoading,\n    saveModuleSuccess,\n    saveModuleError\n} from 'redux/actions/classes';\n\nconst CLASS_ENDPOINT = '/class';\n\nexport const getClasses = async (dispatch, args) => {\n    try {\n        const response = await api.post(`/api/class`, args);\n        dispatch(setClasses(response.data));\n    } catch (error) {\n        console.error(error);\n    }\n};\n\nexport const getClassInfo = async (dispatch, slug) => {\n    try {\n        const token = localStorage.getItem('jwt');\n        if (token) {\n            const response = await api.post(`/api/class/info`, { slug }, {\n                headers: { Authorization: \"Bearer \" + token },\n            });\n            dispatch(setWatchClassInfo(response.data));\n        } else {\n            throw new Error('You are not logged in.');\n        }\n    } catch (error) {\n        console.error(error);\n    }\n};\n\nexport const getClassMaintenanceOptions = async (dispatch, args) => {\n    try {\n        const response = await api.post(`/api/class/maintenance/options`, args);\n        dispatch(setClassMaintenanceOptions(response.data));\n    } catch (error) {\n        console.error(error);\n    }\n};\n\nexport const getDraft = async (dispatch, classId = '') => {\n    try {\n        const args = {}\n        if (classId) {\n            args.classId = classId\n        }\n        dispatch(getDraftAttempt());\n        const token = localStorage.getItem('jwt');\n        if (token) {\n            // uncomment to enable draft again\n            // const response = await api.post(`/api/class/${!classId ? 'draft' : 'edit'}`, args, {\n            //     headers: { Authorization: \"Bearer \" + token },\n            // });\n            const response = await api.post(`/api/class/edit`, args, {\n                headers: { Authorization: \"Bearer \" + token },\n            });\n            dispatch(setDraftClass(response.data));\n        } else {\n            throw new Error('You are not logged in.');\n        }\n    } catch (error) {\n        console.error(error);\n    }\n};\n\nexport const saveClass = async (dispatch, args) => {\n    try {\n        dispatch(saveClassAttempt());\n        const token = localStorage.getItem('jwt');\n        if (token) {\n            const response = await api.post(`/api/class/save`, args, {\n                headers: { Authorization: \"Bearer \" + token },\n            });\n            dispatch(saveClassSuccess(response.data));\n            setTimeout(() => {\n                dispatch(clearClassSuccess());\n            }, 3000);\n        } else {\n            throw new Error('You are not logged in.');\n        }\n    } catch (error) {\n        dispatch(saveClassError(error.response.data.message));\n        setTimeout(() => {\n            dispatch(clearClassSuccess());\n        }, 3000);\n    }\n};\n\nexport const getForApprovals = async (dispatch) => {\n    try {\n        dispatch(getClassesForApprovalLoading(true))\n        const token = localStorage.getItem('admin_jwt');\n        if (token) {\n            const response = await api.post(`/api/class/approval`, {}, {\n                headers: { Authorization: \"Bearer \" + token },\n            });\n            dispatch(getClassesForApprovalSuccess(response.data));\n            dispatch(getClassesForApprovalLoading(false))\n        } else {\n            throw new Error('You are not logged in.');\n        }\n    } catch (error) {\n        console.log(error.response.data.message);\n        dispatch(getClassesForApprovalLoading(false))\n    }\n};\n\nexport const updateStatus = async (dispatch, args) => {\n    try {\n        const token = localStorage.getItem('admin_jwt');\n        if (token) {\n            const response = await api.post(`/api/class/approval/update-status`, args, {\n                headers: { Authorization: \"Bearer \" + token },\n            });\n            dispatch(setClassApprovalUpdateStatusMessage(response.data));\n        } else {\n            throw new Error('You are not logged in.');\n        }\n    } catch (error) {\n        dispatch(setClassApprovalUpdateStatusMessage(error.response.data.message));\n    }\n};\n\nexport const getClassItems = async (dispatch, args) => {\n    try {\n        const token = localStorage.getItem('admin_jwt');\n        if (token) {\n            const response = await api.post(`/api/class/approval/get-class-items`, args, {\n                headers: { Authorization: \"Bearer \" + token },\n            });\n            dispatch(setClassItems(response.data));\n        } else {\n            throw new Error('You are not logged in.');\n        }\n    } catch (error) {\n        console.log(error.response)\n    }\n};\n\nexport const onFilterChange = async (dispatch, args) => {\n    try {\n        dispatch(getClassesForApprovalLoading(true))\n        const token = localStorage.getItem('admin_jwt');\n        if (token) {\n            const response = await api.post(`/api/class/approval`, args, {\n                headers: { Authorization: \"Bearer \" + token },\n            });\n            dispatch(getClassesForApprovalSuccess(response.data));\n            dispatch(getClassesForApprovalLoading(false))\n        } else {\n            throw new Error('You are not logged in.');\n        }\n    } catch (error) {\n        console.log(error.response.data.message);\n        dispatch(getClassesForApprovalLoading(false))\n    }\n};\n\nexport const getMyClasses = async (dispatch) => {\n    try {\n        dispatch(getClassesForApprovalLoading(true))\n        const token = localStorage.getItem('jwt');\n        if (token) {\n            const response = await api.post(`/api/class/my-classes`, {}, {\n                headers: { Authorization: \"Bearer \" + token },\n            });\n            dispatch(getClassesForApprovalSuccess(response.data));\n            dispatch(getClassesForApprovalLoading(false))\n        } else {\n            throw new Error('You are not logged in.');\n        }\n    } catch (error) {\n        console.log(error);\n        dispatch(getClassesForApprovalLoading(false))\n    }\n};\n\nexport const getMyClassItems = async (dispatch, args) => {\n    try {\n        const token = localStorage.getItem('jwt');\n        if (token) {\n            const response = await api.post(`/api/class/my-class/get-class-items`, args, {\n                headers: { Authorization: \"Bearer \" + token },\n            });\n            dispatch(setClassItems(response.data));\n        } else {\n            throw new Error('You are not logged in.');\n        }\n    } catch (error) {\n        console.log(error.response)\n    }\n};\n\nexport const onMyClassFilterChange = async (dispatch, args) => {\n    try {\n        dispatch(getClassesForApprovalLoading(true))\n        const token = localStorage.getItem('jwt');\n        if (token) {\n            const response = await api.post(`/api/class/my-classes`, args, {\n                headers: { Authorization: \"Bearer \" + token },\n            });\n            dispatch(getClassesForApprovalSuccess(response.data));\n            dispatch(getClassesForApprovalLoading(false))\n        } else {\n            throw new Error('You are not logged in.');\n        }\n    } catch (error) {\n        console.log(error.response.data.message);\n        dispatch(getClassesForApprovalLoading(false))\n    }\n};\n\nexport const cancelClass = async (dispatch, args) => {\n    try {\n        dispatch(getClassesForApprovalClear());\n        const token = localStorage.getItem('jwt');\n        if (token) {\n            const response = await api.post(`/api/class/my-class/cancel`, args, {\n                headers: { Authorization: \"Bearer \" + token },\n            });\n            dispatch(getClassesForApprovalSuccess(response.data));\n        } else {\n            throw new Error('You are not logged in.');\n        }\n    } catch (error) {\n        dispatch(getClassesForApprovalError(error.response.data.message));\n    }\n};\n\nexport const saveClassLink = async (dispatch, link, classId) => {\n    try {\n        dispatch(saveClassLinkLoading(true));\n        const token = localStorage.getItem('jwt');\n        if (token) {\n            await api.post(`/api/class/my-class/savelink`, { link, classId }, {\n                headers: { Authorization: \"Bearer \" + token },\n            });\n            dispatch(saveClassLinkSuccess());\n        } else {\n            throw new Error('You are not logged in.');\n        }\n    } catch (error) {\n        dispatch(saveClassLinkError());\n    }\n}\n\nexport const saveModule = async (dispatch, args, callback) =>{\n    console.log(args);\n    try {\n        dispatch(saveModuleLoading(true));\n        const response = await api.post(CLASS_ENDPOINT + `/module`, args);\n        !!callback && callback(response.data);\n        dispatch(saveModuleSuccess(response.data));\n        dispatch(saveModuleLoading(false));\n        \n    } catch (error) {\n        console.log(error);\n        !!callback && callback(false);\n        dispatch(saveModuleError(error));\n        dispatch(saveModuleLoading(false));\n    }\n};"]},"metadata":{},"sourceType":"module"}