{"ast":null,"code":"var _jsxFileName = \"/Users/vonojastro/Desktop/lms-frontend-v2/src/components/Admin/contents/Configurations/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { toast } from 'react-toastify';\nimport './index.css';\nimport { getAllModulePermission, updateModulePermission } from \"api/admin\";\nimport Tagpi from \"components/common/Tagpi\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Configurations() {\n  _s();\n\n  const dispatch = useDispatch();\n  const [errorTable, setErrorTable] = useState(false);\n  const [submitLoading, setSubmitLoading] = useState(false);\n  const [permissions, setPermissions] = useState({});\n  const [isChanged, setIsChanged] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const loading = useSelector(state => state.uiElements.getIn(['loadingScreen']));\n  const originalPermissions = useSelector(state => state.auth.permissions ? state.auth.permissions : {});\n  const AccessPermissions = useSelector(state => state.admin.permissions ? state.admin.permissions : {});\n\n  const loadData = () => {\n    getAllModulePermission(dispatch, (status, data) => {\n      if (status) {\n        setErrorTable(false);\n        setPermissions(data);\n      } else {\n        setErrorTable(true);\n      }\n    });\n    setErrorTable(false);\n    setIsChanged(false);\n  };\n\n  const getAccessIcon = accessType => {\n    switch (accessType) {\n      case 'readwrite':\n        return /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-check-circle mr-1\",\n          style: {\n            color: 'green'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 38\n        }, this);\n\n      case 'read':\n        return /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-exclamation-circle mr-1\",\n          style: {\n            color: 'orange'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 33\n        }, this);\n\n      case 'noaccess':\n        return /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-minus-circle mr-1\",\n          style: {\n            color: 'red'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 37\n        }, this);\n\n      default:\n        return /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-minus-circle mr-1\",\n          style: {\n            color: 'red'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 29\n        }, this);\n    }\n  };\n\n  const handleChangePermission = (userCode, moduleCode, accessType) => {\n    if (originalPermissions.access[userCode][moduleCode] !== accessType || originalPermissions.access[userCode][moduleCode] !== permissions.access[userCode][moduleCode]) {\n      setPermissions(prevState => ({ ...prevState,\n        access: { ...prevState.access,\n          [userCode]: { ...prevState.access[userCode],\n            [moduleCode]: accessType\n          }\n        }\n      }));\n      setIsChanged(true);\n    }\n  };\n\n  const handleResetPermissions = () => {\n    setPermissions(prevState => ({ ...prevState,\n      access: originalPermissions.access\n    }));\n    setIsChanged(false);\n  };\n\n  const handleSavePermissions = async () => {\n    const changes = {};\n    const adminUsers = Object.keys(originalPermissions.access);\n    const modules = originalPermissions.modules.map(item => item.CODE);\n    adminUsers.forEach(userGroup => {\n      modules.forEach(moduleCode => {\n        if (originalPermissions.access[userGroup][moduleCode] !== permissions.access[userGroup][moduleCode]) {\n          if (!changes[userGroup]) changes[userGroup] = {};\n          changes[userGroup][moduleCode] = permissions.access[userGroup][moduleCode];\n        }\n      });\n    });\n\n    if (Object.keys(changes) < 1) {\n      toast.info(\"No changes has been made on the configuration.\", {\n        autoClose: 900\n      });\n      setIsEditing(false);\n    } else {\n      setSubmitLoading(true);\n      await toast.promise(updateModulePermission(dispatch, {\n        permissions: changes\n      }, status => {\n        if (status) {\n          setIsEditing(false);\n          loadData();\n        }\n\n        setSubmitLoading(false);\n      }), {\n        success: 'Configurations has been successfully updated.',\n        pending: 'Please wait while your changes are being saved...',\n        error: 'Uh Oh! There was an error saving your changes. Please try again.'\n      }, {\n        position: toast.POSITION.TOP_RIGHT,\n        autoClose: 900\n      });\n    }\n  };\n\n  React.useEffect(() => {\n    loadData(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"configurations\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12\",\n          children: [loading && /*#__PURE__*/_jsxDEV(Tagpi, {\n            type: \"loading\",\n            dataName: \"Configurations\",\n            showSpinner: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 37\n          }, this), !loading && errorTable && /*#__PURE__*/_jsxDEV(Tagpi, {\n            type: \"505\",\n            dataName: \"Configurations\",\n            reload: loadData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 54\n          }, this), !loading && !errorTable && Object.keys(permissions).length < 1 && /*#__PURE__*/_jsxDEV(Tagpi, {\n            type: \"noData\",\n            dataName: \"Configurations\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 94\n          }, this), !loading && !errorTable && Object.keys(permissions).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"right-aside col\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-4\",\n                  id: \"access\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"d-flex align-items-center justify-content-between\",\n                    children: [/*#__PURE__*/_jsxDEV(\"fieldset\", {\n                      className: \"fieldset-border mb-2\",\n                      style: {\n                        fontSize: '12px'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n                        className: \"fieldset-border\",\n                        children: /*#__PURE__*/_jsxDEV(\"b\", {\n                          children: \"Legend\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 126,\n                          columnNumber: 85\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 126,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"mr-4\",\n                        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"fas fa-check-circle mr-1\",\n                          style: {\n                            color: 'green'\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 128,\n                          columnNumber: 53\n                        }, this), \"View and Manage\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 127,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"mr-4\",\n                        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"fas fa-exclamation-circle mr-1\",\n                          style: {\n                            color: 'orange'\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 132,\n                          columnNumber: 53\n                        }, this), \"View Only\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 131,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"fas fa-minus-circle mr-1\",\n                          style: {\n                            color: 'red'\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 136,\n                          columnNumber: 53\n                        }, this), \"No Access\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 135,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 125,\n                      columnNumber: 45\n                    }, this), AccessPermissions.Configuration === \"readwrite\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [isEditing && /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn btn-danger mr-2\",\n                        onClick: handleResetPermissions,\n                        disabled: !isChanged || submitLoading,\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"pl-2 pr-2\",\n                          children: \"Reset Changes\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 143,\n                          columnNumber: 175\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 143,\n                        columnNumber: 63\n                      }, this), isEditing && /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn btn-info\",\n                        onClick: handleSavePermissions,\n                        disabled: submitLoading,\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"pl-5 pr-5\",\n                          children: \"Save\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 144,\n                          columnNumber: 153\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 144,\n                        columnNumber: 63\n                      }, this), !isEditing && /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn btn-info\",\n                        onClick: () => setIsEditing(true),\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"pl-5 pr-5\",\n                          children: \"Edit\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 145,\n                          columnNumber: 132\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 145,\n                        columnNumber: 64\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 142,\n                      columnNumber: 49\n                    }, this) : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 124,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"table-responsive\",\n                    children: /*#__PURE__*/_jsxDEV(\"table\", {\n                      className: \"table table-sm table-bordered table-striped\",\n                      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                            scope: \"col\",\n                            style: {\n                              color: 'black'\n                            },\n                            children: \"Team/Features\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 155,\n                            columnNumber: 57\n                          }, this), permissions.userGroup.map(item => /*#__PURE__*/_jsxDEV(\"th\", {\n                            scope: \"col\",\n                            style: {\n                              width: `${75 / permissions.userGroup.length}%`\n                            },\n                            children: item.shortName\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 156,\n                            columnNumber: 94\n                          }, this))]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 154,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 153,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                        children: permissions.modules.map(feature => /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                            scope: \"row\",\n                            children: feature.DESCRIPTION\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 161,\n                            columnNumber: 57\n                          }, this), permissions.userGroup.map(userGroup => /*#__PURE__*/_jsxDEV(\"td\", {\n                            class: \"access-value\",\n                            children: [!isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n                              children: permissions.access[userGroup.code] ? permissions.access[userGroup.code][feature.CODE] ? getAccessIcon(permissions.access[userGroup.code][feature.CODE]) : /*#__PURE__*/_jsxDEV(\"i\", {\n                                className: \"fas fa-minus-circle mr-1\",\n                                style: {\n                                  color: 'red'\n                                }\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 167,\n                                columnNumber: 139\n                              }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n                                className: \"fas fa-minus-circle mr-1\",\n                                style: {\n                                  color: 'red'\n                                }\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 168,\n                                columnNumber: 73\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 164,\n                              columnNumber: 80\n                            }, this), isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n                              class: \"dropdown\",\n                              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                                className: \"btn dropdown-toggle\",\n                                type: \"button\",\n                                id: \"dropdownMenuButton\",\n                                \"data-toggle\": \"dropdown\",\n                                \"aria-haspopup\": \"true\",\n                                \"aria-expanded\": \"false\",\n                                disabled: userGroup.code === 'ADMCURATOR' || userGroup.code === 'ADMSA',\n                                children: permissions.access[userGroup.code] ? permissions.access[userGroup.code][feature.CODE] ? getAccessIcon(permissions.access[userGroup.code][feature.CODE]) : /*#__PURE__*/_jsxDEV(\"i\", {\n                                  className: \"fas fa-minus-circle mr-1\",\n                                  style: {\n                                    color: 'red'\n                                  }\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 175,\n                                  columnNumber: 143\n                                }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n                                  className: \"fas fa-minus-circle mr-1\",\n                                  style: {\n                                    color: 'red'\n                                  }\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 176,\n                                  columnNumber: 77\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 172,\n                                columnNumber: 69\n                              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"dropdown-menu\",\n                                \"aria-labelledby\": \"dropdownMenuButton\",\n                                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                                  className: `dropdown-item ${permissions.access[userGroup.code][feature.CODE] === 'readwrite' ? 'active' : ''}`,\n                                  role: \"button\",\n                                  \"data-toggle\": \"tooltip\",\n                                  title: \"View and Manage\",\n                                  onClick: () => handleChangePermission(userGroup.code, feature.CODE, 'readwrite'),\n                                  children: \"View and Manage\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 179,\n                                  columnNumber: 73\n                                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                                  className: `dropdown-item ${permissions.access[userGroup.code][feature.CODE] === 'read' ? 'active' : ''}`,\n                                  role: \"button\",\n                                  \"data-toggle\": \"tooltip\",\n                                  title: \"View Only\",\n                                  onClick: () => handleChangePermission(userGroup.code, feature.CODE, 'read'),\n                                  children: \"View Only\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 184,\n                                  columnNumber: 73\n                                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                                  className: `dropdown-item ${permissions.access[userGroup.code][feature.CODE] === 'noaccess' ? 'active' : ''}`,\n                                  role: \"button\",\n                                  \"data-toggle\": \"tooltip\",\n                                  title: \"No Access\",\n                                  onClick: () => handleChangePermission(userGroup.code, feature.CODE, 'noaccess'),\n                                  children: \"No Access\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 189,\n                                  columnNumber: 73\n                                }, this)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 178,\n                                columnNumber: 69\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 171,\n                              columnNumber: 79\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 163,\n                            columnNumber: 61\n                          }, this))]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 160,\n                          columnNumber: 92\n                        }, this))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 159,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 152,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 151,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 94\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Configurations, \"Ab5+09kmNWOtJ+8ZUyYf0qZxi+E=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = Configurations;\n\nvar _c;\n\n$RefreshReg$(_c, \"Configurations\");","map":{"version":3,"sources":["/Users/vonojastro/Desktop/lms-frontend-v2/src/components/Admin/contents/Configurations/index.jsx"],"names":["React","Fragment","useState","useDispatch","useSelector","toast","getAllModulePermission","updateModulePermission","Tagpi","Configurations","dispatch","errorTable","setErrorTable","submitLoading","setSubmitLoading","permissions","setPermissions","isChanged","setIsChanged","isEditing","setIsEditing","loading","state","uiElements","getIn","originalPermissions","auth","AccessPermissions","admin","loadData","status","data","getAccessIcon","accessType","color","handleChangePermission","userCode","moduleCode","access","prevState","handleResetPermissions","handleSavePermissions","changes","adminUsers","Object","keys","modules","map","item","CODE","forEach","userGroup","info","autoClose","promise","success","pending","error","position","POSITION","TOP_RIGHT","useEffect","length","fontSize","Configuration","width","shortName","feature","DESCRIPTION","code"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,QAA1B,QAA0C,OAA1C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,OAAO,aAAP;AACA,SAASC,sBAAT,EAAiCC,sBAAjC,QAA+D,WAA/D;AACA,OAAOC,KAAP,MAAkB,yBAAlB;;AAEA,eAAe,SAASC,cAAT,GAA0B;AAAA;;AACrC,QAAMC,QAAQ,GAAGP,WAAW,EAA5B;AACA,QAAM,CAACQ,UAAD,EAAaC,aAAb,IAA8BV,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM,CAACW,aAAD,EAAgBC,gBAAhB,IAAoCZ,QAAQ,CAAC,KAAD,CAAlD;AACA,QAAM,CAACa,WAAD,EAAcC,cAAd,IAAgCd,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACe,SAAD,EAAYC,YAAZ,IAA4BhB,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACiB,SAAD,EAAYC,YAAZ,IAA4BlB,QAAQ,CAAC,KAAD,CAA1C;AAEA,QAAMmB,OAAO,GAAGjB,WAAW,CAAEkB,KAAD,IAAWA,KAAK,CAACC,UAAN,CAAiBC,KAAjB,CAAuB,CAAC,eAAD,CAAvB,CAAZ,CAA3B;AACA,QAAMC,mBAAmB,GAAErB,WAAW,CAAEkB,KAAD,IAAYA,KAAK,CAACI,IAAN,CAAWX,WAAX,GAAyBO,KAAK,CAACI,IAAN,CAAWX,WAApC,GAAkD,EAA/D,CAAtC;AACA,QAAMY,iBAAiB,GAAGvB,WAAW,CAACkB,KAAK,IACvCA,KAAK,CAACM,KAAN,CAAYb,WAAZ,GAA0BO,KAAK,CAACM,KAAN,CAAYb,WAAtC,GAAoD,EADnB,CAArC;;AAIA,QAAMc,QAAQ,GAAG,MAAM;AACnBvB,IAAAA,sBAAsB,CAACI,QAAD,EAAW,CAACoB,MAAD,EAASC,IAAT,KAAkB;AAC/C,UAAGD,MAAH,EAAU;AACNlB,QAAAA,aAAa,CAAC,KAAD,CAAb;AACAI,QAAAA,cAAc,CAACe,IAAD,CAAd;AACH,OAHD,MAGK;AACDnB,QAAAA,aAAa,CAAC,IAAD,CAAb;AACH;AACJ,KAPqB,CAAtB;AAQAA,IAAAA,aAAa,CAAC,KAAD,CAAb;AACAM,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,GAXD;;AAaA,QAAMc,aAAa,GAAIC,UAAD,IAAgB;AAClC,YAAOA,UAAP;AACI,WAAK,WAAL;AAAkB,4BAAO;AAAG,UAAA,SAAS,EAAC,0BAAb;AAAwC,UAAA,KAAK,EAAE;AAACC,YAAAA,KAAK,EAAE;AAAR;AAA/C;AAAA;AAAA;AAAA;AAAA,gBAAP;;AAClB,WAAK,MAAL;AAAa,4BAAO;AAAG,UAAA,SAAS,EAAC,gCAAb;AAA8C,UAAA,KAAK,EAAE;AAACA,YAAAA,KAAK,EAAE;AAAR;AAArD;AAAA;AAAA;AAAA;AAAA,gBAAP;;AACb,WAAK,UAAL;AAAiB,4BAAO;AAAG,UAAA,SAAS,EAAC,0BAAb;AAAwC,UAAA,KAAK,EAAE;AAACA,YAAAA,KAAK,EAAE;AAAR;AAA/C;AAAA;AAAA;AAAA;AAAA,gBAAP;;AACjB;AAAS,4BAAO;AAAG,UAAA,SAAS,EAAC,0BAAb;AAAwC,UAAA,KAAK,EAAE;AAACA,YAAAA,KAAK,EAAE;AAAR;AAA/C;AAAA;AAAA;AAAA;AAAA,gBAAP;AAJb;AAMH,GAPD;;AASA,QAAMC,sBAAsB,GAAG,CAACC,QAAD,EAAWC,UAAX,EAAuBJ,UAAvB,KAAsC;AACjE,QAAGR,mBAAmB,CAACa,MAApB,CAA2BF,QAA3B,EAAqCC,UAArC,MAAqDJ,UAArD,IACIR,mBAAmB,CAACa,MAApB,CAA2BF,QAA3B,EAAqCC,UAArC,MAAqDtB,WAAW,CAACuB,MAAZ,CAAmBF,QAAnB,EAA6BC,UAA7B,CAD5D,EACqG;AACjGrB,MAAAA,cAAc,CAACuB,SAAS,KAAK,EACzB,GAAGA,SADsB;AAEzBD,QAAAA,MAAM,EAAE,EACJ,GAAGC,SAAS,CAACD,MADT;AAEJ,WAACF,QAAD,GAAY,EACR,GAAGG,SAAS,CAACD,MAAV,CAAiBF,QAAjB,CADK;AAER,aAACC,UAAD,GAAcJ;AAFN;AAFR;AAFiB,OAAL,CAAV,CAAd;AAUAf,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACH;AACJ,GAfD;;AAiBA,QAAMsB,sBAAsB,GAAG,MAAM;AACjCxB,IAAAA,cAAc,CAACuB,SAAS,KAAK,EACzB,GAAGA,SADsB;AAEzBD,MAAAA,MAAM,EAAEb,mBAAmB,CAACa;AAFH,KAAL,CAAV,CAAd;AAIApB,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,GAND;;AAQA,QAAMuB,qBAAqB,GAAG,YAAY;AACtC,UAAMC,OAAO,GAAG,EAAhB;AACA,UAAMC,UAAU,GAAGC,MAAM,CAACC,IAAP,CAAYpB,mBAAmB,CAACa,MAAhC,CAAnB;AACA,UAAMQ,OAAO,GAAGrB,mBAAmB,CAACqB,OAApB,CAA4BC,GAA5B,CAAgCC,IAAI,IAAIA,IAAI,CAACC,IAA7C,CAAhB;AACAN,IAAAA,UAAU,CAACO,OAAX,CAAoBC,SAAD,IAAe;AAC9BL,MAAAA,OAAO,CAACI,OAAR,CAAiBb,UAAD,IAAgB;AAC5B,YAAGZ,mBAAmB,CAACa,MAApB,CAA2Ba,SAA3B,EAAsCd,UAAtC,MAAsDtB,WAAW,CAACuB,MAAZ,CAAmBa,SAAnB,EAA8Bd,UAA9B,CAAzD,EAAmG;AAC/F,cAAG,CAACK,OAAO,CAACS,SAAD,CAAX,EAAwBT,OAAO,CAACS,SAAD,CAAP,GAAqB,EAArB;AAExBT,UAAAA,OAAO,CAACS,SAAD,CAAP,CAAmBd,UAAnB,IAAiCtB,WAAW,CAACuB,MAAZ,CAAmBa,SAAnB,EAA8Bd,UAA9B,CAAjC;AACH;AACJ,OAND;AAOH,KARD;;AAUA,QAAGO,MAAM,CAACC,IAAP,CAAYH,OAAZ,IAAuB,CAA1B,EAA4B;AACxBrC,MAAAA,KAAK,CAAC+C,IAAN,CAAW,gDAAX,EAA6D;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAA7D;AACAjC,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,KAHD,MAGK;AACDN,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACA,YAAMT,KAAK,CAACiD,OAAN,CACF/C,sBAAsB,CAACG,QAAD,EAAW;AAACK,QAAAA,WAAW,EAAE2B;AAAd,OAAX,EAAoCZ,MAAD,IAAY;AACjE,YAAGA,MAAH,EAAU;AACNV,UAAAA,YAAY,CAAC,KAAD,CAAZ;AACAS,UAAAA,QAAQ;AACX;;AACDf,QAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACH,OANqB,CADpB,EAQN;AACEyC,QAAAA,OAAO,EAAE,+CADX;AAEEC,QAAAA,OAAO,EAAE,mDAFX;AAGEC,QAAAA,KAAK,EAAE;AAHT,OARM,EAaN;AAAEC,QAAAA,QAAQ,EAAErD,KAAK,CAACsD,QAAN,CAAeC,SAA3B;AAAsCP,QAAAA,SAAS,EAAE;AAAjD,OAbM,CAAN;AAcH;AACJ,GAlCD;;AAoCArD,EAAAA,KAAK,CAAC6D,SAAN,CAAgB,MAAM;AAClBhC,IAAAA,QAAQ,GADU,CAElB;AACH,GAHD,EAGG,EAHH;AAKA,sBACI,QAAC,QAAD;AAAA,2BACI;AAAK,MAAA,EAAE,EAAC,gBAAR;AAAA,6BACI;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA,qBACKR,OAAO,iBAAI,QAAC,KAAD;AAAO,YAAA,IAAI,EAAC,SAAZ;AAAsB,YAAA,QAAQ,EAAC,gBAA/B;AAAgD,YAAA,WAAW,EAAE;AAA7D;AAAA;AAAA;AAAA;AAAA,kBADhB,EAEM,CAACA,OAAD,IAAYV,UAAb,iBAA4B,QAAC,KAAD;AAAO,YAAA,IAAI,EAAC,KAAZ;AAAkB,YAAA,QAAQ,EAAC,gBAA3B;AAA4C,YAAA,MAAM,EAAEkB;AAApD;AAAA;AAAA;AAAA;AAAA,kBAFjC,EAGM,CAACR,OAAD,IAAY,CAACV,UAAb,IAA2BiC,MAAM,CAACC,IAAP,CAAY9B,WAAZ,EAAyB+C,MAAzB,GAAkC,CAA9D,iBAAoE,QAAC,KAAD;AAAO,YAAA,IAAI,EAAC,QAAZ;AAAqB,YAAA,QAAQ,EAAC;AAA9B;AAAA;AAAA;AAAA;AAAA,kBAHzE,EAIM,CAACzC,OAAD,IAAY,CAACV,UAAb,IAA2BiC,MAAM,CAACC,IAAP,CAAY9B,WAAZ,EAAyB+C,MAAzB,GAAkC,CAA9D,iBAAoE;AAAK,YAAA,SAAS,EAAC,MAAf;AAAA,mCAEjE;AAAK,cAAA,SAAS,EAAC,KAAf;AAAA,qCAEI;AAAK,gBAAA,SAAS,EAAC,iBAAf;AAAA,uCACI;AAAK,kBAAA,SAAS,EAAC,MAAf;AAAsB,kBAAA,EAAE,EAAC,QAAzB;AAAA,0CACI;AAAK,oBAAA,SAAS,EAAC,mDAAf;AAAA,4CACI;AAAU,sBAAA,SAAS,EAAC,sBAApB;AAA2C,sBAAA,KAAK,EAAE;AAACC,wBAAAA,QAAQ,EAAE;AAAX,uBAAlD;AAAA,8CACI;AAAQ,wBAAA,SAAS,EAAC,iBAAlB;AAAA,+CAAoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAApC;AAAA;AAAA;AAAA;AAAA,8BADJ,eAEI;AAAM,wBAAA,SAAS,EAAC,MAAhB;AAAA,gDACI;AAAG,0BAAA,SAAS,EAAC,0BAAb;AAAwC,0BAAA,KAAK,EAAE;AAAC7B,4BAAAA,KAAK,EAAE;AAAR;AAA/C;AAAA;AAAA;AAAA;AAAA,gCADJ;AAAA;AAAA;AAAA;AAAA;AAAA,8BAFJ,eAMI;AAAM,wBAAA,SAAS,EAAC,MAAhB;AAAA,gDACI;AAAG,0BAAA,SAAS,EAAC,gCAAb;AAA8C,0BAAA,KAAK,EAAE;AAACA,4BAAAA,KAAK,EAAE;AAAR;AAArD;AAAA;AAAA;AAAA;AAAA,gCADJ;AAAA;AAAA;AAAA;AAAA;AAAA,8BANJ,eAUI;AAAA,gDACI;AAAG,0BAAA,SAAS,EAAC,0BAAb;AAAwC,0BAAA,KAAK,EAAE;AAACA,4BAAAA,KAAK,EAAE;AAAR;AAA/C;AAAA;AAAA;AAAA;AAAA,gCADJ;AAAA;AAAA;AAAA;AAAA;AAAA,8BAVJ;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,EAiBQP,iBAAiB,CAACqC,aAAlB,KAAoC,WAApC,gBACA;AAAA,iCACC7C,SAAS,iBAAI;AAAQ,wBAAA,SAAS,EAAC,qBAAlB;AAAwC,wBAAA,OAAO,EAAEqB,sBAAjD;AAAyE,wBAAA,QAAQ,EAAE,CAACvB,SAAD,IAAcJ,aAAjG;AAAA,+CAAgH;AAAM,0BAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAhH;AAAA;AAAA;AAAA;AAAA,8BADd,EAECM,SAAS,iBAAI;AAAQ,wBAAA,SAAS,EAAC,cAAlB;AAAiC,wBAAA,OAAO,EAAEsB,qBAA1C;AAAiE,wBAAA,QAAQ,EAAE5B,aAA3E;AAAA,+CAA0F;AAAM,0BAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA1F;AAAA;AAAA;AAAA;AAAA,8BAFd,EAGC,CAACM,SAAD,iBAAc;AAAQ,wBAAA,SAAS,EAAC,cAAlB;AAAiC,wBAAA,OAAO,EAAE,MAAMC,YAAY,CAAC,IAAD,CAA5D;AAAA,+CAAoE;AAAM,0BAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAApE;AAAA;AAAA;AAAA;AAAA,8BAHf;AAAA;AAAA;AAAA;AAAA;AAAA,4BADA,GAKS,EAtBjB;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,eA4BI;AAAK,oBAAA,SAAS,EAAC,kBAAf;AAAA,2CACI;AAAO,sBAAA,SAAS,EAAC,6CAAjB;AAAA,8CACI;AAAA,+CACI;AAAA,kDACI;AAAI,4BAAA,KAAK,EAAC,KAAV;AAAgB,4BAAA,KAAK,EAAE;AAACc,8BAAAA,KAAK,EAAE;AAAR,6BAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADJ,EAEKnB,WAAW,CAACoC,SAAZ,CAAsBJ,GAAtB,CAA2BC,IAAD,iBAAU;AAAI,4BAAA,KAAK,EAAC,KAAV;AAAgB,4BAAA,KAAK,EAAE;AAACiB,8BAAAA,KAAK,EAAG,GAAE,KAAGlD,WAAW,CAACoC,SAAZ,CAAsBW,MAAO;AAA3C,6BAAvB;AAAA,sCAAwEd,IAAI,CAACkB;AAA7E;AAAA;AAAA;AAAA;AAAA,kCAApC,CAFL;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,8BADJ,eAOI;AAAA,kCACKnD,WAAW,CAAC+B,OAAZ,CAAoBC,GAApB,CAAyBoB,OAAD,iBAAc;AAAA,kDACnC;AAAI,4BAAA,KAAK,EAAC,KAAV;AAAA,sCAAiBA,OAAO,CAACC;AAAzB;AAAA;AAAA;AAAA;AAAA,kCADmC,EAElCrD,WAAW,CAACoC,SAAZ,CAAsBJ,GAAtB,CAA2BI,SAAD,iBACvB;AAAI,4BAAA,KAAK,EAAC,cAAV;AAAA,uCACK,CAAChC,SAAD,iBAAc;AAAA,wCACVJ,WAAW,CAACuB,MAAZ,CAAmBa,SAAS,CAACkB,IAA7B,IACGtD,WAAW,CAACuB,MAAZ,CAAmBa,SAAS,CAACkB,IAA7B,EAAmCF,OAAO,CAAClB,IAA3C,IACAjB,aAAa,CAACjB,WAAW,CAACuB,MAAZ,CAAmBa,SAAS,CAACkB,IAA7B,EAAmCF,OAAO,CAAClB,IAA3C,CAAD,CADb,gBACkE;AAAG,gCAAA,SAAS,EAAC,0BAAb;AAAwC,gCAAA,KAAK,EAAE;AAACf,kCAAAA,KAAK,EAAE;AAAR;AAA/C;AAAA;AAAA;AAAA;AAAA,sCAFrE,gBAGG;AAAG,gCAAA,SAAS,EAAC,0BAAb;AAAwC,gCAAA,KAAK,EAAE;AAACA,kCAAAA,KAAK,EAAE;AAAR;AAA/C;AAAA;AAAA;AAAA;AAAA;AAJO;AAAA;AAAA;AAAA;AAAA,oCADnB,EAQKf,SAAS,iBAAI;AAAK,8BAAA,KAAK,EAAC,UAAX;AAAA,sDACV;AAAQ,gCAAA,SAAS,EAAC,qBAAlB;AAAwC,gCAAA,IAAI,EAAC,QAA7C;AAAsD,gCAAA,EAAE,EAAC,oBAAzD;AAA8E,+CAAY,UAA1F;AAAqG,iDAAc,MAAnH;AAA0H,iDAAc,OAAxI;AAAgJ,gCAAA,QAAQ,EAAEgC,SAAS,CAACkB,IAAV,KAAiB,YAAjB,IAAiClB,SAAS,CAACkB,IAAV,KAAiB,OAA5M;AAAA,0CACKtD,WAAW,CAACuB,MAAZ,CAAmBa,SAAS,CAACkB,IAA7B,IACGtD,WAAW,CAACuB,MAAZ,CAAmBa,SAAS,CAACkB,IAA7B,EAAmCF,OAAO,CAAClB,IAA3C,IACAjB,aAAa,CAACjB,WAAW,CAACuB,MAAZ,CAAmBa,SAAS,CAACkB,IAA7B,EAAmCF,OAAO,CAAClB,IAA3C,CAAD,CADb,gBACkE;AAAG,kCAAA,SAAS,EAAC,0BAAb;AAAwC,kCAAA,KAAK,EAAE;AAACf,oCAAAA,KAAK,EAAE;AAAR;AAA/C;AAAA;AAAA;AAAA;AAAA,wCAFrE,gBAGG;AAAG,kCAAA,SAAS,EAAC,0BAAb;AAAwC,kCAAA,KAAK,EAAE;AAACA,oCAAAA,KAAK,EAAE;AAAR;AAA/C;AAAA;AAAA;AAAA;AAAA;AAJR;AAAA;AAAA;AAAA;AAAA,sCADU,eAOV;AAAK,gCAAA,SAAS,EAAC,eAAf;AAA+B,mDAAgB,oBAA/C;AAAA,wDACI;AAAM,kCAAA,SAAS,EAAG,iBAAgBnB,WAAW,CAACuB,MAAZ,CAAmBa,SAAS,CAACkB,IAA7B,EAAmCF,OAAO,CAAClB,IAA3C,MAAqD,WAArD,GAAmE,QAAnE,GAA6E,EAAG,EAAlH;AACI,kCAAA,IAAI,EAAC,QADT;AACkB,iDAAY,SAD9B;AACwC,kCAAA,KAAK,EAAC,iBAD9C;AAEI,kCAAA,OAAO,EAAE,MAAMd,sBAAsB,CAACgB,SAAS,CAACkB,IAAX,EAAiBF,OAAO,CAAClB,IAAzB,EAA+B,WAA/B,CAFzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADJ,eAMI;AAAM,kCAAA,SAAS,EAAG,iBAAgBlC,WAAW,CAACuB,MAAZ,CAAmBa,SAAS,CAACkB,IAA7B,EAAmCF,OAAO,CAAClB,IAA3C,MAAqD,MAArD,GAA8D,QAA9D,GAAwE,EAAG,EAA7G;AACI,kCAAA,IAAI,EAAC,QADT;AACkB,iDAAY,SAD9B;AACwC,kCAAA,KAAK,EAAC,WAD9C;AAEI,kCAAA,OAAO,EAAE,MAAMd,sBAAsB,CAACgB,SAAS,CAACkB,IAAX,EAAiBF,OAAO,CAAClB,IAAzB,EAA+B,MAA/B,CAFzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCANJ,eAWI;AAAM,kCAAA,SAAS,EAAG,iBAAgBlC,WAAW,CAACuB,MAAZ,CAAmBa,SAAS,CAACkB,IAA7B,EAAmCF,OAAO,CAAClB,IAA3C,MAAqD,UAArD,GAAkE,QAAlE,GAA4E,EAAG,EAAjH;AACI,kCAAA,IAAI,EAAC,QADT;AACkB,iDAAY,SAD9B;AACwC,kCAAA,KAAK,EAAC,WAD9C;AAEI,kCAAA,OAAO,EAAE,MAAMd,sBAAsB,CAACgB,SAAS,CAACkB,IAAX,EAAiBF,OAAO,CAAClB,IAAzB,EAA+B,UAA/B,CAFzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAXJ;AAAA;AAAA;AAAA;AAAA;AAAA,sCAPU;AAAA;AAAA;AAAA;AAAA;AAAA,oCARlB;AAAA;AAAA;AAAA;AAAA;AAAA,kCADH,CAFkC;AAAA;AAAA;AAAA;AAAA;AAAA,gCAAtC;AADL;AAAA;AAAA;AAAA;AAAA,8BAPJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,0BA5BJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA;AAFiE;AAAA;AAAA;AAAA;AAAA,kBAJzE;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAqGH;;GA3MuBxC,c;UACHN,W,EAODC,W,EACWA,W,EACDA,W;;;KAVNK,c","sourcesContent":["import React, { Fragment, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { toast } from 'react-toastify';\nimport './index.css';\nimport { getAllModulePermission, updateModulePermission } from \"api/admin\";\nimport Tagpi from \"components/common/Tagpi\";\n\nexport default function Configurations() {\n    const dispatch = useDispatch();\n    const [errorTable, setErrorTable] = useState(false);\n    const [submitLoading, setSubmitLoading] = useState(false);\n    const [permissions, setPermissions] = useState({});\n    const [isChanged, setIsChanged] = useState(false);\n    const [isEditing, setIsEditing] = useState(false);\n\n    const loading = useSelector((state) => state.uiElements.getIn(['loadingScreen']));\n    const originalPermissions= useSelector((state) => (state.auth.permissions ? state.auth.permissions : {}));\n    const AccessPermissions = useSelector(state =>\n        state.admin.permissions ? state.admin.permissions : {}\n      );\n\n    const loadData = () => {\n        getAllModulePermission(dispatch, (status, data) => {\n            if(status){\n                setErrorTable(false);\n                setPermissions(data);\n            }else{\n                setErrorTable(true);\n            }\n        });\n        setErrorTable(false);\n        setIsChanged(false);\n    }\n\n    const getAccessIcon = (accessType) => {\n        switch(accessType){\n            case 'readwrite': return <i className=\"fas fa-check-circle mr-1\" style={{color: 'green'}}></i>;\n            case 'read': return <i className=\"fas fa-exclamation-circle mr-1\" style={{color: 'orange'}}></i>;\n            case 'noaccess': return <i className=\"fas fa-minus-circle mr-1\" style={{color: 'red'}}></i>;\n            default: return <i className=\"fas fa-minus-circle mr-1\" style={{color: 'red'}}></i>;\n        }\n    }\n\n    const handleChangePermission = (userCode, moduleCode, accessType) => {\n        if(originalPermissions.access[userCode][moduleCode] !== accessType \n            || originalPermissions.access[userCode][moduleCode] !== permissions.access[userCode][moduleCode]){\n            setPermissions(prevState => ({\n                ...prevState,\n                access: {\n                    ...prevState.access,\n                    [userCode]: {\n                        ...prevState.access[userCode],\n                        [moduleCode]: accessType\n                    }\n                }\n            }));\n            setIsChanged(true);\n        }\n    }\n\n    const handleResetPermissions = () => {\n        setPermissions(prevState => ({\n            ...prevState,\n            access: originalPermissions.access\n        }));\n        setIsChanged(false);\n    }\n\n    const handleSavePermissions = async () => {\n        const changes = {};\n        const adminUsers = Object.keys(originalPermissions.access);\n        const modules = originalPermissions.modules.map(item => item.CODE);\n        adminUsers.forEach((userGroup) => {\n            modules.forEach((moduleCode) => {\n                if(originalPermissions.access[userGroup][moduleCode] !== permissions.access[userGroup][moduleCode]){\n                    if(!changes[userGroup]) changes[userGroup] = {};\n\n                    changes[userGroup][moduleCode] = permissions.access[userGroup][moduleCode];\n                }\n            });\n        });\n\n        if(Object.keys(changes) < 1){\n            toast.info(\"No changes has been made on the configuration.\", { autoClose: 900 });\n            setIsEditing(false);\n        }else{\n            setSubmitLoading(true);\n            await toast.promise(\n                updateModulePermission(dispatch, {permissions: changes}, (status) => {\n                    if(status){\n                        setIsEditing(false);\n                        loadData();\n                    }\n                    setSubmitLoading(false);\n                }),\n            {\n              success: 'Configurations has been successfully updated.',\n              pending: 'Please wait while your changes are being saved...',\n              error: 'Uh Oh! There was an error saving your changes. Please try again.'\n            },\n            { position: toast.POSITION.TOP_RIGHT, autoClose: 900 })\n        }\n    }\n\n    React.useEffect(() => {\n        loadData();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return (\n        <Fragment>\n            <div id=\"configurations\">\n                <div className=\"row\">\n                    <div className=\"col-12\">\n                        {loading && <Tagpi type=\"loading\" dataName=\"Configurations\" showSpinner={true}/>}\n                        {(!loading && errorTable) && <Tagpi type=\"505\" dataName=\"Configurations\" reload={loadData}/>}\n                        {(!loading && !errorTable && Object.keys(permissions).length < 1) && <Tagpi type=\"noData\" dataName=\"Configurations\"/>}\n                        {(!loading && !errorTable && Object.keys(permissions).length > 0) && <div className=\"card\">\n                            {/* <!-- .left-right-aside-column--> */}\n                            <div className=\"row\">\n                                {/* <!-- /.left-aside-column--> */}\n                                <div className=\"right-aside col\">\n                                    <div className=\"mt-4\" id=\"access\">\n                                        <div className=\"d-flex align-items-center justify-content-between\">\n                                            <fieldset className=\"fieldset-border mb-2\" style={{fontSize: '12px'}}>\n                                                <legend className=\"fieldset-border\"><b>Legend</b></legend>\n                                                <span className=\"mr-4\">\n                                                    <i className=\"fas fa-check-circle mr-1\" style={{color: 'green'}}></i>\n                                                    View and Manage\n                                                </span>\n                                                <span className=\"mr-4\">\n                                                    <i className=\"fas fa-exclamation-circle mr-1\" style={{color: 'orange'}}></i>\n                                                    View Only\n                                                </span>\n                                                <span>\n                                                    <i className=\"fas fa-minus-circle mr-1\" style={{color: 'red'}}></i>\n                                                    No Access\n                                                </span>\n                                            </fieldset>\n                                            {\n                                                AccessPermissions.Configuration === \"readwrite\" ?\n                                                <div>\n                                                {isEditing && <button className=\"btn btn-danger mr-2\" onClick={handleResetPermissions} disabled={!isChanged || submitLoading}><span className=\"pl-2 pr-2\">Reset Changes</span></button>}\n                                                {isEditing && <button className=\"btn btn-info\" onClick={handleSavePermissions} disabled={submitLoading}><span className=\"pl-5 pr-5\">Save</span></button>}\n                                                {!isEditing && <button className=\"btn btn-info\" onClick={() => setIsEditing(true)}><span className=\"pl-5 pr-5\">Edit</span></button>}\n                                                </div> : ''\n                                            }\n                                        </div>\n\n                                        {/* Access Table */}\n                                        <div className=\"table-responsive\">\n                                            <table className=\"table table-sm table-bordered table-striped\">\n                                                <thead>\n                                                    <tr>\n                                                        <th scope=\"col\" style={{color: 'black'}}>Team/Features</th>\n                                                        {permissions.userGroup.map((item) => <th scope=\"col\" style={{width: `${75/permissions.userGroup.length}%`}}>{item.shortName}</th>)}\n                                                    </tr>\n                                                </thead>\n                                                <tbody>\n                                                    {permissions.modules.map((feature) => (<tr>\n                                                        <th scope=\"row\">{feature.DESCRIPTION}</th>\n                                                        {permissions.userGroup.map((userGroup) => (\n                                                            <td class=\"access-value\">\n                                                                {!isEditing && <div>\n                                                                    {permissions.access[userGroup.code] ? (\n                                                                        permissions.access[userGroup.code][feature.CODE] ?\n                                                                        getAccessIcon(permissions.access[userGroup.code][feature.CODE]) : <i className=\"fas fa-minus-circle mr-1\" style={{color: 'red'}}></i>\n                                                                    ) : <i className=\"fas fa-minus-circle mr-1\" style={{color: 'red'}}></i>}\n                                                                    \n                                                                </div>}\n                                                                {isEditing && <div class=\"dropdown\">\n                                                                    <button className=\"btn dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" disabled={userGroup.code==='ADMCURATOR' || userGroup.code==='ADMSA'}>\n                                                                        {permissions.access[userGroup.code] ? (\n                                                                            permissions.access[userGroup.code][feature.CODE] ?\n                                                                            getAccessIcon(permissions.access[userGroup.code][feature.CODE]) : <i className=\"fas fa-minus-circle mr-1\" style={{color: 'red'}}></i>\n                                                                        ) : <i className=\"fas fa-minus-circle mr-1\" style={{color: 'red'}}></i>}\n                                                                    </button>\n                                                                    <div className=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n                                                                        <span className={`dropdown-item ${permissions.access[userGroup.code][feature.CODE] === 'readwrite' ? 'active': ''}`} \n                                                                            role=\"button\" data-toggle=\"tooltip\" title=\"View and Manage\"\n                                                                            onClick={() => handleChangePermission(userGroup.code, feature.CODE, 'readwrite')}>\n                                                                            View and Manage\n                                                                        </span>\n                                                                        <span className={`dropdown-item ${permissions.access[userGroup.code][feature.CODE] === 'read' ? 'active': ''}`} \n                                                                            role=\"button\" data-toggle=\"tooltip\" title=\"View Only\" \n                                                                            onClick={() => handleChangePermission(userGroup.code, feature.CODE, 'read')}>\n                                                                            View Only\n                                                                        </span>\n                                                                        <span className={`dropdown-item ${permissions.access[userGroup.code][feature.CODE] === 'noaccess' ? 'active': ''}`} \n                                                                            role=\"button\" data-toggle=\"tooltip\" title=\"No Access\"\n                                                                            onClick={() => handleChangePermission(userGroup.code, feature.CODE, 'noaccess')}>\n                                                                            No Access\n                                                                        </span>\n                                                                    </div>\n                                                                </div>}\n                                                            </td>\n                                                        ))}\n                                                    </tr>))}\n                                                </tbody>\n                                            </table>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>}\n                    </div>\n                </div>\n            </div>\n        </Fragment>\n    );\n}"]},"metadata":{},"sourceType":"module"}