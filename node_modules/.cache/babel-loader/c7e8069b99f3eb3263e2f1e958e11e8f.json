{"ast":null,"code":"var _jsxFileName = \"/Users/vonojastro/Desktop/lms-frontend-v2/src/components/Admin/contents/ManageEmail/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState } from \"react\";\nimport Table from \"components/Admin/contents/Table\";\nimport { DefaultEditor } from 'react-simple-wysiwyg';\nimport { getEmailTemplates, updateEmailTemplate, addEmailTemplate } from \"api/email-template\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { CSVLink } from 'react-csv';\nimport \"./index.css\";\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ManageEmails() {\n  _s();\n\n  const [selectedTemplate, setSelectedTemplate] = useState({});\n  const [status, setStatus] = useState(\"\");\n  const [subject, setSubject] = useState(\"\");\n  const [description, setDescription] = useState(\"\"); // const [filterValue, setFilterValue] = useState(\"\");\n\n  const [modalAction, setModalAction] = useState(\"add\");\n  const [submitLoading, setSubmitLoading] = useState(false);\n  const [errorUpdate, setErrorUpdate] = useState(false);\n  const [errorTable, setErrorTable] = useState(false);\n  let loading = useSelector(state => state.uiElements.getIn(['loadingScreen']));\n  const dispatch = useDispatch();\n  const emailTemplates = useSelector(state => state.emailTemplate ? state.emailTemplate.getIn(['data', 'templates']) : []);\n\n  const loadData = () => {\n    setErrorTable(false);\n    getEmailTemplates(dispatch, status => {\n      if (!status) {\n        setErrorTable(true);\n      }\n    });\n  };\n\n  React.useEffect(() => {\n    loadData(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const [toggleSortFilter, setToggleSortFilter] = useState({});\n  const columns = [{\n    Header: \"Email Template List\",\n    columns: [{\n      Header: 'No.',\n      accessor: 'id',\n      Cell: _ref => {\n        let {\n          row\n        } = _ref;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: row.index + 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 21\n        }, this);\n      }\n    }, {\n      Header: 'Subject',\n      accessor: 'subject',\n      accessorFilter: 'subject',\n      filterType: 'sortOnly',\n      columnFilter: true\n    }, {\n      Header: 'Email Content',\n      accessor: 'description'\n    }, {\n      Header: 'Updated Date',\n      accessor: 'updatedDate',\n      accessorFilter: 'UpdatedDate',\n      filterType: 'sortOnly',\n      columnFilter: true\n    }, {\n      Header: 'Updated By',\n      accessor: 'updatedByName',\n      accessorFilter: 'updatedByName',\n      filterType: 'sortOnly',\n      columnFilter: true\n    }, {\n      Header: 'Status',\n      accessor: 'status',\n      accessorFilter: 'status',\n      filterType: 'multipleSelectManageEmail',\n      columnFilter: true,\n      filter: multiSelectFilter,\n      Cell: row => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"badge \" + getBadge(row.value),\n        children: getStatus(row.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }, this)\n    }, {\n      Header: 'Action',\n      accessor: 'action',\n      Cell: _ref2 => {\n        let {\n          row\n        } = _ref2;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            \"data-target\": \"#exampleModal\",\n            className: \"btn btn-link\",\n            \"data-toggle\": \"modal\",\n            \"data-original-title\": \"Edit\",\n            onClick: () => onClickAction('edit', row.index),\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"ti-marker-alt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this);\n      }\n    }]\n  }];\n\n  const convertToCSVArray = data => {\n    let headers = columns[0].columns.map(c => c.Header);\n    let csvArray = [headers];\n    let keys = columns[0].columns.map(c => c.accessor);\n    keys.shift();\n    data.forEach((item, i) => {\n      csvArray.push([i + 1, ...keys.map(k => item[k])]);\n    });\n    return csvArray;\n  };\n\n  function multiSelectFilter(rows, columnIds, filterValue) {\n    return filterValue.length === 0 ? rows : rows.filter(row => filterValue.includes(String(row.original[columnIds])));\n  }\n\n  const getBadge = key => {\n    switch (key) {\n      case 'A':\n        return \"badge-info\";\n\n      case 'I':\n        return \"badge-warning\";\n\n      default:\n        return \"badge-info\";\n    }\n  };\n\n  const getStatus = key => {\n    switch (key) {\n      case 'A':\n        return \"active\";\n\n      case 'I':\n        return \"inactive\";\n\n      default:\n        return \"active\";\n    }\n  };\n\n  function onChange(e) {\n    setDescription(e.target.value);\n  }\n\n  const submitAction = async () => {\n    setSubmitLoading(true);\n\n    if (modalAction === 'edit') {\n      await updateEmailTemplate(dispatch, {\n        id: selectedTemplate.id,\n        subject: subject,\n        content: description,\n        status: status\n      }, status => {\n        if (status) {\n          onClose(true);\n          toast.success(\"Email Template has been successfully updated!\");\n        } else {\n          setErrorUpdate(true);\n          setSubmitLoading(false);\n        }\n      });\n    } else {\n      await addEmailTemplate(dispatch, {\n        subject: subject,\n        description: description\n      });\n    }\n  };\n\n  const onClickAction = (action, index) => {\n    setModalAction(action);\n    setSelectedTemplate(emailTemplates[index]);\n    setStatus(emailTemplates[index].status);\n    setSubject(emailTemplates[index].subject);\n    setDescription(emailTemplates[index].description);\n  };\n\n  const onClose = refresh => {\n    // document.getElementById(\"modal-close\").click();\n    document.querySelector(\"#modalClose\").click();\n    setSelectedTemplate({});\n    setSubmitLoading(false);\n    setErrorUpdate(false);\n    setStatus(\"\");\n    setSubject(\"\");\n    setDescription(\"\"); //.setIn([\"data\", \"templates\"], action.data)\n\n    if (!!refresh) {\n      getEmailTemplates(dispatch);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"left-aside bg-light-part col\",\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"list-style-none\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"box-label\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"admin-table-total\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"Total Email\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 214,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: emailTemplates.length\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 217,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 213,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 209,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"divider\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: /*#__PURE__*/_jsxDEV(CSVLink, {\n                      data: convertToCSVArray(emailTemplates),\n                      className: \"btn btn-success\",\n                      filename: \"Email-Template-List.csv\",\n                      style: {\n                        color: \"white\"\n                      },\n                      children: \"Export to CSV\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 222,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 221,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"divider\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"right-aside col-9\",\n                children: /*#__PURE__*/_jsxDEV(Table, {\n                  loading: loading,\n                  error: errorTable,\n                  columns: columns,\n                  data: emailTemplates,\n                  title: \"Email Template List\" // filterColumn={'status'}\n                  // filterValue={filterValue}\n                  ,\n                  onReload: loadData,\n                  toggleSortFilter: toggleSortFilter,\n                  setToggleSortFilter: setToggleSortFilter\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal fade\",\n        id: \"exampleModal\",\n        tabIndex: -1,\n        \"aria-labelledby\": \"exampleModalLabel\",\n        \"aria-hidden\": \"true\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-dialog modal-lg\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"modal-title\",\n                id: \"exampleModalLabel\",\n                children: modalAction === 'edit' ? 'Manage Email Template' : 'Add Email Template'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                id: \"modalClose\",\n                type: \"button\",\n                className: \"close\",\n                \"data-dismiss\": \"modal\",\n                \"aria-label\": \"Close\",\n                onClick: () => onClose(),\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  \"aria-hidden\": \"true\",\n                  children: \"\\xD7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 280,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 29\n            }, this), !!errorUpdate && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"alert alert-warning text-center text m-t-20\",\n              role: \"alert\",\n              style: {\n                fontSize: 10\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                class: \"fas fa-times float-right\",\n                style: {\n                  cursor: 'pointer'\n                },\n                onClick: () => setErrorUpdate(false)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-weight-bold\",\n                style: {\n                  fontSize: 12\n                },\n                children: \"Something went wrong.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 33\n              }, this), \"Please try again later.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 47\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-body\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-12\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"card mb-3\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"card-body\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                        className: \"modal-label\",\n                        id: \"exampleModalLabel\",\n                        children: \"Subject\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 297,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"form-group\",\n                        children: /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          value: subject,\n                          onChange: e => setSubject(e.target.value),\n                          className: \"form-control\",\n                          placeholder: \"Subject\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 299,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 298,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          display: modalAction === 'edit' ? 'block' : 'none'\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                          className: \"modal-label\",\n                          id: \"exampleModalLabel\",\n                          children: \"Status\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 303,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"form-group\",\n                          children: /*#__PURE__*/_jsxDEV(\"select\", {\n                            className: \"form-control\",\n                            value: status,\n                            onChange: e => setStatus(e.target.value),\n                            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                              value: \"A\",\n                              children: \"Active\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 306,\n                              columnNumber: 61\n                            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                              value: \"I\",\n                              children: \"Inactive\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 307,\n                              columnNumber: 61\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 305,\n                            columnNumber: 57\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 304,\n                          columnNumber: 53\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 302,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                        className: \"modal-label\",\n                        id: \"exampleModalLabel\",\n                        children: \"Email Content\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 312,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(DefaultEditor, {\n                        value: description,\n                        onChange: onChange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 313,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 296,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 295,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 294,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-footer\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                id: \"modal-close\",\n                type: \"button\",\n                className: \"btn btn-secondary\",\n                onClick: () => onClose(),\n                \"data-dismiss\": \"modal\",\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-primary\",\n                style: {\n                  cursor: submitLoading && 'not-allowed'\n                },\n                onClick: () => submitAction(),\n                disabled: submitLoading,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    display: submitLoading ? 'inline-block' : 'none'\n                  },\n                  class: \"spinner-border spinner-border-sm btn-load\",\n                  role: \"status\",\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 37\n                }, this), \"Submit\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"footer\",\n      children: \"\\xA9 2021 Tagpros Education\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 199,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ManageEmails, \"zzp8Qr+PriwhWjf0XMnd5VQpXmU=\", false, function () {\n  return [useSelector, useDispatch, useSelector];\n});\n\n_c = ManageEmails;\n;\n\nvar _c;\n\n$RefreshReg$(_c, \"ManageEmails\");","map":{"version":3,"sources":["/Users/vonojastro/Desktop/lms-frontend-v2/src/components/Admin/contents/ManageEmail/index.jsx"],"names":["React","Fragment","useState","Table","DefaultEditor","getEmailTemplates","updateEmailTemplate","addEmailTemplate","useDispatch","useSelector","CSVLink","toast","ManageEmails","selectedTemplate","setSelectedTemplate","status","setStatus","subject","setSubject","description","setDescription","modalAction","setModalAction","submitLoading","setSubmitLoading","errorUpdate","setErrorUpdate","errorTable","setErrorTable","loading","state","uiElements","getIn","dispatch","emailTemplates","emailTemplate","loadData","useEffect","toggleSortFilter","setToggleSortFilter","columns","Header","accessor","Cell","row","index","accessorFilter","filterType","columnFilter","filter","multiSelectFilter","getBadge","value","getStatus","display","onClickAction","convertToCSVArray","data","headers","map","c","csvArray","keys","shift","forEach","item","i","push","k","rows","columnIds","filterValue","length","includes","String","original","key","onChange","e","target","submitAction","id","content","onClose","success","action","refresh","document","querySelector","click","color","fontSize","cursor"],"mappings":"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","sourcesContent":["import React, { Fragment, useState } from \"react\";\nimport Table from \"components/Admin/contents/Table\";\nimport { DefaultEditor } from 'react-simple-wysiwyg';\nimport { getEmailTemplates, updateEmailTemplate, addEmailTemplate } from \"api/email-template\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { CSVLink } from 'react-csv';\nimport \"./index.css\";\nimport { toast } from 'react-toastify';\n\n\nexport default function ManageEmails() {\n    const [selectedTemplate, setSelectedTemplate] = useState({});\n    const [status, setStatus] = useState(\"\");\n    const [subject, setSubject] = useState(\"\");\n    const [description, setDescription] = useState(\"\");\n    // const [filterValue, setFilterValue] = useState(\"\");\n    const [modalAction, setModalAction] = useState(\"add\");\n    const [submitLoading, setSubmitLoading] = useState(false);\n    const [errorUpdate, setErrorUpdate] = useState(false);\n    const [errorTable, setErrorTable] = useState(false);\n    let loading = useSelector((state) => state.uiElements.getIn(['loadingScreen']));\n\n    const dispatch = useDispatch();\n\n    const emailTemplates = useSelector((state) => state.emailTemplate ? state.emailTemplate.getIn(['data', 'templates']) : []);\n\n    const loadData = () => {\n        setErrorTable(false);\n        getEmailTemplates(dispatch, (status) => {\n            if (!status) {\n                setErrorTable(true);\n            }\n        });\n    }\n\n    React.useEffect(() => {\n        loadData();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    const [toggleSortFilter, setToggleSortFilter] = useState({});\n    const columns = [{\n        Header: \"Email Template List\",\n        columns: [\n            {\n                Header: 'No.', accessor: 'id',\n                Cell: ({ row }) => (\n                    <div>{row.index + 1}</div>\n                ),\n            },\n            {\n                Header: 'Subject',\n                accessor: 'subject',\n                accessorFilter: 'subject',\n                filterType: 'sortOnly',\n                columnFilter: true\n            },\n            {\n                Header: 'Email Content',\n                accessor: 'description',\n            },\n            {\n                Header: 'Updated Date',\n                accessor: 'updatedDate',\n                accessorFilter: 'UpdatedDate',\n                filterType: 'sortOnly',\n                columnFilter: true\n            },\n            {\n                Header: 'Updated By',\n                accessor: 'updatedByName',\n                accessorFilter: 'updatedByName',\n                filterType: 'sortOnly',\n                columnFilter: true\n            },\n            {\n                Header: 'Status', accessor: 'status',\n                accessorFilter: 'status',\n                filterType: 'multipleSelectManageEmail',\n                columnFilter: true,\n                filter: multiSelectFilter,\n                Cell: row => (\n                    <div className={\"badge \" + getBadge(row.value)}>{getStatus(row.value)}</div>\n                ),\n            },\n            {\n                Header: 'Action',\n                accessor: 'action',\n\n                Cell: ({ row }) => (\n                    <div style={{ display: 'flex' }}>\n                        <button\n                            data-target=\"#exampleModal\"\n                            className=\"btn btn-link\"\n                            data-toggle=\"modal\"\n                            data-original-title=\"Edit\"\n                            onClick={() => onClickAction('edit', row.index)}\n                        >\n                            <i className=\"ti-marker-alt\"></i>\n                        </button>\n                    </div>\n                ),\n            },\n        ],\n    }];\n\n\nconst convertToCSVArray = (data) => {\n    let headers = columns[0].columns.map((c)=>(c.Header))\n    let csvArray = [\n        headers\n    ];\n\n    let keys = columns[0].columns.map((c)=>(c.accessor))\n    keys.shift()\n\n    data.forEach((item, i) => {\n        csvArray.push([i+1, ...keys.map((k)=> (item[k])) ])\n    });\n    return csvArray;\n}\n\n    function multiSelectFilter(rows, columnIds, filterValue) {\n        return filterValue.length === 0\n            ? rows\n            : rows.filter((row) =>\n                filterValue.includes(String(row.original[columnIds])),\n            );\n    }\n    const getBadge = (key) => {\n        switch (key) {\n            case 'A':\n                return \"badge-info\"\n            case 'I':\n                return \"badge-warning\"\n            default:\n                return \"badge-info\"\n        }\n    }\n\n    const getStatus = (key) => {\n        switch (key) {\n            case 'A':\n                return \"active\"\n            case 'I':\n                return \"inactive\"\n            default:\n                return \"active\"\n        }\n    }\n\n    function onChange(e) {\n        setDescription(e.target.value);\n      }\n\n    const submitAction = async () => {\n        setSubmitLoading(true);\n\n        if (modalAction === 'edit') {\n            await updateEmailTemplate(dispatch, { id: selectedTemplate.id, subject: subject, content: description, status: status }, (status) => {\n                if (status) {\n                    onClose(true);\n                    toast.success(\"Email Template has been successfully updated!\");\n                } else {\n                    setErrorUpdate(true);\n                    setSubmitLoading(false);\n                }\n            });\n        } else {\n            await addEmailTemplate(dispatch, { subject: subject, description: description });\n        }\n    }\n\n    const onClickAction = (action, index) => {\n        setModalAction(action);\n        setSelectedTemplate(emailTemplates[index]);\n        setStatus(emailTemplates[index].status);\n        setSubject(emailTemplates[index].subject);\n        setDescription(emailTemplates[index].description);\n    }\n\n    const onClose = (refresh) => {\n        // document.getElementById(\"modal-close\").click();\n        document.querySelector(\"#modalClose\").click();\n\n        setSelectedTemplate({});\n        setSubmitLoading(false);\n        setErrorUpdate(false);\n        setStatus(\"\");\n        setSubject(\"\");\n        setDescription(\"\");\n\n        //.setIn([\"data\", \"templates\"], action.data)\n        if (!!refresh) {\n            getEmailTemplates(dispatch);\n        }\n    }\n\n    return (\n        <Fragment>\n            <div className=\"container-fluid\">\n                <div className=\"row\">\n                    <div className=\"col-12\">\n                        <div className=\"card\">\n                            {/* <!-- .left-right-aside-column--> */}\n                            <div className=\"row\">\n                                {/* <!-- .left-aside-column--> */}\n                                <div className=\"left-aside bg-light-part col\">\n                                    <ul className=\"list-style-none\">\n                                        <li className=\"box-label\">\n                                            {/* <a href=\"#!\">\n                                                Total Email Templates <span>{emailTemplates.length}</span>\n                                            </a> */}\n                                            <div className=\"admin-table-total\">\n                                                <h5>\n                                                    Total Email \n                                                </h5>\n                                                <span>{emailTemplates.length}</span>\n                                            </div>\n                                        </li>\n                                        <li className=\"divider\"></li>\n                                        <li>\n                                            <CSVLink data={convertToCSVArray(emailTemplates)} className=\"btn btn-success\" filename=\"Email-Template-List.csv\" style={{ color: \"white\" }}>\n                                                Export to CSV\n                                            </CSVLink>\n                                            {/* <button onClick={() => this.onClick()}>test</button> */}\n                                        </li>\n                                        <li className=\"divider\"></li>\n                                        {/* <li ><b>Filter</b></li>\n\n                                        <li>\n                                            <div className=\"form-inline align-self-end\">\n                                                <label className=\"pr-2\">Status</label>\n                                                <select value={filterValue} onChange={(e) => setFilterValue(e.target.value)} className=\"form-control w-auto\">\n                                                    <option value=\"\">All</option>\n                                                    <option value=\"A\">Active</option>\n                                                    <option value=\"I\">Inactive</option>\n                                                </select>\n                                            </div>\n                                        </li>\n                                        <li className=\"divider\"></li> */}\n                                    </ul>\n                                </div>\n                                {/* <!-- /.left-aside-column--> */}\n                                <div className=\"right-aside col-9\">\n                                    {/* <div className=\"button-fab\">\n                                        <button type=\"button\" className=\"btn btn-info\" \n                                        data-target=\"#exampleModal\" data-toggle=\"modal\" onClick={() => setModalAction('add')}>\n                                            <i className=\"fas fa-plus\"></i>\n                                        </button>\n                                    </div> */}\n                                    <Table\n                                        loading={loading}\n                                        error={errorTable}\n                                        columns={columns}\n                                        data={emailTemplates} \n                                        title={\"Email Template List\"}\n                                        // filterColumn={'status'}\n                                        // filterValue={filterValue}\n                                        onReload={loadData} \n                                        toggleSortFilter={toggleSortFilter}\n                                        setToggleSortFilter={setToggleSortFilter}\n                                        />\n                                </div>\n                                {/* <!-- /.left-right-aside-column--> */}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {/* <!-- ============================================================== -->\n                <!-- End PAge Content -->\n                <!-- ============================================================== -->\n                <!-- ============================================================== -->*/}\n                {/* Modal */}\n                <div className=\"modal fade\" id=\"exampleModal\" tabIndex={-1} aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n                    <div className=\"modal-dialog modal-lg\">\n                        <div className=\"modal-content\">\n                            <div className=\"modal-header\">\n                                <h5 className=\"modal-title\" id=\"exampleModalLabel\">{modalAction === 'edit' ? 'Manage Email Template' : 'Add Email Template'}</h5>\n                                <button id=\"modalClose\" type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={() => onClose()}>\n                                    <span aria-hidden=\"true\">×</span>\n                                </button>\n                            </div>\n                            {!!errorUpdate && <div className=\"alert alert-warning text-center text m-t-20\" role=\"alert\"\n                                style={{ fontSize: 10 }}>\n                                <i class=\"fas fa-times float-right\" style={{ cursor: 'pointer' }} onClick={() => setErrorUpdate(false)}></i>\n                                <span className=\"font-weight-bold\" style={{ fontSize: 12 }}>\n                                    Something went wrong.\n                                </span>\n                                <br />\n                                Please try again later.\n                            </div>}\n                            <div className=\"modal-body\">\n                                <div className=\"row\">\n                                    <div className=\"col-12\">\n                                        <div className=\"card mb-3\">\n                                            <div className=\"card-body\">\n                                                <h5 className=\"modal-label\" id=\"exampleModalLabel\">Subject</h5>\n                                                <div className=\"form-group\">\n                                                    <input type=\"text\" value={subject} onChange={e => setSubject(e.target.value)} className=\"form-control\" placeholder=\"Subject\" />\n                                                </div>\n\n                                                <div style={{ display: modalAction === 'edit' ? 'block' : 'none' }}>\n                                                    <h5 className=\"modal-label\" id=\"exampleModalLabel\">Status</h5>\n                                                    <div className=\"form-group\">\n                                                        <select className=\"form-control\" value={status} onChange={e => setStatus(e.target.value)}>\n                                                            <option value=\"A\">Active</option>\n                                                            <option value=\"I\">Inactive</option>\n                                                        </select>\n                                                    </div>\n                                                </div>\n\n                                                <h5 className=\"modal-label\" id=\"exampleModalLabel\">Email Content</h5>\n                                                <DefaultEditor value={description} onChange={onChange} />\n\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"modal-footer\">\n                                <button id=\"modal-close\" type=\"button\" className=\"btn btn-secondary\" onClick={() => onClose()} data-dismiss=\"modal\">Cancel</button>\n                                <button type=\"button\" className=\"btn btn-primary\" style={{ cursor: submitLoading && 'not-allowed' }} onClick={() => submitAction()} disabled={submitLoading}>\n                                    <span style={{ display: submitLoading ? 'inline-block' : 'none' }} class=\"spinner-border spinner-border-sm btn-load\" role=\"status\" aria-hidden=\"true\"></span>\n                                    Submit\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n            <footer className=\"footer\">© 2021 Tagpros Education</footer>\n        </Fragment>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}