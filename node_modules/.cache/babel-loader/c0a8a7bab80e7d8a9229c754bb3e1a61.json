{"ast":null,"code":"var _jsxFileName = \"/Users/vonojastro/Desktop/lms-frontend-v2/src/components/LearnerInfoModal/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useRef } from 'react';\nimport schema from '../../validators/learnerInfo';\nimport { Form } from 'react-final-form';\nimport Popup from 'reactjs-popup';\nimport FIELDS from './fields';\nimport { toast } from 'react-toastify';\nimport { SelectControl, InputControl, ImageInputControl } from 'components/common/Form/Inputs';\nimport useValidationSchema from 'hooks/use-validation-schema';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addLearner as fetchAddLearner, updateLearner as fetchUpdateLearner, deleteLearner as fetchDeleteLearner } from '../../redux/actions/learnerInfo';\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function LearnerInfoModal(_ref) {\n  _s();\n\n  let {\n    trigger,\n    mode,\n    info = null,\n    customCloseModalHandler,\n    customIsOpen,\n    shouldForceToAddLearner\n  } = _ref;\n  const dispatch = useDispatch();\n  const modalTitles = {\n    add: 'Add Learner',\n    update: 'Update Learner',\n    view: 'View Learner'\n  };\n  const contentStyle = {\n    padding: 0,\n    background: '#fff0',\n    border: 0\n  };\n  const closeButtonRef = useRef(null);\n  const primaryColor = '#00897B';\n\n  const closeModal = () => {\n    var _closeButtonRef$curre;\n\n    closeButtonRef === null || closeButtonRef === void 0 ? void 0 : (_closeButtonRef$curre = closeButtonRef.current) === null || _closeButtonRef$curre === void 0 ? void 0 : _closeButtonRef$curre.click();\n  };\n\n  const handleUpdateSuccess = () => {\n    toast.success('Learner successfully updated', {\n      position: 'top-right',\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined\n    });\n  };\n\n  const handleAddSuccess = () => {\n    toast.success('Learner successfully added', {\n      position: 'top-right',\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined\n    });\n  };\n\n  const handleDeleteSuccess = () => {\n    toast.success('Learner successfully deleted', {\n      position: 'top-right',\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined\n    });\n  };\n\n  const handleDeleteFailure = () => {\n    toast.error('Cannot delete learner. Learner is enrolled to a class', {\n      position: 'top-right',\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined\n    });\n  };\n\n  const addLearner = async values => {\n    dispatch(fetchAddLearner({\n      values,\n      closeModal,\n      handleSuccess: handleAddSuccess\n    }));\n  };\n\n  const updateLearner = values => {\n    dispatch(fetchUpdateLearner({\n      values,\n      closeModal,\n      handleSuccess: handleUpdateSuccess\n    }));\n  };\n\n  const deleteLearner = async id => {\n    dispatch(fetchDeleteLearner({\n      id,\n      closeModal,\n      handleSuccess: handleDeleteSuccess,\n      handleFailure: handleDeleteFailure\n    }));\n  };\n\n  const validate = useValidationSchema(schema);\n  let initialValues = info;\n  const loading = useSelector(state => {\n    var _state$learnerInfo$mo;\n\n    return (_state$learnerInfo$mo = state.learnerInfo[mode]) === null || _state$learnerInfo$mo === void 0 ? void 0 : _state$learnerInfo$mo.loading;\n  });\n  const error = useSelector(state => {\n    var _state$learnerInfo$mo2;\n\n    return (_state$learnerInfo$mo2 = state.learnerInfo[mode]) === null || _state$learnerInfo$mo2 === void 0 ? void 0 : _state$learnerInfo$mo2.error;\n  });\n  const errorMessage = error ? {\n    add: {\n      400: {\n        title: 'Failed to Add Learner',\n        body: \"We couldn't add the learner. \\n Please make sure that your inputs are valid.\"\n      },\n      500: {\n        title: 'Network Error',\n        body: \"We couldn't connect you to the server. Please reload the page, or try again later.\"\n      }\n    },\n    update: {\n      400: {\n        title: 'Failed to Update Learner',\n        body: \"We couldn't update the learner's inforrmation. \\n Please make sure that your inputs are valid.\"\n      },\n      500: {\n        title: 'Network Error',\n        body: \"We couldn't connect you to the server. Please reload the page, or try again later.\"\n      }\n    }\n  }[mode][error.status] : null;\n  if (mode === 'view') return /*#__PURE__*/_jsxDEV(Popup, {\n    open: customIsOpen,\n    closeOnDocumentClick: true,\n    onClose: customCloseModalHandler,\n    contentStyle,\n    lockScroll: true,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-dialog modal-xl \",\n      role: \"document\",\n      style: {\n        margin: 0\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"modal-title\",\n            children: modalTitles[mode]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: customCloseModalHandler,\n            type: \"button\",\n            className: \"close\",\n            \"data-dismiss\": \"modal\",\n            \"aria-label\": \"Close\",\n            ref: closeButtonRef,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              \"aria-hidden\": \"true\",\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 17\n            }, this), ' ']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          style: {\n            maxHeight: 'calc(101vh - 160px)',\n            overflowY: 'auto'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"d-flex flex-row\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"p-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"box-title\",\n                    children: \"Learner Info\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n                className: \"m-t-0 m-b-40\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Form, {\n                validate: validate,\n                onSubmit: mode === 'add' ? addLearner : updateLearner,\n                initialValues: initialValues,\n                subscription: {\n                  values: true,\n                  initialValues: true,\n                  modifiedSinceLastSubmit: true\n                },\n                render: _ref2 => {\n                  let {\n                    handleSubmit,\n                    modifiedSinceLastSubmit\n                  } = _ref2;\n                  return /*#__PURE__*/_jsxDEV(\"form\", {\n                    id: \"myForm\",\n                    onSubmit: handleSubmit,\n                    className: \"form-material form-horizontal form-teacher\",\n                    style: {\n                      pointerEvents: 'none'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(ImageInputControl, { ...FIELDS.find(_ref3 => {\n                        let {\n                          name\n                        } = _ref3;\n                        return name === 'photo';\n                      }),\n                      mode: mode\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 205,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: 'grid',\n                        gridTemplateColumns: 'repeat(auto-fill,minmax(min(500px, 100%),1fr))',\n                        gridGap: 10,\n                        gridRowGap: 40\n                      },\n                      children: FIELDS.filter(_ref4 => {\n                        let {\n                          name\n                        } = _ref4;\n                        return !['photo'].includes(name);\n                      }).map(props => props.type === 'select' && /*#__PURE__*/_jsxDEV(SelectControl, { ...props,\n                        disabled: loading\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 221,\n                        columnNumber: 33\n                      }, this) || /*#__PURE__*/_jsxDEV(InputControl, { ...props,\n                        disabled: loading\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 222,\n                        columnNumber: 37\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 209,\n                      columnNumber: 25\n                    }, this), error && !modifiedSinceLastSubmit && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"alert alert-warning mt-5\",\n                      role: \"alert\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                        className: \"alert-heading font-weight-bold\",\n                        children: errorMessage['title']\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 227,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: errorMessage['body']\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 230,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 226,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 23\n                  }, this);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-footer\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-secondary\",\n            \"data-dismiss\": \"modal\",\n            onClick: e => {\n              e.preventDefault();\n              customCloseModalHandler();\n            },\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 7\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Popup, {\n    trigger: trigger,\n    modal: true,\n    contentStyle,\n    closeOnDocumentClick: !shouldForceToAddLearner,\n    closeOnEscape: !shouldForceToAddLearner,\n    onClose: shouldForceToAddLearner ? null : closeModal,\n    children: close => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-dialog modal-xl \",\n      role: \"document\",\n      style: {\n        margin: 0\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"modal-title\",\n            children: modalTitles[mode]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: shouldForceToAddLearner ? null : close,\n            type: \"button\",\n            className: \"close\",\n            \"data-dismiss\": \"modal\",\n            \"aria-label\": \"Close\",\n            ref: closeButtonRef,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              \"aria-hidden\": \"true\",\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 17\n            }, this), ' ']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          style: {\n            maxHeight: 'calc(101vh - 160px)',\n            overflowY: 'auto'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-body\",\n              children: [shouldForceToAddLearner && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"alert alert-warning text-center text m-t-20\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Hooray! Last step is to add your first learner to enroll to a class.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"d-flex flex-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"p-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"box-title\",\n                    children: \"My Learner Info\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 291,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"p-2 ml-auto\",\n                  children: mode !== 'add' && /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-danger\",\n                    onClick: () => deleteLearner(initialValues.id),\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      class: \"fa fa-trash\",\n                      \"aria-hidden\": \"true\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 299,\n                      columnNumber: 27\n                    }, this), \" Delete Learner\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 295,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n                className: \"m-t-0 m-b-40\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Form, {\n                validate: validate,\n                onSubmit: mode === 'add' ? addLearner : updateLearner,\n                initialValues: initialValues,\n                subscription: {\n                  values: true,\n                  initialValues: true,\n                  modifiedSinceLastSubmit: true\n                },\n                render: _ref5 => {\n                  let {\n                    handleSubmit,\n                    modifiedSinceLastSubmit\n                  } = _ref5;\n                  return /*#__PURE__*/_jsxDEV(\"form\", {\n                    id: \"myForm\",\n                    onSubmit: handleSubmit,\n                    className: \"form-material form-horizontal form-family\",\n                    children: [/*#__PURE__*/_jsxDEV(ImageInputControl, { ...FIELDS.find(_ref6 => {\n                        let {\n                          name\n                        } = _ref6;\n                        return name === 'photo';\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 322,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: 'grid',\n                        gridTemplateColumns: 'repeat(auto-fill,minmax(min(500px, 100%),1fr))',\n                        gridGap: 10,\n                        gridRowGap: 40\n                      },\n                      children: FIELDS.filter(_ref7 => {\n                        let {\n                          name\n                        } = _ref7;\n                        return !['photo'].includes(name);\n                      }).map(props => props.type === 'select' && /*#__PURE__*/_jsxDEV(SelectControl, { ...props,\n                        disabled: loading\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 337,\n                        columnNumber: 33\n                      }, this) || /*#__PURE__*/_jsxDEV(InputControl, { ...props,\n                        disabled: loading\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 338,\n                        columnNumber: 37\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 325,\n                      columnNumber: 25\n                    }, this), error && !modifiedSinceLastSubmit && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"alert alert-warning mt-5\",\n                      role: \"alert\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                        className: \"alert-heading font-weight-bold\",\n                        children: errorMessage['title']\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 343,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: errorMessage['body']\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 346,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 342,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 317,\n                    columnNumber: 23\n                  }, this);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-secondary\",\n            \"data-dismiss\": \"modal\",\n            onClick: e => {\n              if (shouldForceToAddLearner) return;\n              e.preventDefault();\n              close();\n            },\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              background: primaryColor,\n              border: primaryColor\n            },\n            type: \"button\",\n            className: \"btn btn-primary\",\n            \"data-dismiss\": \"modal\",\n            onClick: () => document.getElementById('myForm').dispatchEvent(new Event('submit', {\n              cancelable: true,\n              bubbles: true\n            })),\n            disabled: loading,\n            children: [loading && mode === 'add' ? /*#__PURE__*/_jsxDEV(Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"spinner-border text-light mr-2\",\n                role: \"status\",\n                style: {\n                  height: 20,\n                  width: 20\n                },\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"sr-only\",\n                  children: \"Loading...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 389,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 21\n              }, this), \"Submitting\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 19\n            }, this) : loading && mode === 'update' ? /*#__PURE__*/_jsxDEV(Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"spinner-border text-light mr-2\",\n                role: \"status\",\n                style: {\n                  height: 20,\n                  width: 20\n                },\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"sr-only\",\n                  children: \"Loading...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 21\n              }, this), \"Saving\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 19\n            }, this) : '', !loading && mode === 'add' ? 'Submit' : !loading && mode === 'update' ? 'Save' : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 258,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LearnerInfoModal, \"8kmU8OaTh8Mvp3HQlmtmPWT/Frw=\", false, function () {\n  return [useDispatch, useValidationSchema, useSelector, useSelector];\n});\n\n_c = LearnerInfoModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"LearnerInfoModal\");","map":{"version":3,"sources":["/Users/vonojastro/Desktop/lms-frontend-v2/src/components/LearnerInfoModal/index.jsx"],"names":["React","Fragment","useRef","schema","Form","Popup","FIELDS","toast","SelectControl","InputControl","ImageInputControl","useValidationSchema","useDispatch","useSelector","addLearner","fetchAddLearner","updateLearner","fetchUpdateLearner","deleteLearner","fetchDeleteLearner","LearnerInfoModal","trigger","mode","info","customCloseModalHandler","customIsOpen","shouldForceToAddLearner","dispatch","modalTitles","add","update","view","contentStyle","padding","background","border","closeButtonRef","primaryColor","closeModal","current","click","handleUpdateSuccess","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","handleAddSuccess","handleDeleteSuccess","handleDeleteFailure","error","values","handleSuccess","id","handleFailure","validate","initialValues","loading","state","learnerInfo","errorMessage","title","body","status","margin","maxHeight","overflowY","modifiedSinceLastSubmit","handleSubmit","pointerEvents","find","name","display","gridTemplateColumns","gridGap","gridRowGap","filter","includes","map","props","type","e","preventDefault","close","document","getElementById","dispatchEvent","Event","cancelable","bubbles","height","width"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,QAAwC,OAAxC;AACA,OAAOC,MAAP,MAAmB,8BAAnB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SACEC,aADF,EAEEC,YAFF,EAGEC,iBAHF,QAIO,+BAJP;AAKA,OAAOC,mBAAP,MAAgC,6BAAhC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SACEC,UAAU,IAAIC,eADhB,EAEEC,aAAa,IAAIC,kBAFnB,EAGEC,aAAa,IAAIC,kBAHnB,QAIO,iCAJP;AAKA,OAAO,aAAP;;AAEA,eAAe,SAASC,gBAAT,OAOZ;AAAA;;AAAA,MAPsC;AACvCC,IAAAA,OADuC;AAEvCC,IAAAA,IAFuC;AAGvCC,IAAAA,IAAI,GAAG,IAHgC;AAIvCC,IAAAA,uBAJuC;AAKvCC,IAAAA,YALuC;AAMvCC,IAAAA;AANuC,GAOtC;AACD,QAAMC,QAAQ,GAAGf,WAAW,EAA5B;AACA,QAAMgB,WAAW,GAAG;AAClBC,IAAAA,GAAG,EAAE,aADa;AAElBC,IAAAA,MAAM,EAAE,gBAFU;AAGlBC,IAAAA,IAAI,EAAE;AAHY,GAApB;AAKA,QAAMC,YAAY,GAAG;AACnBC,IAAAA,OAAO,EAAE,CADU;AAEnBC,IAAAA,UAAU,EAAE,OAFO;AAGnBC,IAAAA,MAAM,EAAE;AAHW,GAArB;AAKA,QAAMC,cAAc,GAAGlC,MAAM,CAAC,IAAD,CAA7B;AACA,QAAMmC,YAAY,GAAG,SAArB;;AACA,QAAMC,UAAU,GAAG,MAAM;AAAA;;AACvBF,IAAAA,cAAc,SAAd,IAAAA,cAAc,WAAd,qCAAAA,cAAc,CAAEG,OAAhB,gFAAyBC,KAAzB;AACD,GAFD;;AAIA,QAAMC,mBAAmB,GAAG,MAAM;AAChClC,IAAAA,KAAK,CAACmC,OAAN,CAAc,8BAAd,EAA8C;AAC5CC,MAAAA,QAAQ,EAAE,WADkC;AAE5CC,MAAAA,SAAS,EAAE,IAFiC;AAG5CC,MAAAA,eAAe,EAAE,KAH2B;AAI5CC,MAAAA,YAAY,EAAE,IAJ8B;AAK5CC,MAAAA,YAAY,EAAE,IAL8B;AAM5CC,MAAAA,SAAS,EAAE,IANiC;AAO5CC,MAAAA,QAAQ,EAAEC;AAPkC,KAA9C;AASD,GAVD;;AAYA,QAAMC,gBAAgB,GAAG,MAAM;AAC7B5C,IAAAA,KAAK,CAACmC,OAAN,CAAc,4BAAd,EAA4C;AAC1CC,MAAAA,QAAQ,EAAE,WADgC;AAE1CC,MAAAA,SAAS,EAAE,IAF+B;AAG1CC,MAAAA,eAAe,EAAE,KAHyB;AAI1CC,MAAAA,YAAY,EAAE,IAJ4B;AAK1CC,MAAAA,YAAY,EAAE,IAL4B;AAM1CC,MAAAA,SAAS,EAAE,IAN+B;AAO1CC,MAAAA,QAAQ,EAAEC;AAPgC,KAA5C;AASD,GAVD;;AAYA,QAAME,mBAAmB,GAAG,MAAM;AAChC7C,IAAAA,KAAK,CAACmC,OAAN,CAAc,8BAAd,EAA8C;AAC5CC,MAAAA,QAAQ,EAAE,WADkC;AAE5CC,MAAAA,SAAS,EAAE,IAFiC;AAG5CC,MAAAA,eAAe,EAAE,KAH2B;AAI5CC,MAAAA,YAAY,EAAE,IAJ8B;AAK5CC,MAAAA,YAAY,EAAE,IAL8B;AAM5CC,MAAAA,SAAS,EAAE,IANiC;AAO5CC,MAAAA,QAAQ,EAAEC;AAPkC,KAA9C;AASD,GAVD;;AAYA,QAAMG,mBAAmB,GAAG,MAAM;AAChC9C,IAAAA,KAAK,CAAC+C,KAAN,CAAY,uDAAZ,EAAqE;AACnEX,MAAAA,QAAQ,EAAE,WADyD;AAEnEC,MAAAA,SAAS,EAAE,IAFwD;AAGnEC,MAAAA,eAAe,EAAE,KAHkD;AAInEC,MAAAA,YAAY,EAAE,IAJqD;AAKnEC,MAAAA,YAAY,EAAE,IALqD;AAMnEC,MAAAA,SAAS,EAAE,IANwD;AAOnEC,MAAAA,QAAQ,EAAEC;AAPyD,KAArE;AASD,GAVD;;AAYA,QAAMpC,UAAU,GAAG,MAAMyC,MAAN,IAAgB;AACjC5B,IAAAA,QAAQ,CAACZ,eAAe,CAAC;AAAEwC,MAAAA,MAAF;AAAUjB,MAAAA,UAAV;AAAsBkB,MAAAA,aAAa,EAAEL;AAArC,KAAD,CAAhB,CAAR;AACD,GAFD;;AAGA,QAAMnC,aAAa,GAAGuC,MAAM,IAAI;AAC9B5B,IAAAA,QAAQ,CACNV,kBAAkB,CAAC;AAAEsC,MAAAA,MAAF;AAAUjB,MAAAA,UAAV;AAAsBkB,MAAAA,aAAa,EAAEf;AAArC,KAAD,CADZ,CAAR;AAGD,GAJD;;AAMA,QAAMvB,aAAa,GAAG,MAAMuC,EAAN,IAAY;AAChC9B,IAAAA,QAAQ,CACNR,kBAAkB,CAAC;AACjBsC,MAAAA,EADiB;AAEjBnB,MAAAA,UAFiB;AAGjBkB,MAAAA,aAAa,EAAEJ,mBAHE;AAIjBM,MAAAA,aAAa,EAAEL;AAJE,KAAD,CADZ,CAAR;AAQD,GATD;;AAWA,QAAMM,QAAQ,GAAGhD,mBAAmB,CAACR,MAAD,CAApC;AAEA,MAAIyD,aAAa,GAAGrC,IAApB;AAEA,QAAMsC,OAAO,GAAGhD,WAAW,CAACiD,KAAK;AAAA;;AAAA,oCAAIA,KAAK,CAACC,WAAN,CAAkBzC,IAAlB,CAAJ,0DAAI,sBAAyBuC,OAA7B;AAAA,GAAN,CAA3B;AAEA,QAAMP,KAAK,GAAGzC,WAAW,CAACiD,KAAK;AAAA;;AAAA,qCAAIA,KAAK,CAACC,WAAN,CAAkBzC,IAAlB,CAAJ,2DAAI,uBAAyBgC,KAA7B;AAAA,GAAN,CAAzB;AAEA,QAAMU,YAAY,GAAGV,KAAK,GACtB;AACEzB,IAAAA,GAAG,EAAE;AACH,WAAK;AACHoC,QAAAA,KAAK,EAAE,uBADJ;AAEHC,QAAAA,IAAI,EACF;AAHC,OADF;AAMH,WAAK;AACHD,QAAAA,KAAK,EAAE,eADJ;AAEHC,QAAAA,IAAI,EACF;AAHC;AANF,KADP;AAaEpC,IAAAA,MAAM,EAAE;AACN,WAAK;AACHmC,QAAAA,KAAK,EAAE,0BADJ;AAEHC,QAAAA,IAAI,EACF;AAHC,OADC;AAMN,WAAK;AACHD,QAAAA,KAAK,EAAE,eADJ;AAEHC,QAAAA,IAAI,EACF;AAHC;AANC;AAbV,IAyBE5C,IAzBF,EAyBQgC,KAAK,CAACa,MAzBd,CADsB,GA2BtB,IA3BJ;AA6BA,MAAI7C,IAAI,KAAK,MAAb,EACE,oBACE,QAAC,KAAD;AACE,IAAA,IAAI,EAAEG,YADR;AAEE,IAAA,oBAAoB,MAFtB;AAGE,IAAA,OAAO,EAAED,uBAHX;AAIQQ,IAAAA,YAJR;AAKE,IAAA,UAAU,MALZ;AAAA,2BAOE;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAwC,MAAA,IAAI,EAAC,UAA7C;AAAwD,MAAA,KAAK,EAAE;AAAEoC,QAAAA,MAAM,EAAE;AAAV,OAA/D;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA,kCACE;AAAI,YAAA,SAAS,EAAC,aAAd;AAAA,sBAA6BxC,WAAW,CAACN,IAAD;AAAxC;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AACE,YAAA,OAAO,EAAEE,uBADX;AAEE,YAAA,IAAI,EAAC,QAFP;AAGE,YAAA,SAAS,EAAC,OAHZ;AAIE,4BAAa,OAJf;AAKE,0BAAW,OALb;AAME,YAAA,GAAG,EAAEY,cANP;AAAA,oCAQE;AAAM,6BAAY,MAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBARF,EAQoC,GARpC;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAcE;AACE,UAAA,SAAS,EAAC,YADZ;AAEE,UAAA,KAAK,EAAE;AAAEiC,YAAAA,SAAS,EAAE,qBAAb;AAAoCC,YAAAA,SAAS,EAAE;AAA/C,WAFT;AAAA,iCAIE;AAAK,YAAA,SAAS,EAAC,WAAf;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,WAAf;AAAA,sCACE;AAAK,gBAAA,KAAK,EAAC,iBAAX;AAAA,uCACE;AAAK,kBAAA,KAAK,EAAC,KAAX;AAAA,yCACE;AAAI,oBAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBADF,eAOE;AAAI,gBAAA,SAAS,EAAC;AAAd;AAAA;AAAA;AAAA;AAAA,sBAPF,eASE,QAAC,IAAD;AACE,gBAAA,QAAQ,EAAEX,QADZ;AAEE,gBAAA,QAAQ,EAAErC,IAAI,KAAK,KAAT,GAAiBR,UAAjB,GAA8BE,aAF1C;AAGE,gBAAA,aAAa,EAAE4C,aAHjB;AAIE,gBAAA,YAAY,EAAE;AACZL,kBAAAA,MAAM,EAAE,IADI;AAEZK,kBAAAA,aAAa,EAAE,IAFH;AAGZW,kBAAAA,uBAAuB,EAAE;AAHb,iBAJhB;AASE,gBAAA,MAAM,EAAE;AAAA,sBAAC;AAAEC,oBAAAA,YAAF;AAAgBD,oBAAAA;AAAhB,mBAAD;AAAA,sCACN;AACE,oBAAA,EAAE,EAAC,QADL;AAEE,oBAAA,QAAQ,EAAEC,YAFZ;AAGE,oBAAA,SAAS,EAAC,4CAHZ;AAIE,oBAAA,KAAK,EAAE;AAAEC,sBAAAA,aAAa,EAAE;AAAjB,qBAJT;AAAA,4CAME,QAAC,iBAAD,OACMnE,MAAM,CAACoE,IAAP,CAAY;AAAA,4BAAC;AAAEC,0BAAAA;AAAF,yBAAD;AAAA,+BAAcA,IAAI,KAAK,OAAvB;AAAA,uBAAZ,CADN;AAEE,sBAAA,IAAI,EAAErD;AAFR;AAAA;AAAA;AAAA;AAAA,4BANF,eAUE;AACE,sBAAA,KAAK,EAAE;AACLsD,wBAAAA,OAAO,EAAE,MADJ;AAELC,wBAAAA,mBAAmB,EACjB,gDAHG;AAILC,wBAAAA,OAAO,EAAE,EAJJ;AAKLC,wBAAAA,UAAU,EAAE;AALP,uBADT;AAAA,gCASGzE,MAAM,CAAC0E,MAAP,CAAc;AAAA,4BAAC;AAAEL,0BAAAA;AAAF,yBAAD;AAAA,+BAAc,CAAC,CAAC,OAAD,EAAUM,QAAV,CAAmBN,IAAnB,CAAf;AAAA,uBAAd,EAAuDO,GAAvD,CACCC,KAAK,IACFA,KAAK,CAACC,IAAN,KAAe,QAAf,iBACC,QAAC,aAAD,OAAmBD,KAAnB;AAA0B,wBAAA,QAAQ,EAAEtB;AAApC;AAAA;AAAA;AAAA;AAAA,8BADF,iBAEM,QAAC,YAAD,OAAkBsB,KAAlB;AAAyB,wBAAA,QAAQ,EAAEtB;AAAnC;AAAA;AAAA;AAAA;AAAA,8BAJT;AATH;AAAA;AAAA;AAAA;AAAA,4BAVF,EA0BGP,KAAK,IAAI,CAACiB,uBAAV,IAAqC,CAACV,OAAtC,iBACC;AAAK,sBAAA,SAAS,EAAC,0BAAf;AAA0C,sBAAA,IAAI,EAAC,OAA/C;AAAA,8CACE;AAAI,wBAAA,SAAS,EAAC,gCAAd;AAAA,kCACGG,YAAY,CAAC,OAAD;AADf;AAAA;AAAA;AAAA;AAAA,8BADF,eAIE;AAAA,kCAAIA,YAAY,CAAC,MAAD;AAAhB;AAAA;AAAA;AAAA;AAAA,8BAJF;AAAA;AAAA;AAAA;AAAA;AAAA,4BA3BJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BADM;AAAA;AATV;AAAA;AAAA;AAAA;AAAA,sBATF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA,gBAdF,eA8EE;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA,iCACE;AACE,YAAA,IAAI,EAAC,QADP;AAEE,YAAA,SAAS,EAAC,mBAFZ;AAGE,4BAAa,OAHf;AAIE,YAAA,OAAO,EAAEqB,CAAC,IAAI;AACZA,cAAAA,CAAC,CAACC,cAAF;AACA9D,cAAAA,uBAAuB;AACxB,aAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBA9EF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAPF;AAAA;AAAA;AAAA;AAAA,UADF;AAyGF,sBACE,QAAC,KAAD;AAAO,IAAA,OAAO,EAAEH,OAAhB;AAAyB,IAAA,KAAK,MAA9B;AAAqCW,IAAAA,YAArC;AAAqD,IAAA,oBAAoB,EAAE,CAACN,uBAA5E;AAAqG,IAAA,aAAa,EAAE,CAACA,uBAArH;AAA8I,IAAA,OAAO,EAAEA,uBAAuB,GAAG,IAAH,GAAUY,UAAxL;AAAA,cACGiD,KAAK,iBACJ;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAwC,MAAA,IAAI,EAAC,UAA7C;AAAwD,MAAA,KAAK,EAAE;AAAEnB,QAAAA,MAAM,EAAE;AAAV,OAA/D;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA,kCACE;AAAI,YAAA,SAAS,EAAC,aAAd;AAAA,sBAA6BxC,WAAW,CAACN,IAAD;AAAxC;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AACE,YAAA,OAAO,EAAEI,uBAAuB,GAAG,IAAH,GAAU6D,KAD5C;AAEE,YAAA,IAAI,EAAC,QAFP;AAGE,YAAA,SAAS,EAAC,OAHZ;AAIE,4BAAa,OAJf;AAKE,0BAAW,OALb;AAME,YAAA,GAAG,EAAEnD,cANP;AAAA,oCAQE;AAAM,6BAAY,MAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBARF,EAQoC,GARpC;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAcE;AACE,UAAA,SAAS,EAAC,YADZ;AAEE,UAAA,KAAK,EAAE;AAAEiC,YAAAA,SAAS,EAAE,qBAAb;AAAoCC,YAAAA,SAAS,EAAE;AAA/C,WAFT;AAAA,iCAIE;AAAK,YAAA,SAAS,EAAC,WAAf;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,WAAf;AAAA,yBACG5C,uBAAuB,iBACtB;AAAK,gBAAA,SAAS,EAAC,6CAAf;AAAA,uCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBAFJ,eASE;AAAK,gBAAA,KAAK,EAAC,iBAAX;AAAA,wCACE;AAAK,kBAAA,KAAK,EAAC,KAAX;AAAA,yCACE;AAAI,oBAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBADF,eAIE;AAAK,kBAAA,KAAK,EAAC,aAAX;AAAA,4BACGJ,IAAI,KAAK,KAAT,iBACC;AACE,oBAAA,SAAS,EAAC,gBADZ;AAEE,oBAAA,OAAO,EAAE,MAAMJ,aAAa,CAAC0C,aAAa,CAACH,EAAf,CAF9B;AAAA,4CAIE;AAAG,sBAAA,KAAK,EAAC,aAAT;AAAuB,qCAAY;AAAnC;AAAA;AAAA;AAAA;AAAA,4BAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,wBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,sBATF,eAyBE;AAAI,gBAAA,SAAS,EAAC;AAAd;AAAA;AAAA;AAAA;AAAA,sBAzBF,eA2BE,QAAC,IAAD;AACE,gBAAA,QAAQ,EAAEE,QADZ;AAEE,gBAAA,QAAQ,EAAErC,IAAI,KAAK,KAAT,GAAiBR,UAAjB,GAA8BE,aAF1C;AAGE,gBAAA,aAAa,EAAE4C,aAHjB;AAIE,gBAAA,YAAY,EAAE;AACZL,kBAAAA,MAAM,EAAE,IADI;AAEZK,kBAAAA,aAAa,EAAE,IAFH;AAGZW,kBAAAA,uBAAuB,EAAE;AAHb,iBAJhB;AASE,gBAAA,MAAM,EAAE;AAAA,sBAAC;AAAEC,oBAAAA,YAAF;AAAgBD,oBAAAA;AAAhB,mBAAD;AAAA,sCACN;AACE,oBAAA,EAAE,EAAC,QADL;AAEE,oBAAA,QAAQ,EAAEC,YAFZ;AAGE,oBAAA,SAAS,EAAC,2CAHZ;AAAA,4CAKE,QAAC,iBAAD,OACMlE,MAAM,CAACoE,IAAP,CAAY;AAAA,4BAAC;AAAEC,0BAAAA;AAAF,yBAAD;AAAA,+BAAcA,IAAI,KAAK,OAAvB;AAAA,uBAAZ;AADN;AAAA;AAAA;AAAA;AAAA,4BALF,eAQE;AACE,sBAAA,KAAK,EAAE;AACLC,wBAAAA,OAAO,EAAE,MADJ;AAELC,wBAAAA,mBAAmB,EACjB,gDAHG;AAILC,wBAAAA,OAAO,EAAE,EAJJ;AAKLC,wBAAAA,UAAU,EAAE;AALP,uBADT;AAAA,gCASGzE,MAAM,CAAC0E,MAAP,CAAc;AAAA,4BAAC;AAAEL,0BAAAA;AAAF,yBAAD;AAAA,+BAAc,CAAC,CAAC,OAAD,EAAUM,QAAV,CAAmBN,IAAnB,CAAf;AAAA,uBAAd,EAAuDO,GAAvD,CACCC,KAAK,IACFA,KAAK,CAACC,IAAN,KAAe,QAAf,iBACC,QAAC,aAAD,OAAmBD,KAAnB;AAA0B,wBAAA,QAAQ,EAAEtB;AAApC;AAAA;AAAA;AAAA;AAAA,8BADF,iBAEM,QAAC,YAAD,OAAkBsB,KAAlB;AAAyB,wBAAA,QAAQ,EAAEtB;AAAnC;AAAA;AAAA;AAAA;AAAA,8BAJT;AATH;AAAA;AAAA;AAAA;AAAA,4BARF,EAwBGP,KAAK,IAAI,CAACiB,uBAAV,IAAqC,CAACV,OAAtC,iBACC;AAAK,sBAAA,SAAS,EAAC,0BAAf;AAA0C,sBAAA,IAAI,EAAC,OAA/C;AAAA,8CACE;AAAI,wBAAA,SAAS,EAAC,gCAAd;AAAA,kCACGG,YAAY,CAAC,OAAD;AADf;AAAA;AAAA;AAAA;AAAA,8BADF,eAIE;AAAA,kCAAIA,YAAY,CAAC,MAAD;AAAhB;AAAA;AAAA;AAAA;AAAA,8BAJF;AAAA;AAAA;AAAA;AAAA;AAAA,4BAzBJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BADM;AAAA;AATV;AAAA;AAAA;AAAA;AAAA,sBA3BF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA,gBAdF,eA8FE;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA,kCACE;AACE,YAAA,IAAI,EAAC,QADP;AAEE,YAAA,SAAS,EAAC,mBAFZ;AAGE,4BAAa,OAHf;AAIE,YAAA,OAAO,EAAEqB,CAAC,IAAI;AACZ,kBAAG3D,uBAAH,EAA4B;AAC5B2D,cAAAA,CAAC,CAACC,cAAF;AACAC,cAAAA,KAAK;AACN,aARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAaE;AACE,YAAA,KAAK,EAAE;AAAErD,cAAAA,UAAU,EAAEG,YAAd;AAA4BF,cAAAA,MAAM,EAAEE;AAApC,aADT;AAEE,YAAA,IAAI,EAAC,QAFP;AAGE,YAAA,SAAS,EAAC,iBAHZ;AAIE,4BAAa,OAJf;AAKE,YAAA,OAAO,EAAE,MACPmD,QAAQ,CACLC,cADH,CACkB,QADlB,EAEGC,aAFH,CAGI,IAAIC,KAAJ,CAAU,QAAV,EAAoB;AAAEC,cAAAA,UAAU,EAAE,IAAd;AAAoBC,cAAAA,OAAO,EAAE;AAA7B,aAApB,CAHJ,CANJ;AAYE,YAAA,QAAQ,EAAEhC,OAZZ;AAAA,uBAcGA,OAAO,IAAIvC,IAAI,KAAK,KAApB,gBACC,QAAC,QAAD;AAAA,sCACE;AACE,gBAAA,KAAK,EAAC,gCADR;AAEE,gBAAA,IAAI,EAAC,QAFP;AAGE,gBAAA,KAAK,EAAE;AAAEwE,kBAAAA,MAAM,EAAE,EAAV;AAAcC,kBAAAA,KAAK,EAAE;AAArB,iBAHT;AAAA,uCAKE;AAAM,kBAAA,KAAK,EAAC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA,sBADF;AAAA;AAAA;AAAA;AAAA;AAAA,oBADD,GAWGlC,OAAO,IAAIvC,IAAI,KAAK,QAApB,gBACF,QAAC,QAAD;AAAA,sCACE;AACE,gBAAA,KAAK,EAAC,gCADR;AAEE,gBAAA,IAAI,EAAC,QAFP;AAGE,gBAAA,KAAK,EAAE;AAAEwE,kBAAAA,MAAM,EAAE,EAAV;AAAcC,kBAAAA,KAAK,EAAE;AAArB,iBAHT;AAAA,uCAKE;AAAM,kBAAA,KAAK,EAAC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA,sBADF;AAAA;AAAA;AAAA;AAAA;AAAA,oBADE,GAYF,EArCJ,EAuCG,CAAClC,OAAD,IAAYvC,IAAI,KAAK,KAArB,GACG,QADH,GAEG,CAACuC,OAAD,IAAYvC,IAAI,KAAK,QAArB,GACA,MADA,GAEA,EA3CN;AAAA;AAAA;AAAA;AAAA;AAAA,kBAbF;AAAA;AAAA;AAAA;AAAA;AAAA,gBA9FF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,UADF;AAkKD;;GA9YuBF,gB;UAQLR,W,EAqFAD,mB,EAIDE,W,EAEFA,W;;;KAnGQO,gB","sourcesContent":["import React, { Fragment, useRef } from 'react';\nimport schema from '../../validators/learnerInfo';\nimport { Form } from 'react-final-form';\nimport Popup from 'reactjs-popup';\nimport FIELDS from './fields';\nimport { toast } from 'react-toastify';\nimport {\n  SelectControl,\n  InputControl,\n  ImageInputControl\n} from 'components/common/Form/Inputs';\nimport useValidationSchema from 'hooks/use-validation-schema';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  addLearner as fetchAddLearner,\n  updateLearner as fetchUpdateLearner,\n  deleteLearner as fetchDeleteLearner\n} from '../../redux/actions/learnerInfo';\nimport './index.css';\n\nexport default function LearnerInfoModal({\n  trigger,\n  mode,\n  info = null,\n  customCloseModalHandler,\n  customIsOpen,\n  shouldForceToAddLearner\n}) {\n  const dispatch = useDispatch();\n  const modalTitles = {\n    add: 'Add Learner',\n    update: 'Update Learner',\n    view: 'View Learner'\n  };\n  const contentStyle = {\n    padding: 0,\n    background: '#fff0',\n    border: 0\n  };\n  const closeButtonRef = useRef(null);\n  const primaryColor = '#00897B';\n  const closeModal = () => {\n    closeButtonRef?.current?.click();\n  };\n\n  const handleUpdateSuccess = () => {\n    toast.success('Learner successfully updated', {\n      position: 'top-right',\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined\n    });\n  };\n\n  const handleAddSuccess = () => {\n    toast.success('Learner successfully added', {\n      position: 'top-right',\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined\n    });\n  };\n\n  const handleDeleteSuccess = () => {\n    toast.success('Learner successfully deleted', {\n      position: 'top-right',\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined\n    });\n  };\n\n  const handleDeleteFailure = () => {\n    toast.error('Cannot delete learner. Learner is enrolled to a class', {\n      position: 'top-right',\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined\n    });\n  };\n\n  const addLearner = async values => {\n    dispatch(fetchAddLearner({ values, closeModal, handleSuccess: handleAddSuccess }));\n  };\n  const updateLearner = values => {\n    dispatch(\n      fetchUpdateLearner({ values, closeModal, handleSuccess: handleUpdateSuccess })\n    );\n  };\n\n  const deleteLearner = async id => {\n    dispatch(\n      fetchDeleteLearner({\n        id,\n        closeModal,\n        handleSuccess: handleDeleteSuccess,\n        handleFailure: handleDeleteFailure\n      })\n    );\n  };\n\n  const validate = useValidationSchema(schema);\n\n  let initialValues = info;\n\n  const loading = useSelector(state => state.learnerInfo[mode]?.loading);\n\n  const error = useSelector(state => state.learnerInfo[mode]?.error);\n\n  const errorMessage = error\n    ? {\n        add: {\n          400: {\n            title: 'Failed to Add Learner',\n            body:\n              \"We couldn't add the learner. \\n Please make sure that your inputs are valid.\"\n          },\n          500: {\n            title: 'Network Error',\n            body:\n              \"We couldn't connect you to the server. Please reload the page, or try again later.\"\n          }\n        },\n        update: {\n          400: {\n            title: 'Failed to Update Learner',\n            body:\n              \"We couldn't update the learner's inforrmation. \\n Please make sure that your inputs are valid.\"\n          },\n          500: {\n            title: 'Network Error',\n            body:\n              \"We couldn't connect you to the server. Please reload the page, or try again later.\"\n          }\n        }\n      }[mode][error.status]\n    : null;\n\n  if (mode === 'view')\n    return (\n      <Popup\n        open={customIsOpen}\n        closeOnDocumentClick\n        onClose={customCloseModalHandler}\n        {...{ contentStyle }}\n        lockScroll\n      >\n        <div className='modal-dialog modal-xl ' role='document' style={{ margin: 0 }}>\n          <div className='modal-content'>\n            <div className='modal-header'>\n              <h4 className='modal-title'>{modalTitles[mode]}</h4>\n              <button\n                onClick={customCloseModalHandler}\n                type='button'\n                className='close'\n                data-dismiss='modal'\n                aria-label='Close'\n                ref={closeButtonRef}\n              >\n                <span aria-hidden='true'>×</span>{' '}\n              </button>\n            </div>\n            <div\n              className='modal-body'\n              style={{ maxHeight: 'calc(101vh - 160px)', overflowY: 'auto' }}\n            >\n              <div className='card-body'>\n                <div className='form-body'>\n                  <div class='d-flex flex-row'>\n                    <div class='p-2'>\n                      <h3 className='box-title'>Learner Info</h3>\n                    </div>\n                  </div>\n\n                  <hr className='m-t-0 m-b-40' />\n\n                  <Form\n                    validate={validate}\n                    onSubmit={mode === 'add' ? addLearner : updateLearner}\n                    initialValues={initialValues}\n                    subscription={{\n                      values: true,\n                      initialValues: true,\n                      modifiedSinceLastSubmit: true\n                    }}\n                    render={({ handleSubmit, modifiedSinceLastSubmit }) => (\n                      <form\n                        id='myForm'\n                        onSubmit={handleSubmit}\n                        className='form-material form-horizontal form-teacher'\n                        style={{ pointerEvents: 'none' }}\n                      >\n                        <ImageInputControl\n                          {...FIELDS.find(({ name }) => name === 'photo')}\n                          mode={mode}\n                        />\n                        <div\n                          style={{\n                            display: 'grid',\n                            gridTemplateColumns:\n                              'repeat(auto-fill,minmax(min(500px, 100%),1fr))',\n                            gridGap: 10,\n                            gridRowGap: 40\n                          }}\n                        >\n                          {FIELDS.filter(({ name }) => !['photo'].includes(name)).map(\n                            props =>\n                              (props.type === 'select' && (\n                                <SelectControl {...props} disabled={loading} />\n                              )) || <InputControl {...props} disabled={loading} />\n                          )}\n                        </div>\n                        {error && !modifiedSinceLastSubmit && !loading && (\n                          <div className='alert alert-warning mt-5' role='alert'>\n                            <h4 className='alert-heading font-weight-bold'>\n                              {errorMessage['title']}\n                            </h4>\n                            <p>{errorMessage['body']}</p>\n                          </div>\n                        )}\n                      </form>\n                    )}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className='modal-footer'>\n              <button\n                type='button'\n                className='btn btn-secondary'\n                data-dismiss='modal'\n                onClick={e => {\n                  e.preventDefault();\n                  customCloseModalHandler();\n                }}\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      </Popup>\n    );\n\n  return (\n    <Popup trigger={trigger} modal {...{ contentStyle }} closeOnDocumentClick={!shouldForceToAddLearner} closeOnEscape={!shouldForceToAddLearner} onClose={shouldForceToAddLearner ? null : closeModal}>\n      {close => (\n        <div className='modal-dialog modal-xl ' role='document' style={{ margin: 0 }}>\n          <div className='modal-content'>\n            <div className='modal-header'>\n              <h4 className='modal-title'>{modalTitles[mode]}</h4>\n              <button\n                onClick={shouldForceToAddLearner ? null : close}\n                type='button'\n                className='close'\n                data-dismiss='modal'\n                aria-label='Close'\n                ref={closeButtonRef}\n              >\n                <span aria-hidden='true'>×</span>{' '}\n              </button>\n            </div>\n            <div\n              className='modal-body'\n              style={{ maxHeight: 'calc(101vh - 160px)', overflowY: 'auto' }}\n            >\n              <div className='card-body'>\n                <div className='form-body'>\n                  {shouldForceToAddLearner && (\n                    <div className='alert alert-warning text-center text m-t-20'>\n                      <span>\n                        Hooray! Last step is to add your first learner to enroll to a\n                        class.\n                      </span>\n                    </div>\n                  )}\n                  <div class='d-flex flex-row'>\n                    <div class='p-2'>\n                      <h3 className='box-title'>My Learner Info</h3>\n                    </div>\n                    <div class='p-2 ml-auto'>\n                      {mode !== 'add' && (\n                        <button\n                          className='btn btn-danger'\n                          onClick={() => deleteLearner(initialValues.id)}\n                        >\n                          <i class='fa fa-trash' aria-hidden='true' /> Delete Learner\n                        </button>\n                      )}\n                    </div>\n                  </div>\n\n                  <hr className='m-t-0 m-b-40' />\n\n                  <Form\n                    validate={validate}\n                    onSubmit={mode === 'add' ? addLearner : updateLearner}\n                    initialValues={initialValues}\n                    subscription={{\n                      values: true,\n                      initialValues: true,\n                      modifiedSinceLastSubmit: true\n                    }}\n                    render={({ handleSubmit, modifiedSinceLastSubmit }) => (\n                      <form\n                        id='myForm'\n                        onSubmit={handleSubmit}\n                        className='form-material form-horizontal form-family'\n                      >\n                        <ImageInputControl\n                          {...FIELDS.find(({ name }) => name === 'photo')}\n                        />\n                        <div\n                          style={{\n                            display: 'grid',\n                            gridTemplateColumns:\n                              'repeat(auto-fill,minmax(min(500px, 100%),1fr))',\n                            gridGap: 10,\n                            gridRowGap: 40\n                          }}\n                        >\n                          {FIELDS.filter(({ name }) => !['photo'].includes(name)).map(\n                            props =>\n                              (props.type === 'select' && (\n                                <SelectControl {...props} disabled={loading} />\n                              )) || <InputControl {...props} disabled={loading} />\n                          )}\n                        </div>\n                        {error && !modifiedSinceLastSubmit && !loading && (\n                          <div className='alert alert-warning mt-5' role='alert'>\n                            <h4 className='alert-heading font-weight-bold'>\n                              {errorMessage['title']}\n                            </h4>\n                            <p>{errorMessage['body']}</p>\n                          </div>\n                        )}\n                      </form>\n                    )}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className='modal-footer'>\n              <button\n                type='button'\n                className='btn btn-secondary'\n                data-dismiss='modal'\n                onClick={e => {\n                  if(shouldForceToAddLearner) return;\n                  e.preventDefault();\n                  close();\n                }}\n              >\n                Close\n              </button>\n              <button\n                style={{ background: primaryColor, border: primaryColor }}\n                type='button'\n                className='btn btn-primary'\n                data-dismiss='modal'\n                onClick={() =>\n                  document\n                    .getElementById('myForm')\n                    .dispatchEvent(\n                      new Event('submit', { cancelable: true, bubbles: true })\n                    )\n                }\n                disabled={loading}\n              >\n                {loading && mode === 'add' ? (\n                  <Fragment>\n                    <div\n                      class='spinner-border text-light mr-2'\n                      role='status'\n                      style={{ height: 20, width: 20 }}\n                    >\n                      <span class='sr-only'>Loading...</span>\n                    </div>\n                    Submitting\n                  </Fragment>\n                ) : loading && mode === 'update' ? (\n                  <Fragment>\n                    <div\n                      class='spinner-border text-light mr-2'\n                      role='status'\n                      style={{ height: 20, width: 20 }}\n                    >\n                      <span class='sr-only'>Loading...</span>\n                    </div>\n                    Saving\n                  </Fragment>\n                ) : (\n                  ''\n                )}\n                {!loading && mode === 'add'\n                  ? 'Submit'\n                  : !loading && mode === 'update'\n                  ? 'Save'\n                  : ''}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </Popup>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}