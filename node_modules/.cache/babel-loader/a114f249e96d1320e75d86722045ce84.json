{"ast":null,"code":"var _jsxFileName = \"/Users/vonojastro/Desktop/lms-frontend-v2/src/components/Profile/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getUserProfile } from \"../../api/account\";\nimport EditProfile from \"./EditProfile\";\nimport MyClasses from \"./MyClasses\";\nimport MyProfile from \"./MyProfile\";\nimport PayoutAccount from \"./PayoutAccount\";\nimport MyDocuments from \"./MyDocuments\"; // import Reviews from \"./Reviews\";\n\nimport './index.css';\nimport { toast } from 'react-toastify';\nimport { updateAccountDetails } from \"../../api/account\";\nimport { s3Config } from \"../../config\";\nimport S3 from \"aws-s3-pro\";\nimport moment from 'moment-timezone';\nimport { Button, Modal } from \"react-bootstrap\";\nimport { api } from \"api\";\nimport { useWelcomeModal } from 'hooks/useWelcomeModal';\nimport dayjs from \"dayjs\";\nimport DefaultPic from \"../../img/default-pic-blue1.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst s3Client = new S3(s3Config);\nexport default function Profile(_ref) {\n  _s();\n\n  let {\n    user\n  } = _ref;\n  const uploaderRef = useRef();\n  const {\n    firstName,\n    lastName,\n    email,\n    createdDatetime,\n    contactNumber,\n    photo,\n    type\n  } = useSelector(state => state.auth.user);\n  const [modal] = useWelcomeModal(type);\n  const dispatch = useDispatch();\n  const lastLogin = useSelector(state => state.auth.lastLogin ? state.auth.lastLogin : null);\n  const [profilePhoto, setProfilePhoto] = useState(!!photo ? photo : DefaultPic);\n  const [isPhotoAttached, setIsPhotoAttached] = useState(false);\n  const [uploadLoading, setUploadLoading] = useState(false);\n  const [fileAttached, setFileAttached] = useState(false);\n  const [modalShow, setModalShow] = useState(false);\n  const [authPassword, setPassword] = useState(\"\");\n  const [authResponse, setAuthResponse] = useState({\n    loading: false\n  });\n  React.useEffect(() => {\n    getUserProfile(dispatch); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const cancelUpload = () => {\n    setIsPhotoAttached(false);\n    setProfilePhoto(!!photo ? photo : DefaultPic);\n  };\n\n  const onAttachImage = async event => {\n    try {\n      //event.target.files[0].name = `${accountId}-${event.target.files[0].name}`;\n      setFileAttached(event.target.files[0]);\n      const reader = new FileReader();\n      reader.addEventListener(\"load\", () => {\n        const uploaded_image = reader.result;\n        setProfilePhoto(uploaded_image);\n        setIsPhotoAttached(true);\n      });\n      reader.readAsDataURL(event.target.files[0]);\n    } catch (error) {}\n  };\n\n  const onUpload = async () => {\n    try {\n      setUploadLoading(true);\n      const uploadResponse = await s3Client.uploadFile(fileAttached);\n\n      if (uploadResponse.status === 204) {\n        await updateAccountDetails(dispatch, {\n          photo: uploadResponse.location\n        }, status => {\n          if (status) {\n            toast.success(\"Profile Photo has been successfully uploaded!\");\n            setIsPhotoAttached(false); // if (lastLogin === null && (type === \"learner\" || type === \"family\") && (aboutMe !== \"\" && aboutMe !== null && aboutMe !== undefined) && (contactNumber !== \"\" && contactNumber !== null && contactNumber !== undefined)) {\n            //   if(type === \"learner\"){\n            //     dispatch(setLastLogin(true));\n            //   }\n            // navigate(\"/dashboard\", { replace: true });\n            // }\n\n            setProfilePhoto(uploadResponse.location);\n          } else {\n            toast.error(\"Failed uploading profile photo. Please try again.\");\n          }\n        });\n      }\n    } catch (error) {\n      toast.error(\"Failed uploading profile photo. Please try again.\");\n    } finally {\n      setUploadLoading(false);\n    }\n  };\n\n  const verifyPassword = async () => {\n    setAuthResponse({\n      loading: true\n    });\n    await api.post('/account/verify-password', {\n      password: authPassword\n    }).then(response => {\n      if (response.data.status === 'success') {\n        setAuthResponse({ ...response.data,\n          loading: false\n        });\n        setModalShow(false);\n        document.getElementById('payout-link').click();\n      } else {\n        setAuthResponse({\n          loading: false,\n          status: 'error'\n        });\n      }\n    }).catch(err => {\n      setAuthResponse({\n        loading: false,\n        status: 'error'\n      });\n    });\n  };\n\n  const openPayoutAccount = (source, event) => {\n    setAuthResponse({}); // switch(source){\n    //   case 'payout': \n    //     if(authResponse.status !== 'success'){\n    //       setModalShow(true);\n    //       event.preventDefault();\n    //       event.stopPropagation();\n    //     }\n    //     break;\n    //   default: setAuthResponse({});\n    // }\n  };\n\n  const shouldShowWelcomeMessage = useSelector(state => {\n    var _state$learners, _state$learners$data, _state$auth;\n\n    return !(state !== null && state !== void 0 && (_state$learners = state.learners) !== null && _state$learners !== void 0 && (_state$learners$data = _state$learners.data) !== null && _state$learners$data !== void 0 && _state$learners$data.length) && (state === null || state === void 0 ? void 0 : (_state$auth = state.auth) === null || _state$auth === void 0 ? void 0 : _state$auth.lastLogin) && dayjs(new Date()).diff(state.auth.lastLogin, 'seconds') < 30;\n  } // not 30 seconds has passed since closing modal\n  );\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [modal, shouldShowWelcomeMessage && (type === \"learner\" || type === \"family\") && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-warning text-center text m-t-20\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-weight-bold\",\n        children: [\"Welcome \", firstName, \" \", lastName, \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"For us to know more about you, please complete your profile below including adding your profile picture.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 81\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-4 col-xlg-3 col-md-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body el-element-overlay\",\n            children: /*#__PURE__*/_jsxDEV(\"center\", {\n              className: \"m-t-30\",\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginLeft: '40px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: profilePhoto,\n                  className: \"img-circle\",\n                  style: {\n                    maxHeight: '150px',\n                    maxWidth: '150px',\n                    objectFit: 'cover'\n                  },\n                  width: 150,\n                  height: 150,\n                  alt: \"user\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-link upload-icon\",\n                  onClick: () => uploaderRef.current.click(),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-camera\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  name: \"upload\",\n                  ref: uploaderRef,\n                  type: \"file\",\n                  accept: \".png, .jpg, .jpeg\",\n                  style: {\n                    display: \"none\"\n                  },\n                  onChange: onAttachImage\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: '10px',\n                  display: !!isPhotoAttached ? 'block' : 'none'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-link\",\n                  onClick: cancelUpload,\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-info\",\n                  onClick: onUpload,\n                  disabled: uploadLoading,\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      display: uploadLoading ? 'inline-block' : 'none'\n                    },\n                    class: \"spinner-border spinner-border-sm btn-load\",\n                    role: \"status\",\n                    \"aria-hidden\": \"true\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 21\n                  }, this), \"Upload\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"card-title m-t-10\",\n                children: firstName + \" \" + lastName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 15\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"text-muted\",\n              children: \"Member Since \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: moment.utc(createdDatetime, 'YYYY/MM/DD - hh:mm A').tz(Intl.DateTimeFormat().resolvedOptions().timeZone ? Intl.DateTimeFormat().resolvedOptions().timeZone : 'Asia/Manila').format('YYYY/MM/DD - hh:mm A')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"text-muted\",\n              children: \"Email Address \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"text-muted p-t-30 db\",\n              children: \"Phone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: contactNumber\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-lg-8 col-xlg-9 col-md-7\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"nav nav-tabs profile-tab\",\n            role: \"tablist\",\n            children: [user !== 'admin' && type !== 'school_leader' && /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"nav-item\",\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"a\", {\n                className: `nav-link ${(type === 'teacher' || ['family', 'learner'].indexOf(type) > -1 && lastLogin !== null) && 'active'}`,\n                \"data-toggle\": \"tab\",\n                href: \"#classes\",\n                role: \"tab\",\n                onClick: e => openPayoutAccount('classes', e),\n                children: \"My Classes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 17\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"nav-item\",\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"a\", {\n                className: `nav-link ${(user === 'admin' || type === \"school_leader\") && 'active'}`,\n                \"data-toggle\": \"tab\",\n                href: \"#profile\",\n                role: \"tab\",\n                onClick: e => openPayoutAccount('profile', e),\n                children: \"About Me\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 17\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"nav-item\",\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"a\", {\n                className: `nav-link ${user !== 'admin' && lastLogin === null && (type === \"learner\" || type === \"family\") && 'active'}`,\n                \"data-toggle\": \"tab\",\n                href: \"#settings\",\n                role: \"tab\",\n                onClick: e => openPayoutAccount('settings', e),\n                children: \"My Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 17\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 15\n            }, this), type === 'teacher' && /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"nav-item\",\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"nav-link\",\n                \"data-toggle\": \"tab\",\n                id: \"payout-link\",\n                href: \"#payout\",\n                role: \"tab\",\n                onClick: e => openPayoutAccount('payout', e),\n                children: \"Payout Account\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 17\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 39\n            }, this), type === 'teacher' && /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"nav-item\",\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"nav-link\",\n                \"data-toggle\": \"tab\",\n                href: \"#documents\",\n                role: \"tab\",\n                onClick: e => openPayoutAccount('documents', e),\n                children: \"My Documents\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 17\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 39\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tab-content\",\n            children: [user !== 'admin' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `tab-pane ${(type === 'teacher' || ['family', 'learner'].indexOf(type) > -1 && lastLogin !== null) && 'active'}`,\n              id: \"classes\",\n              role: \"tabpanel\",\n              children: /*#__PURE__*/_jsxDEV(MyClasses, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `tab-pane ${user === 'admin' && 'active'}`,\n              id: \"profile\",\n              role: \"tabpanel\",\n              children: /*#__PURE__*/_jsxDEV(MyProfile, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `tab-pane ${user !== 'admin' && lastLogin === null && (type === \"learner\" || type === \"family\") && 'active'}`,\n              id: \"settings\",\n              role: \"tabpanel\",\n              children: /*#__PURE__*/_jsxDEV(EditProfile, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 15\n            }, this), type === 'teacher' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"tab-pane\",\n              id: \"payout\",\n              role: \"tabpanel\",\n              children: /*#__PURE__*/_jsxDEV(PayoutAccount, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 38\n            }, this), type === 'teacher' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"tab-pane\",\n              id: \"documents\",\n              role: \"tabpanel\",\n              children: /*#__PURE__*/_jsxDEV(MyDocuments, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 38\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      size: \"m\",\n      show: modalShow,\n      onHide: () => setModalShow(false),\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Enter Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Enter your password to view or make changes on your Payout Account.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this), authResponse.status === 'error' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-danger text-center text\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Failed validating your credentials. Please try again.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 47\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            class: \"form-control\",\n            placeholder: \"Password\",\n            name: \"authPassword\",\n            \"aria-label\": \"Password\",\n            \"aria-describedby\": \"basic-addon2\",\n            onChange: e => setPassword(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"link\",\n          type: \"button\",\n          onClick: () => setModalShow(false),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"info\",\n          type: \"submit\",\n          onClick: verifyPassword,\n          disabled: authResponse.loading === true || !authPassword,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              display: authResponse.loading ? 'inline-block' : 'none'\n            },\n            class: \"spinner-border spinner-border-sm btn-load\",\n            role: \"status\",\n            \"aria-hidden\": \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 15\n          }, this), \"Proceed\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Profile, \"fw+drKlJm9lsHkZUpZhJBtO2rAI=\", false, function () {\n  return [useSelector, useWelcomeModal, useDispatch, useSelector, useSelector];\n});\n\n_c = Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/Users/vonojastro/Desktop/lms-frontend-v2/src/components/Profile/index.jsx"],"names":["React","useRef","useState","useDispatch","useSelector","getUserProfile","EditProfile","MyClasses","MyProfile","PayoutAccount","MyDocuments","toast","updateAccountDetails","s3Config","S3","moment","Button","Modal","api","useWelcomeModal","dayjs","DefaultPic","s3Client","Profile","user","uploaderRef","firstName","lastName","email","createdDatetime","contactNumber","photo","type","state","auth","modal","dispatch","lastLogin","profilePhoto","setProfilePhoto","isPhotoAttached","setIsPhotoAttached","uploadLoading","setUploadLoading","fileAttached","setFileAttached","modalShow","setModalShow","authPassword","setPassword","authResponse","setAuthResponse","loading","useEffect","cancelUpload","onAttachImage","event","target","files","reader","FileReader","addEventListener","uploaded_image","result","readAsDataURL","error","onUpload","uploadResponse","uploadFile","status","location","success","verifyPassword","post","password","then","response","data","document","getElementById","click","catch","err","openPayoutAccount","source","shouldShowWelcomeMessage","learners","length","Date","diff","marginLeft","maxHeight","maxWidth","objectFit","current","display","marginTop","utc","tz","Intl","DateTimeFormat","resolvedOptions","timeZone","format","indexOf","e","value"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getUserProfile } from \"../../api/account\";\nimport EditProfile from \"./EditProfile\";\nimport MyClasses from \"./MyClasses\";\nimport MyProfile from \"./MyProfile\";\nimport PayoutAccount from \"./PayoutAccount\";\nimport MyDocuments from \"./MyDocuments\";\n// import Reviews from \"./Reviews\";\nimport './index.css';\nimport { toast } from 'react-toastify';\nimport { updateAccountDetails } from \"../../api/account\";\n\nimport { s3Config } from \"../../config\";\nimport S3 from \"aws-s3-pro\";\nimport moment from 'moment-timezone';\nimport { Button, Modal } from \"react-bootstrap\";\nimport { api } from \"api\";\nimport { useWelcomeModal } from 'hooks/useWelcomeModal';\nimport dayjs from \"dayjs\";\nimport DefaultPic from \"../../img/default-pic-blue1.png\"\n\nconst s3Client = new S3(s3Config);\n\nexport default function Profile({ user }) {\n  const uploaderRef = useRef();\n  const { firstName, lastName, email, createdDatetime, contactNumber, photo, type } = useSelector((state) => state.auth.user);\n  const [modal] = useWelcomeModal(type);\n  const dispatch = useDispatch();\n\n  const lastLogin = useSelector((state) =>\n    state.auth.lastLogin ? state.auth.lastLogin : null\n  );\n\n  const [profilePhoto, setProfilePhoto] = useState(!!photo ? photo : DefaultPic);\n  const [isPhotoAttached, setIsPhotoAttached] = useState(false);\n  const [uploadLoading, setUploadLoading] = useState(false);\n  const [fileAttached, setFileAttached] = useState(false);\n  const [modalShow, setModalShow] = useState(false);\n  const [authPassword, setPassword] = useState(\"\");\n  const [authResponse, setAuthResponse] = useState({loading: false});\n\n  React.useEffect(() => {\n    getUserProfile(dispatch)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const cancelUpload = () => {\n    setIsPhotoAttached(false);\n    setProfilePhoto(!!photo ? photo : DefaultPic);\n  }\n\n  const onAttachImage = async (event) => {\n    try {\n      //event.target.files[0].name = `${accountId}-${event.target.files[0].name}`;\n      setFileAttached(event.target.files[0]);\n      const reader = new FileReader();\n      reader.addEventListener(\"load\", () => {\n        const uploaded_image = reader.result;\n        setProfilePhoto(uploaded_image);\n        setIsPhotoAttached(true);\n      });\n\n      reader.readAsDataURL(event.target.files[0]);\n    } catch (error) {}\n  }\n\n  const onUpload = async () => {\n    try {\n      setUploadLoading(true);\n\n      const uploadResponse = await s3Client.uploadFile(fileAttached);\n      if (uploadResponse.status === 204) {\n        await updateAccountDetails(dispatch, {photo: uploadResponse.location}, (status) => {   \n          if(status){\n            toast.success(\"Profile Photo has been successfully uploaded!\");\n            setIsPhotoAttached(false);\n            // if (lastLogin === null && (type === \"learner\" || type === \"family\") && (aboutMe !== \"\" && aboutMe !== null && aboutMe !== undefined) && (contactNumber !== \"\" && contactNumber !== null && contactNumber !== undefined)) {\n            //   if(type === \"learner\"){\n            //     dispatch(setLastLogin(true));\n            //   }\n\n              // navigate(\"/dashboard\", { replace: true });\n            // }\n            setProfilePhoto(uploadResponse.location);\n          }else{\n            toast.error(\"Failed uploading profile photo. Please try again.\");\n          }\n        });\n      }\n    } catch (error) {\n      toast.error(\"Failed uploading profile photo. Please try again.\");\n    } finally {\n      setUploadLoading(false);\n    }\n  }\n\n  const verifyPassword = async() => {\n    setAuthResponse({loading: true});\n    await api.post('/account/verify-password', { password: authPassword }).then((response) => {\n      if(response.data.status === 'success'){\n        setAuthResponse({\n          ...response.data,\n          loading:false\n        });\n        setModalShow(false);\n        document.getElementById('payout-link').click();\n      }else{\n        setAuthResponse({loading: false, status: 'error'});\n      }\n    }).catch(err => {\n      setAuthResponse({loading: false, status: 'error'});\n    });\n    \n  }\n\n  const openPayoutAccount = (source, event) => {\n    setAuthResponse({});\n    // switch(source){\n    //   case 'payout': \n    //     if(authResponse.status !== 'success'){\n    //       setModalShow(true);\n    //       event.preventDefault();\n    //       event.stopPropagation();\n    //     }\n    //     break;\n    //   default: setAuthResponse({});\n    // }\n  }\n\n  const shouldShowWelcomeMessage = useSelector(\n    state =>\n      !state?.learners?.data?.length &&\n      state?.auth?.lastLogin &&\n      dayjs(new Date()).diff(state.auth.lastLogin, 'seconds') < 30 // not 30 seconds has passed since closing modal\n  );\n\n  return (\n    <div>\n      {modal}\n      {shouldShowWelcomeMessage && (type === \"learner\" || type === \"family\") && <div className=\"alert alert-warning text-center text m-t-20\">\n          <span className=\"font-weight-bold\">\n            Welcome {firstName} {lastName}! \n          </span><br />\n          <span>For us to know more about you, please complete your profile below including adding your profile picture.</span>\n      </div>}\n      <div className=\"row\">\n        {/* Column */}\n        <div className=\"col-lg-4 col-xlg-3 col-md-5\">\n          <div className=\"card\">\n            <div className=\"card-body el-element-overlay\">\n              <center className=\"m-t-30\">\n                {/* {JSON.stringify(user)} */}\n                {\" \"}\n                <div style={{marginLeft: '40px'}}>\n                  <img\n                    src={profilePhoto}\n                    className=\"img-circle\"\n                    style={{maxHeight: '150px', maxWidth: '150px', objectFit: 'cover'}}\n                    width={150}\n                    height={150}\n                    alt=\"user\"\n                  />\n                    <button className=\"btn btn-link upload-icon\" onClick={() => uploaderRef.current.click()}>\n                      <i className=\"fas fa-camera\"></i>\n                    </button>\n                    <input\n                      name=\"upload\"\n                      ref={uploaderRef}\n                      type=\"file\"\n                      accept=\".png, .jpg, .jpeg\"\n                      style={{ display: \"none\" }}\n                      onChange={onAttachImage}\n                    />\n                </div>\n                <div style={{marginTop: '10px', display: !!isPhotoAttached ? 'block': 'none'}}>\n                  <button className=\"btn btn-link\" onClick={cancelUpload}>Cancel</button>\n                  <button className=\"btn btn-info\" onClick={onUpload} disabled={uploadLoading}>\n                    <span style={{ display: uploadLoading ? 'inline-block' : 'none' }} class=\"spinner-border spinner-border-sm btn-load\" role=\"status\" aria-hidden=\"true\"></span>\n                    Upload\n                  </button>\n                </div>\n                <h4 className=\"card-title m-t-10\">{firstName + \" \" + lastName}</h4>\n              </center>\n            </div>\n            <div>\n              <hr />{\" \"}\n            </div>\n            <div className=\"card-body\">\n              <small className=\"text-muted\">Member Since </small>\n              <h6>{moment.utc(createdDatetime, 'YYYY/MM/DD - hh:mm A').tz(Intl.DateTimeFormat().resolvedOptions().timeZone ? Intl.DateTimeFormat().resolvedOptions().timeZone : 'Asia/Manila').format('YYYY/MM/DD - hh:mm A')}</h6>\n              <small className=\"text-muted\">Email Address </small>\n              <h6>{email}</h6>\n              <small className=\"text-muted p-t-30 db\">Phone</small>\n              <h6>{contactNumber}</h6>\n              {/* <small className=\"text-muted p-t-20 db\">Social Profile</small>\n              <br />\n              <button className=\"btn btn-circle btn-secondary\">\n                <i className=\"fa fa-facebook\" />\n              </button>\n              <button className=\"btn btn-circle btn-secondary\">\n                <i className=\"fa fa-twitter\" />\n              </button>\n              <button className=\"btn btn-circle btn-secondary\">\n                <i className=\"fa fa-youtube\" />\n              </button> */}\n            </div>\n          </div>\n        </div>\n      \n        {/* Column */}\n        {/* Column */}\n        <div className=\"col-lg-8 col-xlg-9 col-md-7\">\n          <div className=\"card\">\n            {/* Nav tabs */}\n            <ul className=\"nav nav-tabs profile-tab\" role=\"tablist\">\n              { user !== 'admin' && type !== 'school_leader' &&\n              <li className=\"nav-item\">\n                {\" \"}\n                <a className={`nav-link ${(type === 'teacher' || (['family', 'learner'].indexOf(type) > -1 && lastLogin !== null)) && 'active'}`} data-toggle=\"tab\" href=\"#classes\" role=\"tab\" onClick={(e) => openPayoutAccount('classes', e)}>\n                  My Classes\n                </a>{\" \"}\n              </li> }\n              <li className=\"nav-item\">\n                {\" \"}\n                <a className={`nav-link ${(user === 'admin' || type === \"school_leader\") && 'active'}`} data-toggle=\"tab\" href=\"#profile\" role=\"tab\" onClick={(e) => openPayoutAccount('profile', e)}>\n                  About Me\n                </a>{\" \"}\n              </li>\n              {/* { user !== 'admin' && \n              <li className=\"nav-item\">\n                {\" \"}\n                <a className=\"nav-link\" data-toggle=\"tab\" href=\"#reviews\" role=\"tab\" onClick={(e) => openPayoutAccount('reviews', e)}>\n                  Reviews\n                </a>{\" \"}\n              </li> } */}\n              <li className=\"nav-item\">\n                {\" \"}\n                <a className={`nav-link ${(user !== 'admin' && (lastLogin === null && (type === \"learner\" || type === \"family\" ))) && 'active'}`} data-toggle=\"tab\" href=\"#settings\" role=\"tab\" onClick={(e) => openPayoutAccount('settings', e)}>\n                  My Profile\n                </a>{\" \"}\n              </li>\n              { type === 'teacher' && <li className=\"nav-item\">\n                {\" \"}\n                <a className=\"nav-link\" data-toggle=\"tab\" id=\"payout-link\" href=\"#payout\" role=\"tab\" onClick={(e) => openPayoutAccount('payout', e)}>\n                  Payout Account \n                    {/* <i className={`fas ${authResponse.status !== 'success' ? 'fa-lock' : 'fa-lock-open'} ml-2 btn-link`}></i> */}\n                    {/* <i className=\"fas fa-lock-open ml-2\"></i> */}\n                </a>{\" \"}\n              </li>}\n              { type === 'teacher' && <li className=\"nav-item\">\n                {\" \"}\n                <a className=\"nav-link\" data-toggle=\"tab\" href=\"#documents\" role=\"tab\" onClick={(e) => openPayoutAccount('documents', e)}>\n                  My Documents\n                </a>{\" \"}\n              </li>}\n            </ul>\n            {/* Tab panes */}\n            <div className=\"tab-content\">\n              {/*first tab*/}\n              { user !== 'admin' && \n              <div className={`tab-pane ${(type === 'teacher' || (['family', 'learner'].indexOf(type) > -1 && lastLogin !== null)) && 'active'}`} id=\"classes\" role=\"tabpanel\">\n                <MyClasses />\n              </div> }\n              {/*My Profile tab*/}\n              <div className={`tab-pane ${user === 'admin' && 'active'}`} id=\"profile\" role=\"tabpanel\">\n                <MyProfile />\n              </div>\n              {/*Reviews tab*/}\n              {/* { user !== 'admin' && \n              <div className=\"tab-pane\" id=\"reviews\" role=\"tabpanel\">\n                <Reviews />\n              </div> } */}\n              <div className={`tab-pane ${(user !== 'admin' && (lastLogin === null && (type === \"learner\" || type === \"family\"))) && 'active'}`} id=\"settings\" role=\"tabpanel\">\n                <EditProfile />\n              </div>\n              {type === 'teacher' && <div className=\"tab-pane\" id=\"payout\" role=\"tabpanel\">\n                <PayoutAccount />\n              </div>}\n              {type === 'teacher' && <div className=\"tab-pane\" id=\"documents\" role=\"tabpanel\">\n                <MyDocuments />\n              </div>}\n              \n            </div>\n          </div>\n          {/* Column */}\n        </div>\n        {/* Column */}\n      </div>\n      <Modal size=\"m\" show={modalShow} onHide={() => setModalShow(false)}>\n        <Modal.Header closeButton>\n          <Modal.Title>\n            Enter Password\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <p>\n            Enter your password to view or make changes on your Payout Account.\n          </p>\n          {authResponse.status === 'error' && <div className=\"alert alert-danger text-center text\">\n              <span>Failed validating your credentials. Please try again.</span>\n          </div>}\n          <div className=\"input-group\">\n            <input type=\"password\" class=\"form-control\" placeholder=\"Password\" name=\"authPassword\" aria-label=\"Password\" aria-describedby=\"basic-addon2\" \n              onChange={(e) => setPassword(e.target.value)}/>\n            {/* <div class=\"input-group-append\">\n              <button class=\"btn btn-link\" type=\"button\">\n                <i className=\"far fa-eye-slash\"></i>\n              </button>\n            </div> */}\n          </div>\n        </Modal.Body>\n        <Modal.Footer>\n            <Button variant=\"link\" type=\"button\" onClick={() => setModalShow(false)}>\n              Cancel\n            </Button>\n            <Button variant=\"info\" type=\"submit\" onClick={verifyPassword} disabled={authResponse.loading === true || !authPassword}>\n              <span style={{ display: authResponse.loading ? 'inline-block' : 'none' }} class=\"spinner-border spinner-border-sm btn-load\" role=\"status\" aria-hidden=\"true\"></span>\n              Proceed\n            </Button>\n        </Modal.Footer>\n      </Modal>\n      {/* Column */}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}